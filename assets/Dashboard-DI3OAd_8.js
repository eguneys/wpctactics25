import{P as g,w as K,a as r,f as z,S as v,j as D,x as he,D as Se,c as be,y as me,i as l,g as O,h as xe,F as Ce,E as Q,G as x,d as ke,t as n,U as $,H as ye,B as we}from"./index-CJH_hWUs.js";import{S as W,f as Pe}from"./session_store-CgU1Qj2R.js";var Re=n("<span>Loading.."),De=n('<div class=dashboard><div class=puzzle-list><h2>Puzzle Sets</h2><ul></ul></div><div class=settings><h2>Settings</h2><div class=links><span class=link></span><div class=volume><label>Volume</label><input min=0 max=1 step=0.1 type=range></div><span class="link red">Clear Statistics</span><span class="link red">Delete Profile</span></div></div><div class=stats><div class=header><span> Statistics</span></div><div class=body>'),ze=n("<span> active "),Ee=n("<li><span></span>"),Fe=n("<span class=link> <!> "),Te=n("<span>"),Ve=n("<span> There are no runs on this set. "),Ae=n("<div class=buttons><button>Start a New Run"),Ne=n("<button>Set Active"),Be=n("<div class=buttons><button>Start Solving"),Le=n("<div class=title><span> Total Runs: <!> </span><div class=runs><span> Run #<!> "),Ue=n("<div class=progress>Progress Bar"),je=n("<div class=info><span>Attempted: <!>/</span><div class=out><span class=solved>Solved: <!>/</span><span class=failed>Failed: <!>/</span><span class=skipped>Skipped: <!>/<!> </span></div><span>Time Spent: <!> "),Ge=n('<div class=buttons><span class="link red">Clear Statistics');const Je=()=>{let h=g.active_user??g.anonymous_user,[a]=K(()=>we.get_list_of_studies());const[_]=K(()=>$.get_or_create_active_config_for_user(h));return r(v,{get when(){return z(()=>!!(!(a.loading||_.loading)&&a()))()&&!!_()},get fallback(){return Re()},get children(){return r(He,{get config(){return _()},get studies(){return a()}})}})},He=h=>{const a=()=>g.active_user??g.anonymous_user,[_,E]=D(h.config.active_set),F=()=>h.studies,[d,X]=D(_()),T=z(()=>F().find(s=>s.id===d())),V=()=>$.get_runs_for_user(a(),d()),[A,Me]=D(0),Y=z(()=>{let s=V();return s[s.length-1-A()]}),C=he(),S=Se();be(me(_,s=>{$.set_active_config_for_user(a(),s)}));const Z=()=>{S("/profile")},ee=()=>{$.clear_all_runs(a())},te=()=>{window.confirm("Do you want to delete your profile?")&&(g.delete_active_profile(),S("/profile"))},le=ye(150,s=>{C.setVolume(s),C.play("move")}),N=()=>{E(d())},ie=()=>{E(d()),$.get_or_create_active_run_for_user(a())},se=()=>{$.clear_runs(a(),d())};W.navigate_filter=void 0;const k=s=>{W.navigate_filter=s,S("/")};return(()=>{var s=De(),B=s.firstChild,ne=B.firstChild,ae=ne.nextSibling,L=B.nextSibling,re=L.firstChild,_e=re.nextSibling,y=_e.firstChild,U=y.nextSibling,ce=U.firstChild,j=ce.nextSibling,G=U.nextSibling,de=G.nextSibling,oe=L.nextSibling,w=oe.firstChild,P=w.firstChild,$e=P.firstChild,ge=w.nextSibling;return l(ae,r(Ce,{get each(){return F()},children:e=>(()=>{var t=Ee(),i=t.firstChild;return t.$$click=()=>X(e.id),l(i,()=>e.name),l(t,r(v,{get when(){return e.id===_()},get children(){return ze()}}),null),O(()=>xe(t,d()===e.id?"active":"")),t})()})),y.$$click=()=>Z(),l(y,r(Q,{href:"/profile",children:"Change Profile"})),j.$$input=e=>le(parseFloat(e.currentTarget.value)),G.$$click=()=>ee(),de.$$click=()=>te(),l(w,r(v,{get when(){return g.active_user},get fallback(){return(()=>{var e=Fe(),t=e.firstChild,i=t.nextSibling;return i.nextSibling,l(e,r(Q,{href:"/profile",children:"Save Profile"}),i),e})()},children:e=>(()=>{var t=Te();return l(t,e),t})()}),P),l(P,()=>T().name,$e),l(ge,r(v,{get when(){return Y()},keyed:!0,get fallback(){return[Ve(),(()=>{var e=Ae(),t=e.firstChild;return t.$$click=()=>ie(),e})()]},children:e=>[(()=>{var t=Be(),i=t.firstChild;return l(t,r(v,{get when(){return T().id!==_()},get children(){var o=Ne();return o.$$click=()=>N(),o}}),i),i.$$click=()=>{N(),S("/")},t})(),(()=>{var t=Le(),i=t.firstChild,o=i.firstChild,u=o.nextSibling;u.nextSibling;var b=i.nextSibling,c=b.firstChild,R=c.firstChild,p=R.nextSibling;return p.nextSibling,l(i,()=>V().length,u),l(c,()=>A()+1,p),t})(),Ue(),(()=>{var t=je(),i=t.firstChild,o=i.firstChild,u=o.nextSibling;u.nextSibling;var b=i.nextSibling,c=b.firstChild,R=c.firstChild,p=R.nextSibling;p.nextSibling;var f=c.nextSibling,ue=f.firstChild,H=ue.nextSibling;H.nextSibling;var m=f.nextSibling,pe=m.firstChild,M=pe.nextSibling,fe=M.nextSibling,q=fe.nextSibling;q.nextSibling;var I=b.nextSibling,ve=I.firstChild,J=ve.nextSibling;return J.nextSibling,l(i,()=>x(e),u),l(i,()=>e.total,null),c.$$click=()=>k("solved"),l(c,()=>e.solved.length,p),l(c,()=>x(e),null),f.$$click=()=>k("failed"),l(f,()=>e.failed.length,H),l(f,()=>x(e),null),m.$$click=()=>k("skipped"),l(m,()=>e.skipped.length,M),l(m,()=>x(e),q),l(I,()=>Pe(e.elapsed_ms),J),t})(),(()=>{var t=Ge(),i=t.firstChild;return i.$$click=()=>se(),t})()]})),O(()=>j.value=C.getVolume()),s})()};ke(["click","input"]);export{Je as default};
