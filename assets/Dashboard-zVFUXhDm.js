import{P as u,y as Q,a as d,h as E,S,l as z,z as Se,J as be,c as me,i as t,b as A,f as xe,F as Ce,K as W,e as D,E as C,d as ke,t as a,U as f,A as we,L as ye,H as Pe}from"./index-chwv1FxJ.js";import{S as X,f as Re}from"./session_store-CjgTReIv.js";var ze=a("<span>Loading.."),Ae=a('<div class=dashboard><div class=puzzle-list><h2>Puzzle Sets</h2><ul></ul></div><div class=settings><h2>Settings</h2><div class=links><span class=link></span><div class=volume><label>Volume</label><input min=0 max=1 step=0.1 type=range></div><span class="link red">Clear Statistics</span><span class="link red">Delete Profile</span></div></div><div class=stats><div class=header><span> Statistics</span></div><div class=body>'),De=a("<span> active "),Ee=a("<li><span></span>"),Fe=a("<span class=link> <!> "),Te=a("<span>"),Ve=a("<span> There are no runs on this set. "),Le=a("<div class=buttons><button>Start a New Run"),Ne=a("<button>Set Active"),Ue=a("<div class=buttons><button>Start Solving"),He=a("<div class=title><span> Total Runs: <!> </span><div class=runs><span> Run #<!> "),Je=a("<div class=progress><div class=progress-bar><span class=solved> </span><span class=failed> </span><span class=skipped> "),Ke=a("<div class=info><span>Attempted: <!>/</span><div class=out><span class=solved>Solved: <!>/</span><span class=failed>Failed: <!>/</span><span class=skipped>Skipped: <!>/<!> </span></div><span>Time Spent: <!> "),Me=a('<div class=buttons><span class="link red">Clear Statistics');const Ie=()=>{let b=u.active_user??u.anonymous_user,[r]=Q(()=>Pe.get_list_of_studies());const[c]=Q(()=>f.get_or_create_active_config_for_user(b));return d(S,{get when(){return E(()=>!!(!(r.loading||c.loading)&&r()))()&&!!c()},get fallback(){return ze()},get children(){return d(je,{get config(){return c()},get studies(){return r()}})}})},je=b=>{const r=()=>u.active_user??u.anonymous_user,[c,F]=z(b.config.active_set),T=()=>b.studies,[v,Y]=z(c()),V=E(()=>T().find(n=>n.id===v())),L=()=>f.get_runs_for_user(r(),v()),[N,qe]=z(0),Z=E(()=>{let n=L();return n[n.length-1-N()]}),k=Se(),m=be();me(we(c,n=>{f.set_active_config_for_user(r(),n)}));const ee=()=>{m("/profile")},le=()=>{f.clear_all_runs(r())},te=()=>{window.confirm("Do you want to delete your profile?")&&(u.delete_active_profile(),m("/profile"))},ie=ye(150,n=>{k.setVolume(n),k.play("move")}),U=()=>{F(v())},se=()=>{F(v()),f.get_or_create_active_run_for_user(r())},ne=()=>{f.clear_runs(r(),v())};X.navigate_filter=void 0;const w=n=>{X.navigate_filter=n,m("/")};return(()=>{var n=Ae(),H=n.firstChild,ae=H.firstChild,re=ae.nextSibling,J=H.nextSibling,_e=J.firstChild,de=_e.nextSibling,y=de.firstChild,K=y.nextSibling,ce=K.firstChild,M=ce.nextSibling,j=K.nextSibling,oe=j.nextSibling,$e=J.nextSibling,P=$e.firstChild,R=P.firstChild,ge=R.firstChild,ve=P.nextSibling;return t(re,d(Ce,{get each(){return T()},children:e=>(()=>{var l=Ee(),i=l.firstChild;return l.$$click=()=>Y(e.id),t(i,()=>e.name),t(l,d(S,{get when(){return e.id===c()},get children(){return De()}}),null),A(()=>xe(l,v()===e.id?"active":"")),l})()})),y.$$click=()=>ee(),t(y,d(W,{href:"/profile",children:"Change Profile"})),M.$$input=e=>ie(parseFloat(e.currentTarget.value)),j.$$click=()=>le(),oe.$$click=()=>te(),t(P,d(S,{get when(){return u.active_user},get fallback(){return(()=>{var e=Fe(),l=e.firstChild,i=l.nextSibling;return i.nextSibling,t(e,d(W,{href:"/profile",children:"Save Profile"}),i),e})()},children:e=>(()=>{var l=Te();return t(l,e),l})()}),R),t(R,()=>V().name,ge),t(ve,d(S,{get when(){return Z()},keyed:!0,get fallback(){return[Ve(),(()=>{var e=Le(),l=e.firstChild;return l.$$click=()=>se(),e})()]},children:e=>[(()=>{var l=Ue(),i=l.firstChild;return t(l,d(S,{get when(){return V().id!==c()},get children(){var _=Ne();return _.$$click=()=>U(),_}}),i),i.$$click=()=>{U(),m("/")},l})(),(()=>{var l=He(),i=l.firstChild,_=i.firstChild,o=_.nextSibling;o.nextSibling;var p=i.nextSibling,s=p.firstChild,h=s.firstChild,$=h.nextSibling;return $.nextSibling,t(i,()=>L().length,o),t(s,()=>N()+1,$),l})(),(()=>{var l=Je(),i=l.firstChild,_=i.firstChild,o=_.nextSibling,p=o.nextSibling;return A(s=>{var h=`width: ${e.solved.length/e.total*100}%;`,$=`width: ${e.failed.length/e.total*100}%;`,g=`width: ${e.skipped.length/e.total*100}%;`;return s.e=D(_,h,s.e),s.t=D(o,$,s.t),s.a=D(p,g,s.a),s},{e:void 0,t:void 0,a:void 0}),l})(),(()=>{var l=Ke(),i=l.firstChild,_=i.firstChild,o=_.nextSibling;o.nextSibling;var p=i.nextSibling,s=p.firstChild,h=s.firstChild,$=h.nextSibling;$.nextSibling;var g=s.nextSibling,pe=g.firstChild,q=pe.nextSibling;q.nextSibling;var x=g.nextSibling,fe=x.firstChild,B=fe.nextSibling,ue=B.nextSibling,G=ue.nextSibling;G.nextSibling;var I=p.nextSibling,he=I.firstChild,O=he.nextSibling;return O.nextSibling,t(i,()=>C(e),o),t(i,()=>e.total,null),s.$$click=()=>w("solved"),t(s,()=>e.solved.length,$),t(s,()=>C(e),null),g.$$click=()=>w("failed"),t(g,()=>e.failed.length,q),t(g,()=>C(e),null),x.$$click=()=>w("skipped"),t(x,()=>e.skipped.length,B),t(x,()=>C(e),G),t(I,()=>Re(e.elapsed_ms),O),l})(),(()=>{var l=Me(),i=l.firstChild;return i.$$click=()=>ne(),l})()]})),A(()=>M.value=k.getVolume()),n})()};ke(["click","input"]);export{Ie as default};
