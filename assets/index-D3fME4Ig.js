const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Home-BoF7qL7j.js","./session_store-CjgTReIv.js","./Home-B7OjcdYG.css","./Dashboard-D0oJbDWT.js","./Dashboard-BBj7IYQc.css","./Profile-Btu9yJiJ.js","./Profile-DecqPPXv.css"])))=>i.map(i=>d[i]);
var qn=Object.defineProperty;var Qn=(t,e,n)=>e in t?qn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var N=(t,e,n)=>Qn(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();const E={context:void 0,registry:void 0};function re(t){E.context=t}function Jn(){return{...E.context,id:`${E.context.id}${E.context.count++}-`,count:0}}const Xn=(t,e)=>t===e,Oe=Symbol("solid-proxy"),Zn=Symbol("solid-track"),ze={equals:Xn};let pn=vn;const q=1,Fe=2,gn={owned:null,cleanups:null,context:null,owner:null},ot={};var C=null;let ct=null,Yn=null,x=null,M=null,W=null,qe=0;function Pe(t,e){const n=x,s=C,r=t.length===0,i=e===void 0?s:e,o=r?gn:{owned:null,cleanups:null,context:i?i.context:null,owner:i},c=r?t:()=>t(()=>B(()=>Ye(o)));C=o,x=null;try{return V(c,!0)}finally{x=n,C=s}}function I(t,e){e=e?Object.assign({},ze,e):ze;const n={value:t,observers:null,observerSlots:null,comparator:e.equals||void 0},s=r=>(typeof r=="function"&&(r=r(n.value)),_n(n,r));return[yn.bind(n),s]}function Vt(t,e,n){const s=Ze(t,e,!0,q);Ae(s)}function H(t,e,n){const s=Ze(t,e,!1,q);Ae(s)}function es(t,e,n){pn=cs;const s=Ze(t,e,!1,q);s.user=!0,W?W.push(s):Ae(s)}function $(t,e,n){n=n?Object.assign({},ze,n):ze;const s=Ze(t,e,!0,0);return s.observers=null,s.observerSlots=null,s.comparator=n.equals||void 0,Ae(s),yn.bind(s)}function ts(t){return t&&typeof t=="object"&&"then"in t}function ns(t,e,n){let s,r,i;arguments.length===2&&typeof e=="object"||arguments.length===1?(s=!0,r=t,i=e||{}):(s=t,r=e,i={});let o=null,c=ot,l=null,u=!1,a="initialValue"in i,h=typeof s=="function"&&$(s);const d=new Set,[p,m]=(i.storage||I)(i.initialValue),[g,k]=I(void 0),[y,P]=I(void 0,{equals:!1}),[A,O]=I(a?"ready":"unresolved");if(E.context){l=`${E.context.id}${E.context.count++}`;let R;i.ssrLoadFrom==="initial"?c=i.initialValue:E.load&&(R=E.load(l))&&(c=R)}function S(R,w,v,z){return o===R&&(o=null,z!==void 0&&(a=!0),(R===c||w===c)&&i.onHydrated&&queueMicrotask(()=>i.onHydrated(z,{value:w})),c=ot,Q(w,v)),w}function Q(R,w){V(()=>{w===void 0&&m(()=>R),O(w!==void 0?"errored":a?"ready":"unresolved"),k(w);for(const v of d.keys())v.decrement();d.clear()},!1)}function J(){const R=rs,w=p(),v=g();if(v!==void 0&&!o)throw v;return x&&!x.user&&R&&Vt(()=>{y(),o&&(R.resolved||d.has(R)||(R.increment(),d.add(R)))}),w}function G(R=!0){if(R!==!1&&u)return;u=!1;const w=h?h():s;if(w==null||w===!1){S(o,B(p));return}const v=c!==ot?c:B(()=>r(w,{value:p(),refetching:R}));return ts(v)?(o=v,"value"in v?(v.status==="success"?S(o,v.value,void 0,w):S(o,void 0,mt(v.value),w),v):(u=!0,queueMicrotask(()=>u=!1),V(()=>{O(a?"refreshing":"pending"),P()},!1),v.then(z=>S(v,z,void 0,w),z=>S(v,void 0,mt(z),w)))):(S(o,v,void 0,w),v)}return Object.defineProperties(J,{state:{get:()=>A()},error:{get:()=>g()},loading:{get(){const R=A();return R==="pending"||R==="refreshing"}},latest:{get(){if(!a)return J();const R=g();if(R&&!o)throw R;return p()}}}),h?Vt(()=>G(!1)):G(!1),[J,{refetch:G,mutate:m}]}function Gt(t){return V(t,!1)}function B(t){if(x===null)return t();const e=x;x=null;try{return t()}finally{x=e}}function wn(t,e,n){const s=Array.isArray(t);let r;return i=>{let o;if(s){o=Array(t.length);for(let l=0;l<t.length;l++)o[l]=t[l]()}else o=t();const c=B(()=>e(o,r,i));return r=o,c}}function Li(t){es(()=>B(t))}function Lt(t){return C===null||(C.cleanups===null?C.cleanups=[t]:C.cleanups.push(t)),t}function bn(){return C}function kn(t,e){const n=C,s=x;C=t,x=null;try{return V(e,!0)}catch(r){Tt(r)}finally{C=n,x=s}}function ss(t){const e=x,n=C;return Promise.resolve().then(()=>{x=e,C=n;let s;return V(t,!1),x=C=null,s?s.done:void 0})}function Qe(t,e){const n=Symbol("context");return{id:n,Provider:ls(n),defaultValue:t}}function Je(t){return C&&C.context&&C.context[t.id]!==void 0?C.context[t.id]:t.defaultValue}function Xe(t){const e=$(t),n=$(()=>pt(e()));return n.toArray=()=>{const s=n();return Array.isArray(s)?s:s!=null?[s]:[]},n}let rs;function yn(){if(this.sources&&this.state)if(this.state===q)Ae(this);else{const t=M;M=null,V(()=>Ue(this),!1),M=t}if(x){const t=this.observers?this.observers.length:0;x.sources?(x.sources.push(this),x.sourceSlots.push(t)):(x.sources=[this],x.sourceSlots=[t]),this.observers?(this.observers.push(x),this.observerSlots.push(x.sources.length-1)):(this.observers=[x],this.observerSlots=[x.sources.length-1])}return this.value}function _n(t,e,n){let s=t.value;return(!t.comparator||!t.comparator(s,e))&&(t.value=e,t.observers&&t.observers.length&&V(()=>{for(let r=0;r<t.observers.length;r+=1){const i=t.observers[r],o=ct&&ct.running;o&&ct.disposed.has(i),(o?!i.tState:!i.state)&&(i.pure?M.push(i):W.push(i),i.observers&&En(i)),o||(i.state=q)}if(M.length>1e6)throw M=[],new Error},!1)),e}function Ae(t){if(!t.fn)return;Ye(t);const e=qe;is(t,t.value,e)}function is(t,e,n){let s;const r=C,i=x;x=C=t;try{s=t.fn(e)}catch(o){return t.pure&&(t.state=q,t.owned&&t.owned.forEach(Ye),t.owned=null),t.updatedAt=n+1,Tt(o)}finally{x=i,C=r}(!t.updatedAt||t.updatedAt<=n)&&(t.updatedAt!=null&&"observers"in t?_n(t,s):t.value=s,t.updatedAt=n)}function Ze(t,e,n,s=q,r){const i={fn:t,state:s,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:C,context:C?C.context:null,pure:n};return C===null||C!==gn&&(C.owned?C.owned.push(i):C.owned=[i]),i}function Ke(t){if(t.state===0)return;if(t.state===Fe)return Ue(t);if(t.suspense&&B(t.suspense.inFallback))return t.suspense.effects.push(t);const e=[t];for(;(t=t.owner)&&(!t.updatedAt||t.updatedAt<qe);)t.state&&e.push(t);for(let n=e.length-1;n>=0;n--)if(t=e[n],t.state===q)Ae(t);else if(t.state===Fe){const s=M;M=null,V(()=>Ue(t,e[0]),!1),M=s}}function V(t,e){if(M)return t();let n=!1;e||(M=[]),W?n=!0:W=[],qe++;try{const s=t();return os(n),s}catch(s){n||(W=null),M=null,Tt(s)}}function os(t){if(M&&(vn(M),M=null),t)return;const e=W;W=null,e.length&&V(()=>pn(e),!1)}function vn(t){for(let e=0;e<t.length;e++)Ke(t[e])}function cs(t){let e,n=0;for(e=0;e<t.length;e++){const s=t[e];s.user?t[n++]=s:Ke(s)}if(E.context){if(E.count){E.effects||(E.effects=[]),E.effects.push(...t.slice(0,n));return}else E.effects&&(t=[...E.effects,...t],n+=E.effects.length,delete E.effects);re()}for(e=0;e<n;e++)Ke(t[e])}function Ue(t,e){t.state=0;for(let n=0;n<t.sources.length;n+=1){const s=t.sources[n];if(s.sources){const r=s.state;r===q?s!==e&&(!s.updatedAt||s.updatedAt<qe)&&Ke(s):r===Fe&&Ue(s,e)}}}function En(t){for(let e=0;e<t.observers.length;e+=1){const n=t.observers[e];n.state||(n.state=Fe,n.pure?M.push(n):W.push(n),n.observers&&En(n))}}function Ye(t){let e;if(t.sources)for(;t.sources.length;){const n=t.sources.pop(),s=t.sourceSlots.pop(),r=n.observers;if(r&&r.length){const i=r.pop(),o=n.observerSlots.pop();s<r.length&&(i.sourceSlots[o]=s,r[s]=i,n.observerSlots[s]=o)}}if(t.owned){for(e=t.owned.length-1;e>=0;e--)Ye(t.owned[e]);t.owned=null}if(t.cleanups){for(e=t.cleanups.length-1;e>=0;e--)t.cleanups[e]();t.cleanups=null}t.state=0}function mt(t){return t instanceof Error?t:new Error(typeof t=="string"?t:"Unknown error",{cause:t})}function Tt(t,e=C){throw mt(t)}function pt(t){if(typeof t=="function"&&!t.length)return pt(t());if(Array.isArray(t)){const e=[];for(let n=0;n<t.length;n++){const s=pt(t[n]);Array.isArray(s)?e.push.apply(e,s):e.push(s)}return e}return t}function ls(t,e){return function(s){let r;return H(()=>r=B(()=>(C.context={...C.context,[t]:s.value},Xe(()=>s.children))),void 0),r}}const as=Symbol("fallback");function Wt(t){for(let e=0;e<t.length;e++)t[e]()}function us(t,e,n={}){let s=[],r=[],i=[],o=0,c=e.length>1?[]:null;return Lt(()=>Wt(i)),()=>{let l=t()||[],u,a;return l[Zn],B(()=>{let d=l.length,p,m,g,k,y,P,A,O,S;if(d===0)o!==0&&(Wt(i),i=[],s=[],r=[],o=0,c&&(c=[])),n.fallback&&(s=[as],r[0]=Pe(Q=>(i[0]=Q,n.fallback())),o=1);else if(o===0){for(r=new Array(d),a=0;a<d;a++)s[a]=l[a],r[a]=Pe(h);o=d}else{for(g=new Array(d),k=new Array(d),c&&(y=new Array(d)),P=0,A=Math.min(o,d);P<A&&s[P]===l[P];P++);for(A=o-1,O=d-1;A>=P&&O>=P&&s[A]===l[O];A--,O--)g[O]=r[A],k[O]=i[A],c&&(y[O]=c[A]);for(p=new Map,m=new Array(O+1),a=O;a>=P;a--)S=l[a],u=p.get(S),m[a]=u===void 0?-1:u,p.set(S,a);for(u=P;u<=A;u++)S=s[u],a=p.get(S),a!==void 0&&a!==-1?(g[a]=r[u],k[a]=i[u],c&&(y[a]=c[u]),a=m[a],p.set(S,a)):i[u]();for(a=P;a<d;a++)a in g?(r[a]=g[a],i[a]=k[a],c&&(c[a]=y[a],c[a](a))):r[a]=Pe(h);r=r.slice(0,o=d),s=l.slice(0)}return r});function h(d){if(i[a]=d,c){const[p,m]=I(a);return c[a]=m,e(l[a],p)}return e(l[a])}}}let hs=!1;function T(t,e){if(hs&&E.context){const n=E.context;re(Jn());const s=B(()=>t(e||{}));return re(n),s}return B(()=>t(e||{}))}function Be(){return!0}const gt={get(t,e,n){return e===Oe?n:t.get(e)},has(t,e){return e===Oe?!0:t.has(e)},set:Be,deleteProperty:Be,getOwnPropertyDescriptor(t,e){return{configurable:!0,enumerable:!0,get(){return t.get(e)},set:Be,deleteProperty:Be}},ownKeys(t){return t.keys()}};function lt(t){return(t=typeof t=="function"?t():t)?t:{}}function fs(){for(let t=0,e=this.length;t<e;++t){const n=this[t]();if(n!==void 0)return n}}function wt(...t){let e=!1;for(let o=0;o<t.length;o++){const c=t[o];e=e||!!c&&Oe in c,t[o]=typeof c=="function"?(e=!0,$(c)):c}if(e)return new Proxy({get(o){for(let c=t.length-1;c>=0;c--){const l=lt(t[c])[o];if(l!==void 0)return l}},has(o){for(let c=t.length-1;c>=0;c--)if(o in lt(t[c]))return!0;return!1},keys(){const o=[];for(let c=0;c<t.length;c++)o.push(...Object.keys(lt(t[c])));return[...new Set(o)]}},gt);const n={},s=Object.create(null);for(let o=t.length-1;o>=0;o--){const c=t[o];if(!c)continue;const l=Object.getOwnPropertyNames(c);for(let u=l.length-1;u>=0;u--){const a=l[u];if(a==="__proto__"||a==="constructor")continue;const h=Object.getOwnPropertyDescriptor(c,a);if(!s[a])s[a]=h.get?{enumerable:!0,configurable:!0,get:fs.bind(n[a]=[h.get.bind(c)])}:h.value!==void 0?h:void 0;else{const d=n[a];d&&(h.get?d.push(h.get.bind(c)):h.value!==void 0&&d.push(()=>h.value))}}}const r={},i=Object.keys(s);for(let o=i.length-1;o>=0;o--){const c=i[o],l=s[c];l&&l.get?Object.defineProperty(r,c,l):r[c]=l?l.value:void 0}return r}function ds(t,...e){if(Oe in t){const r=new Set(e.length>1?e.flat():e[0]),i=e.map(o=>new Proxy({get(c){return o.includes(c)?t[c]:void 0},has(c){return o.includes(c)&&c in t},keys(){return o.filter(c=>c in t)}},gt));return i.push(new Proxy({get(o){return r.has(o)?void 0:t[o]},has(o){return r.has(o)?!1:o in t},keys(){return Object.keys(t).filter(o=>!r.has(o))}},gt)),i}const n={},s=e.map(()=>({}));for(const r of Object.getOwnPropertyNames(t)){const i=Object.getOwnPropertyDescriptor(t,r),o=!i.get&&!i.set&&i.enumerable&&i.writable&&i.configurable;let c=!1,l=0;for(const u of e)u.includes(r)&&(c=!0,o?s[l][r]=i.value:Object.defineProperty(s[l],r,i)),++l;c||(o?n[r]=i.value:Object.defineProperty(n,r,i))}return[...s,n]}function It(t){let e,n;const s=r=>{const i=E.context;if(i){const[c,l]=I();E.count||(E.count=0),E.count++,(n||(n=t())).then(u=>{re(i),E.count--,l(()=>u.default),re()}),e=c}else if(!e){const[c]=ns(()=>(n||(n=t())).then(l=>l.default));e=c}let o;return $(()=>(o=e())&&B(()=>{if(!i)return o(r);const c=E.context;re(i);const l=o(r);return re(c),l}))};return s.preload=()=>n||((n=t()).then(r=>e=()=>r.default),n),s}let ms=0;function ps(){const t=E.context;return t?`${t.id}${t.count++}`:`cl-${ms++}`}const An=t=>`Stale read from <${t}>.`;function Ti(t){const e="fallback"in t&&{fallback:()=>t.fallback};return $(us(()=>t.each,t.children,e||void 0))}function Bt(t){const e=t.keyed,n=$(()=>t.when,void 0,{equals:(s,r)=>e?s===r:!s==!r});return $(()=>{const s=n();if(s){const r=t.children;return typeof r=="function"&&r.length>0?B(()=>r(e?s:()=>{if(!B(n))throw An("Show");return t.when})):r}return t.fallback},void 0,void 0)}function Ii(t){let e=!1;const n=(i,o)=>(e?i[1]===o[1]:!i[1]==!o[1])&&i[2]===o[2],s=Xe(()=>t.children),r=$(()=>{let i=s();Array.isArray(i)||(i=[i]);for(let o=0;o<i.length;o++){const c=i[o].when;if(c)return e=!!i[o].keyed,[o,c,i[o]]}return[-1]},void 0,{equals:n});return $(()=>{const[i,o,c]=r();if(i<0)return t.fallback;const l=c.children;return typeof l=="function"&&l.length>0?B(()=>l(e?o:()=>{if(B(r)[0]!==i)throw An("Match");return c.when})):l},void 0,void 0)}function Bi(t){return t}const gs=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],ws=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline",...gs]),bs=new Set(["innerHTML","textContent","innerText","children"]),ks=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),ys=Object.assign(Object.create(null),{class:"className",formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1}});function _s(t,e){const n=ys[t];return typeof n=="object"?n[e]?n.$:void 0:n}const vs=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),Es={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"};function As(t,e,n){let s=n.length,r=e.length,i=s,o=0,c=0,l=e[r-1].nextSibling,u=null;for(;o<r||c<i;){if(e[o]===n[c]){o++,c++;continue}for(;e[r-1]===n[i-1];)r--,i--;if(r===o){const a=i<s?c?n[c-1].nextSibling:n[i-c]:l;for(;c<i;)t.insertBefore(n[c++],a)}else if(i===c)for(;o<r;)(!u||!u.has(e[o]))&&e[o].remove(),o++;else if(e[o]===n[i-1]&&n[c]===e[r-1]){const a=e[--r].nextSibling;t.insertBefore(n[c++],e[o++].nextSibling),t.insertBefore(n[--i],a),e[r]=n[i]}else{if(!u){u=new Map;let h=c;for(;h<i;)u.set(n[h],h++)}const a=u.get(e[o]);if(a!=null)if(c<a&&a<i){let h=o,d=1,p;for(;++h<r&&h<i&&!((p=u.get(e[h]))==null||p!==a+d);)d++;if(d>a-c){const m=e[o];for(;c<a;)t.insertBefore(n[c++],m)}else t.replaceChild(n[c++],e[o++])}else o++;else e[o++].remove()}}}const Ht="_$DX_DELEGATE";function Cs(t,e,n,s={}){let r;return Pe(i=>{r=i,e===document?t():De(e,t(),e.firstChild?null:void 0,n)},s.owner),()=>{r(),e.textContent=""}}function Cn(t,e,n){let s;const r=()=>{const o=document.createElement("template");return o.innerHTML=t,o.content.firstChild},i=()=>(s||(s=r())).cloneNode(!0);return i.cloneNode=i,i}function Pn(t,e=window.document){const n=e[Ht]||(e[Ht]=new Set);for(let s=0,r=t.length;s<r;s++){const i=t[s];n.has(i)||(n.add(i),e.addEventListener(i,Ls))}}function bt(t,e,n){E.context&&t.isConnected||(n==null?t.removeAttribute(e):t.setAttribute(e,n))}function Ps(t,e,n,s){E.context&&t.isConnected||(s==null?t.removeAttributeNS(e,n):t.setAttributeNS(e,n,s))}function xn(t,e){E.context&&t.isConnected||(e==null?t.removeAttribute("class"):t.className=e)}function xs(t,e,n,s){if(s)Array.isArray(n)?(t[`$$${e}`]=n[0],t[`$$${e}Data`]=n[1]):t[`$$${e}`]=n;else if(Array.isArray(n)){const r=n[0];t.addEventListener(e,n[0]=i=>r.call(t,n[1],i))}else t.addEventListener(e,n)}function Os(t,e,n={}){const s=Object.keys(e||{}),r=Object.keys(n);let i,o;for(i=0,o=r.length;i<o;i++){const c=r[i];!c||c==="undefined"||e[c]||(qt(t,c,!1),delete n[c])}for(i=0,o=s.length;i<o;i++){const c=s[i],l=!!e[c];!c||c==="undefined"||n[c]===l||!l||(qt(t,c,!0),n[c]=l)}return n}function Rs(t,e,n){if(!e)return n?bt(t,"style"):e;const s=t.style;if(typeof e=="string")return s.cssText=e;typeof n=="string"&&(s.cssText=n=void 0),n||(n={}),e||(e={});let r,i;for(i in n)e[i]==null&&s.removeProperty(i),delete n[i];for(i in e)r=e[i],r!==n[i]&&(s.setProperty(i,r),n[i]=r);return n}function kt(t,e={},n,s){const r={};return s||H(()=>r.children=Re(t,e.children,r.children)),H(()=>typeof e.ref=="function"?Ss(e.ref,t):e.ref=t),H(()=>Ns(t,e,n,!0,r,!0)),r}function Ss(t,e,n){return B(()=>t(e,n))}function De(t,e,n,s){if(n!==void 0&&!s&&(s=[]),typeof e!="function")return Re(t,e,s,n);H(r=>Re(t,e(),r,n),s)}function Ns(t,e,n,s,r={},i=!1){e||(e={});for(const o in r)if(!(o in e)){if(o==="children")continue;r[o]=Qt(t,o,null,r[o],n,i)}for(const o in e){if(o==="children")continue;const c=e[o];r[o]=Qt(t,o,c,r[o],n,i)}}function $s(t){return t.toLowerCase().replace(/-([a-z])/g,(e,n)=>n.toUpperCase())}function qt(t,e,n){const s=e.trim().split(/\s+/);for(let r=0,i=s.length;r<i;r++)t.classList.toggle(s[r],n)}function Qt(t,e,n,s,r,i){let o,c,l,u,a;if(e==="style")return Rs(t,n,s);if(e==="classList")return Os(t,n,s);if(n===s)return s;if(e==="ref")i||n(t);else if(e.slice(0,3)==="on:"){const h=e.slice(3);s&&t.removeEventListener(h,s),n&&t.addEventListener(h,n)}else if(e.slice(0,10)==="oncapture:"){const h=e.slice(10);s&&t.removeEventListener(h,s,!0),n&&t.addEventListener(h,n,!0)}else if(e.slice(0,2)==="on"){const h=e.slice(2).toLowerCase(),d=vs.has(h);if(!d&&s){const p=Array.isArray(s)?s[0]:s;t.removeEventListener(h,p)}(d||n)&&(xs(t,h,n,d),d&&Pn([h]))}else if(e.slice(0,5)==="attr:")bt(t,e.slice(5),n);else if((a=e.slice(0,5)==="prop:")||(l=bs.has(e))||!r&&((u=_s(e,t.tagName))||(c=ws.has(e)))||(o=t.nodeName.includes("-"))){if(a)e=e.slice(5),c=!0;else if(E.context&&t.isConnected)return n;e==="class"||e==="className"?xn(t,n):o&&!c&&!l?t[$s(e)]=n:t[u||e]=n}else{const h=r&&e.indexOf(":")>-1&&Es[e.split(":")[0]];h?Ps(t,h,e,n):bt(t,ks[e]||e,n)}return n}function Ls(t){const e=`$$${t.type}`;let n=t.composedPath&&t.composedPath()[0]||t.target;for(t.target!==n&&Object.defineProperty(t,"target",{configurable:!0,value:n}),Object.defineProperty(t,"currentTarget",{configurable:!0,get(){return n||document}}),E.registry&&!E.done&&(E.done=_$HY.done=!0);n;){const s=n[e];if(s&&!n.disabled){const r=n[`${e}Data`];if(r!==void 0?s.call(n,r,t):s.call(n,t),t.cancelBubble)return}n=n._$host||n.parentNode||n.host}}function Re(t,e,n,s,r){const i=!!E.context&&t.isConnected;if(i){!n&&(n=[...t.childNodes]);let l=[];for(let u=0;u<n.length;u++){const a=n[u];a.nodeType===8&&a.data.slice(0,2)==="!$"?a.remove():l.push(a)}n=l}for(;typeof n=="function";)n=n();if(e===n)return n;const o=typeof e,c=s!==void 0;if(t=c&&n[0]&&n[0].parentNode||t,o==="string"||o==="number"){if(i||o==="number"&&(e=e.toString(),e===n))return n;if(c){let l=n[0];l&&l.nodeType===3?l.data!==e&&(l.data=e):l=document.createTextNode(e),n=he(t,n,s,l)}else n!==""&&typeof n=="string"?n=t.firstChild.data=e:n=t.textContent=e}else if(e==null||o==="boolean"){if(i)return n;n=he(t,n,s)}else{if(o==="function")return H(()=>{let l=e();for(;typeof l=="function";)l=l();n=Re(t,l,n,s)}),()=>n;if(Array.isArray(e)){const l=[],u=n&&Array.isArray(n);if(yt(l,e,n,r))return H(()=>n=Re(t,l,n,s,!0)),()=>n;if(i){if(!l.length)return n;if(s===void 0)return[...t.childNodes];let a=l[0],h=[a];for(;(a=a.nextSibling)!==s;)h.push(a);return n=h}if(l.length===0){if(n=he(t,n,s),c)return n}else u?n.length===0?Jt(t,l,s):As(t,n,l):(n&&he(t),Jt(t,l));n=l}else if(e.nodeType){if(i&&e.parentNode)return n=c?[e]:e;if(Array.isArray(n)){if(c)return n=he(t,n,s,e);he(t,n,null,e)}else n==null||n===""||!t.firstChild?t.appendChild(e):t.replaceChild(e,t.firstChild);n=e}}return n}function yt(t,e,n,s){let r=!1;for(let i=0,o=e.length;i<o;i++){let c=e[i],l=n&&n[t.length],u;if(!(c==null||c===!0||c===!1))if((u=typeof c)=="object"&&c.nodeType)t.push(c);else if(Array.isArray(c))r=yt(t,c,l)||r;else if(u==="function")if(s){for(;typeof c=="function";)c=c();r=yt(t,Array.isArray(c)?c:[c],Array.isArray(l)?l:[l])||r}else t.push(c),r=!0;else{const a=String(c);l&&l.nodeType===3&&l.data===a?t.push(l):t.push(document.createTextNode(a))}}return r}function Jt(t,e,n=null){for(let s=0,r=e.length;s<r;s++)t.insertBefore(e[s],n)}function he(t,e,n,s){if(n===void 0)return t.textContent="";const r=s||document.createTextNode("");if(e.length){let i=!1;for(let o=e.length-1;o>=0;o--){const c=e[o];if(r!==c){const l=c.parentNode===t;!i&&!o?l?t.replaceChild(r,c):t.insertBefore(r,n):l&&c.remove()}else i=!0}}else t.insertBefore(r,n);return[r]}const Ts=!1,Is="modulepreload",Bs=function(t,e){return new URL(t,e).href},Xt={},jt=function(e,n,s){let r=Promise.resolve();if(n&&n.length>0){const i=document.getElementsByTagName("link"),o=document.querySelector("meta[property=csp-nonce]"),c=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.all(n.map(l=>{if(l=Bs(l,s),l in Xt)return;Xt[l]=!0;const u=l.endsWith(".css"),a=u?'[rel="stylesheet"]':"";if(!!s)for(let p=i.length-1;p>=0;p--){const m=i[p];if(m.href===l&&(!u||m.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${a}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":Is,u||(d.as="script",d.crossOrigin=""),d.href=l,c&&d.setAttribute("nonce",c),document.head.appendChild(d),u)return new Promise((p,m)=>{d.addEventListener("load",p),d.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}return r.then(()=>e()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},js=Qe(),Ds=["title","meta"],Zt=[],Yt=["name","http-equiv","content","charset","media"].concat(["property"]),en=(t,e)=>{const n=Object.fromEntries(Object.entries(t.props).filter(([s])=>e.includes(s)).sort());return(Object.hasOwn(n,"name")||Object.hasOwn(n,"property"))&&(n.name=n.name||n.property,delete n.property),t.tag+JSON.stringify(n)};function Ms(){if(!E.context){const n=document.head.querySelectorAll("[data-sm]");Array.prototype.forEach.call(n,s=>s.parentNode.removeChild(s))}const t=new Map;function e(n){if(n.ref)return n.ref;let s=document.querySelector(`[data-sm="${n.id}"]`);return s?(s.tagName.toLowerCase()!==n.tag&&(s.parentNode&&s.parentNode.removeChild(s),s=document.createElement(n.tag)),s.removeAttribute("data-sm")):s=document.createElement(n.tag),s}return{addTag(n){if(Ds.indexOf(n.tag)!==-1){const i=n.tag==="title"?Zt:Yt,o=en(n,i);t.has(o)||t.set(o,[]);let c=t.get(o),l=c.length;c=[...c,n],t.set(o,c);let u=e(n);n.ref=u,kt(u,n.props);let a=null;for(var s=l-1;s>=0;s--)if(c[s]!=null){a=c[s];break}return u.parentNode!=document.head&&document.head.appendChild(u),a&&a.ref&&a.ref.parentNode&&document.head.removeChild(a.ref),l}let r=e(n);return n.ref=r,kt(r,n.props),r.parentNode!=document.head&&document.head.appendChild(r),-1},removeTag(n,s){const r=n.tag==="title"?Zt:Yt,i=en(n,r);if(n.ref){const o=t.get(i);if(o){if(n.ref.parentNode){n.ref.parentNode.removeChild(n.ref);for(let c=s-1;c>=0;c--)o[c]!=null&&document.head.appendChild(o[c].ref)}o[s]=null,t.set(i,o)}else n.ref.parentNode&&n.ref.parentNode.removeChild(n.ref)}}}}const zs=t=>{const e=Ms();return T(js.Provider,{value:e,get children(){return t.children}})};function On(){let t=new Set;function e(r){return t.add(r),()=>t.delete(r)}let n=!1;function s(r,i){if(n)return!(n=!1);const o={to:r,options:i,defaultPrevented:!1,preventDefault:()=>o.defaultPrevented=!0};for(const c of t)c.listener({...o,from:c.location,retry:l=>{l&&(n=!0),c.navigate(r,{...i,resolve:!1})}});return!o.defaultPrevented}return{subscribe:e,confirm:s}}let _t;function Dt(){(!window.history.state||window.history.state._depth==null)&&window.history.replaceState({...window.history.state,_depth:window.history.length-1},""),_t=window.history.state._depth}Dt();function Fs(t){return{...t,_depth:window.history.state&&window.history.state._depth}}function Ks(t,e){let n=!1;return()=>{const s=_t;Dt();const r=s==null?null:_t-s;if(n){n=!1;return}r&&e(r)?(n=!0,window.history.go(-r)):t()}}const Us=/^(?:[a-z0-9]+:)?\/\//i,Vs=/^\/+|(\/)\/+$/g,Rn="http://sr";function oe(t,e=!1){const n=t.replace(Vs,"$1");return n?e||/^[?#]/.test(n)?n:"/"+n:""}function Me(t,e,n){if(Us.test(e))return;const s=oe(t),r=n&&oe(n);let i="";return!r||e.startsWith("/")?i=s:r.toLowerCase().indexOf(s.toLowerCase())!==0?i=s+r:i=r,(i||"/")+oe(e,!i)}function Gs(t,e){if(t==null)throw new Error(e);return t}function Ws(t,e){return oe(t).replace(/\/*(\*.*)?$/g,"")+oe(e)}function Sn(t){const e={};return t.searchParams.forEach((n,s)=>{e[s]=n}),e}function Hs(t,e,n){const[s,r]=t.split("/*",2),i=s.split("/").filter(Boolean),o=i.length;return c=>{const l=c.split("/").filter(Boolean),u=l.length-o;if(u<0||u>0&&r===void 0&&!e)return null;const a={path:o?"":"/",params:{}},h=d=>n===void 0?void 0:n[d];for(let d=0;d<o;d++){const p=i[d],m=l[d],g=p[0]===":",k=g?p.slice(1):p;if(g&&at(m,h(k)))a.params[k]=m;else if(g||!at(m,p))return null;a.path+=`/${m}`}if(r){const d=u?l.slice(-u).join("/"):"";if(at(d,h(r)))a.params[r]=d;else return null}return a}}function at(t,e){const n=s=>s.localeCompare(t,void 0,{sensitivity:"base"})===0;return e===void 0?!0:typeof e=="string"?n(e):typeof e=="function"?e(t):Array.isArray(e)?e.some(n):e instanceof RegExp?e.test(t):!1}function qs(t){const[e,n]=t.pattern.split("/*",2),s=e.split("/").filter(Boolean);return s.reduce((r,i)=>r+(i.startsWith(":")?2:3),s.length-(n===void 0?0:1))}function Nn(t){const e=new Map,n=bn();return new Proxy({},{get(s,r){return e.has(r)||kn(n,()=>e.set(r,$(()=>t()[r]))),e.get(r)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(t())}})}function $n(t){let e=/(\/?\:[^\/]+)\?/.exec(t);if(!e)return[t];let n=t.slice(0,e.index),s=t.slice(e.index+e[0].length);const r=[n,n+=e[1]];for(;e=/^(\/\:[^\/]+)\?/.exec(s);)r.push(n+=e[1]),s=s.slice(e[0].length);return $n(s).reduce((i,o)=>[...i,...r.map(c=>c+o)],[])}const Qs=100,Ln=Qe(),et=Qe(),tt=()=>Gs(Je(Ln),"<A> and 'use' router primitives can be only used inside a Route."),Js=()=>Je(et)||tt().base,Xs=t=>{const e=Js();return $(()=>e.resolvePath(t()))},Zs=t=>{const e=tt();return $(()=>{const n=t();return n!==void 0?e.renderPath(n):n})},ji=()=>tt().navigatorFactory(),Tn=()=>tt().location;function Ys(t,e=""){const{component:n,load:s,children:r,info:i}=t,o=!r||Array.isArray(r)&&!r.length,c={key:t,component:n,load:s,info:i};return In(t.path).reduce((l,u)=>{for(const a of $n(u)){const h=Ws(e,a);let d=o?h:h.split("/*",1)[0];d=d.split("/").map(p=>p.startsWith(":")||p.startsWith("*")?p:encodeURIComponent(p)).join("/"),l.push({...c,originalPath:a,pattern:d,matcher:Hs(d,!o,t.matchFilters)})}return l},[])}function er(t,e=0){return{routes:t,score:qs(t[t.length-1])*1e4-e,matcher(n){const s=[];for(let r=t.length-1;r>=0;r--){const i=t[r],o=i.matcher(n);if(!o)return null;s.unshift({...o,route:i})}return s}}}function In(t){return Array.isArray(t)?t:[t]}function Bn(t,e="",n=[],s=[]){const r=In(t);for(let i=0,o=r.length;i<o;i++){const c=r[i];if(c&&typeof c=="object"){c.hasOwnProperty("path")||(c.path="");const l=Ys(c,e);for(const u of l){n.push(u);const a=Array.isArray(c.children)&&c.children.length===0;if(c.children&&!a)Bn(c.children,u.pattern,n,s);else{const h=er([...n],s.length);s.push(h)}n.pop()}}}return n.length?s:s.sort((i,o)=>o.score-i.score)}function jn(t,e){for(let n=0,s=t.length;n<s;n++){const r=t[n].matcher(e);if(r)return r}return[]}function tr(t,e){const n=new URL(Rn),s=$(l=>{const u=t();try{return new URL(u,n)}catch{return console.error(`Invalid path ${u}`),l}},n,{equals:(l,u)=>l.href===u.href}),r=$(()=>s().pathname),i=$(()=>s().search,!0),o=$(()=>s().hash),c=()=>"";return{get pathname(){return r()},get search(){return i()},get hash(){return o()},get state(){return e()},get key(){return c()},query:Nn(wn(i,()=>Sn(s())))}}let Y;function nr(t,e,n,s={}){const{signal:[r,i],utils:o={}}=t,c=o.parsePath||(w=>w),l=o.renderPath||(w=>w),u=o.beforeLeave||On(),a=Me("",s.base||"");if(a===void 0)throw new Error(`${a} is not a valid base path`);a&&!r().value&&i({value:a,replace:!0,scroll:!1});const[h,d]=I(!1),p=async w=>{d(!0);try{await ss(w)}finally{d(!1)}},[m,g]=I(r().value),[k,y]=I(r().state),P=tr(m,k),A=[],O=I([]),S={pattern:a,params:{},path:()=>a,outlet:()=>null,resolvePath(w){return Me(a,w)}};return H(()=>{const{value:w,state:v}=r();B(()=>{w!==m()&&p(()=>{Y="native",g(w),y(v),O[1]([])}).then(()=>{Y=void 0})})}),{base:S,location:P,isRouting:h,renderPath:l,parsePath:c,navigatorFactory:J,beforeLeave:u,preloadRoute:R,singleFlight:s.singleFlight===void 0?!0:s.singleFlight,submissions:O};function Q(w,v,z){B(()=>{if(typeof v=="number"){v&&(o.go?o.go(v):console.warn("Router integration does not support relative routing"));return}const{replace:rt,resolve:it,scroll:ue,state:Ce}={replace:!1,resolve:!0,scroll:!0,...z},X=it?w.resolvePath(v):Me("",v);if(X===void 0)throw new Error(`Path '${v}' is not a routable path`);if(A.length>=Qs)throw new Error("Too many redirects");const Ut=m();if((X!==Ut||Ce!==k())&&!Ts){if(u.confirm(X,z)){const Hn=A.push({value:Ut,replace:rt,scroll:ue,state:k()});p(()=>{Y="navigate",g(X),y(Ce),O[1]([])}).then(()=>{A.length===Hn&&(Y=void 0,G({value:X,state:Ce}))})}}})}function J(w){return w=w||Je(et)||S,(v,z)=>Q(w,v,z)}function G(w){const v=A[0];v&&((w.value!==v.value||w.state!==v.state)&&i({...w,replace:v.replace,scroll:v.scroll}),A.length=0)}function R(w,v){const z=jn(n(),w.pathname),rt=Y;Y="preload";for(let it in z){const{route:ue,params:Ce}=z[it];ue.component&&ue.component.preload&&ue.component.preload();const{load:X}=ue;v&&X&&kn(e(),()=>X({params:Ce,location:{pathname:w.pathname,search:w.search,hash:w.hash,query:Sn(w),state:null,key:""},intent:"preload"}))}Y=rt}}function sr(t,e,n,s,r){const{base:i,location:o}=t,{pattern:c,component:l,load:u}=s().route,a=$(()=>s().path);l&&l.preload&&l.preload();const h=u?u({params:r,location:o,intent:Y||"initial"}):void 0;return{parent:e,pattern:c,path:a,params:r,outlet:()=>l?T(l,{params:r,location:o,data:h,get children(){return n()}}):n(),resolvePath(p){return Me(i.path(),p,a())}}}const rr=t=>e=>{const{base:n}=e,s=Xe(()=>e.children),r=$(()=>Bn(e.root?{component:e.root,load:e.rootLoad,children:s()}:s(),e.base||""));let i;const o=nr(t,()=>i,r,{base:n,singleFlight:e.singleFlight});return t.create&&t.create(o),T(Ln.Provider,{value:o,get children(){return[$(()=>(i=bn())&&null),T(ir,{routerState:o,get branches(){return r()}})]}})};function ir(t){const e=$(()=>jn(t.branches,t.routerState.location.pathname)),n=Nn(()=>{const o=e(),c={};for(let l=0;l<o.length;l++)Object.assign(c,o[l].params);return c}),s=[];let r;const i=$(wn(e,(o,c,l)=>{let u=c&&o.length===c.length;const a=[];for(let h=0,d=o.length;h<d;h++){const p=c&&c[h],m=o[h];l&&p&&m.route.key===p.route.key?a[h]=l[h]:(u=!1,s[h]&&s[h](),Pe(g=>{s[h]=g,a[h]=sr(t.routerState,a[h-1]||t.routerState.base,or(()=>i()[h+1]),()=>e()[h],n)}))}return s.splice(o.length).forEach(h=>h()),l&&u?l:(r=a[0],a)}));return T(Bt,{get when(){return i()&&r},keyed:!0,children:o=>T(et.Provider,{value:o,get children(){return o.outlet()}})})}const or=t=>()=>T(Bt,{get when(){return t()},keyed:!0,children:e=>T(et.Provider,{value:e,get children(){return e.outlet()}})}),ut=t=>{const e=Xe(()=>t.children);return wt(t,{get children(){return e()}})};function cr([t,e],n,s){return[t,s?r=>e(s(r)):e]}function lr(t){if(t==="#")return null;try{return document.querySelector(t)}catch{return null}}function ar(t){let e=!1;const n=r=>typeof r=="string"?{value:r}:r,s=cr(I(n(t.get()),{equals:(r,i)=>r.value===i.value}),void 0,r=>(!e&&t.set(r),r));return t.init&&Lt(t.init((r=t.get())=>{e=!0,s[1](n(r)),e=!1})),rr({signal:s,create:t.create,utils:t.utils})}function ur(t,e,n){return t.addEventListener(e,n),()=>t.removeEventListener(e,n)}function hr(t,e){const n=lr(`#${t}`);n?n.scrollIntoView():e&&window.scrollTo(0,0)}const fr=new Map;function dr(t=!0,e=!1,n="/_server"){return s=>{const r=s.base.path(),i=s.navigatorFactory(s.base);let o={};function c(m){return m.namespaceURI==="http://www.w3.org/2000/svg"}function l(m){if(m.defaultPrevented||m.button!==0||m.metaKey||m.altKey||m.ctrlKey||m.shiftKey)return;const g=m.composedPath().find(S=>S instanceof Node&&S.nodeName.toUpperCase()==="A");if(!g||e&&!g.hasAttribute("link"))return;const k=c(g),y=k?g.href.baseVal:g.href;if((k?g.target.baseVal:g.target)||!y&&!g.hasAttribute("state"))return;const A=(g.getAttribute("rel")||"").split(/\s+/);if(g.hasAttribute("download")||A&&A.includes("external"))return;const O=k?new URL(y,document.baseURI):new URL(y);if(!(O.origin!==window.location.origin||r&&O.pathname&&!O.pathname.toLowerCase().startsWith(r.toLowerCase())))return[g,O]}function u(m){const g=l(m);if(!g)return;const[k,y]=g,P=s.parsePath(y.pathname+y.search+y.hash),A=k.getAttribute("state");m.preventDefault(),i(P,{resolve:!1,replace:k.hasAttribute("replace"),scroll:!k.hasAttribute("noscroll"),state:A&&JSON.parse(A)})}function a(m){const g=l(m);if(!g)return;const[k,y]=g;o[y.pathname]||s.preloadRoute(y,k.getAttribute("preload")!=="false")}function h(m){const g=l(m);if(!g)return;const[k,y]=g;o[y.pathname]||(o[y.pathname]=setTimeout(()=>{s.preloadRoute(y,k.getAttribute("preload")!=="false"),delete o[y.pathname]},200))}function d(m){const g=l(m);if(!g)return;const[,k]=g;o[k.pathname]&&(clearTimeout(o[k.pathname]),delete o[k.pathname])}function p(m){let g=m.submitter&&m.submitter.hasAttribute("formaction")?m.submitter.getAttribute("formaction"):m.target.getAttribute("action");if(!g)return;if(!g.startsWith("https://action/")){const y=new URL(g,Rn);if(g=s.parsePath(y.pathname+y.search),!g.startsWith(n))return}if(m.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const k=fr.get(g);if(k){m.preventDefault();const y=new FormData(m.target);m.submitter&&m.submitter.name&&y.append(m.submitter.name,m.submitter.value),k.call(s,y)}}Pn(["click","submit"]),document.addEventListener("click",u),t&&(document.addEventListener("mouseover",h),document.addEventListener("mouseout",d),document.addEventListener("focusin",a),document.addEventListener("touchstart",a)),document.addEventListener("submit",p),Lt(()=>{document.removeEventListener("click",u),t&&(document.removeEventListener("mouseover",h),document.removeEventListener("mouseout",d),document.removeEventListener("focusin",a),document.removeEventListener("touchstart",a)),document.removeEventListener("submit",p)})}}function mr(t){const e=t.replace(/^.*?#/,"");if(!e.startsWith("/")){const[,n="/"]=window.location.hash.split("#",2);return`${n}#${e}`}return e}function pr(t){const e=()=>window.location.hash.slice(1),n=On();return ar({get:e,set({value:s,replace:r,scroll:i,state:o}){r?window.history.replaceState(Fs(o),"","#"+s):window.location.hash=s;const c=s.indexOf("#"),l=c>=0?s.slice(c+1):"";hr(l,i),Dt()},init:s=>ur(window,"hashchange",Ks(s,r=>!n.confirm(r&&r<0?r:e()))),create:dr(t.preload,t.explicitLinks,t.actionBase),utils:{go:s=>window.history.go(s),renderPath:s=>`#${s}`,parsePath:mr,beforeLeave:n}})(t)}var gr=Cn("<a>");function tn(t){t=wt({inactiveClass:"inactive",activeClass:"active"},t);const[,e]=ds(t,["href","state","class","activeClass","inactiveClass","end"]),n=Xs(()=>t.href),s=Zs(n),r=Tn(),i=$(()=>{const o=n();if(o===void 0)return[!1,!1];const c=oe(o.split(/[?#]/,1)[0]).toLowerCase(),l=oe(r.pathname).toLowerCase();return[t.end?c===l:l.startsWith(c),c===l]});return(()=>{var o=gr();return kt(o,wt(e,{get href(){return s()||t.href},get state(){return JSON.stringify(t.state)},get classList(){return{...t.class&&{[t.class]:!0},[t.inactiveClass]:!i()[0],[t.activeClass]:i()[0],...e.classList}},link:"",get"aria-current"(){return i()[1]?"page":void 0}}),!1,!1),o})()}const wr=Symbol("store-raw"),br=Symbol("store-node"),fe=Symbol("store-has"),kr=Symbol("store-self");function Se(t){let e;return t!=null&&typeof t=="object"&&(t[Oe]||!(e=Object.getPrototypeOf(t))||e===Object.prototype||Array.isArray(t))}function vt(t,e=new Set){let n,s,r,i;if(n=t!=null&&t[wr])return n;if(!Se(t)||e.has(t))return t;if(Array.isArray(t)){Object.isFrozen(t)?t=t.slice(0):e.add(t);for(let o=0,c=t.length;o<c;o++)r=t[o],(s=vt(r,e))!==r&&(t[o]=s)}else{Object.isFrozen(t)?t=Object.assign({},t):e.add(t);const o=Object.keys(t),c=Object.getOwnPropertyDescriptors(t);for(let l=0,u=o.length;l<u;l++)i=o[l],!c[i].get&&(r=t[i],(s=vt(r,e))!==r&&(t[i]=s))}return t}function yr(t,e){let n=t[e];return n||Object.defineProperty(t,e,{value:n=Object.create(null)}),n}function nn(t,e,n){if(t[e])return t[e];const[s,r]=I(n,{equals:!1,internal:!0});return s.$=r,t[e]=s}function Z(t,e,n,s=!1){if(!s&&t[e]===n)return;const r=t[e],i=t.length;n===void 0?(delete t[e],t[fe]&&t[fe][e]&&r!==void 0&&t[fe][e].$()):(t[e]=n,t[fe]&&t[fe][e]&&r===void 0&&t[fe][e].$());let o=yr(t,br),c;if((c=nn(o,e,r))&&c.$(()=>n),Array.isArray(t)&&t.length!==i){for(let l=t.length;l<i;l++)(c=o[l])&&c.$();(c=nn(o,"length",i))&&c.$(t.length)}(c=o[kr])&&c.$()}const Et=Symbol("store-root");function pe(t,e,n,s,r){const i=e[n];if(t===i)return;const o=Array.isArray(t);if(n!==Et&&(!Se(t)||!Se(i)||o!==Array.isArray(i)||r&&t[r]!==i[r])){Z(e,n,t);return}if(o){if(t.length&&i.length&&(!s||r&&t[0]&&t[0][r]!=null)){let u,a,h,d,p,m,g,k;for(h=0,d=Math.min(i.length,t.length);h<d&&(i[h]===t[h]||r&&i[h]&&t[h]&&i[h][r]===t[h][r]);h++)pe(t[h],i,h,s,r);const y=new Array(t.length),P=new Map;for(d=i.length-1,p=t.length-1;d>=h&&p>=h&&(i[d]===t[p]||r&&i[h]&&t[h]&&i[d][r]===t[p][r]);d--,p--)y[p]=i[d];if(h>p||h>d){for(a=h;a<=p;a++)Z(i,a,t[a]);for(;a<t.length;a++)Z(i,a,y[a]),pe(t[a],i,a,s,r);i.length>t.length&&Z(i,"length",t.length);return}for(g=new Array(p+1),a=p;a>=h;a--)m=t[a],k=r&&m?m[r]:m,u=P.get(k),g[a]=u===void 0?-1:u,P.set(k,a);for(u=h;u<=d;u++)m=i[u],k=r&&m?m[r]:m,a=P.get(k),a!==void 0&&a!==-1&&(y[a]=i[u],a=g[a],P.set(k,a));for(a=h;a<t.length;a++)a in y?(Z(i,a,y[a]),pe(t[a],i,a,s,r)):Z(i,a,t[a])}else for(let u=0,a=t.length;u<a;u++)pe(t[u],i,u,s,r);i.length>t.length&&Z(i,"length",t.length);return}const c=Object.keys(t);for(let u=0,a=c.length;u<a;u++)pe(t[c[u]],i,c[u],s,r);const l=Object.keys(i);for(let u=0,a=l.length;u<a;u++)t[l[u]]===void 0&&Z(i,l[u],void 0)}function _r(t,e={}){const{merge:n,key:s="id"}=e,r=vt(t);return i=>{if(!Se(i)||!Se(r))return r;const o=pe(r,{[Et]:i},Et,n,s);return o===void 0?i:o}}var vr=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,n)=>(typeof require<"u"?require:e)[n]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')}),Er=t=>(typeof t.clear=="function"||(t.clear=()=>{let e;for(;e=t.key(0);)t.removeItem(e)}),t),Ar=["domain","expires","path","secure","httpOnly","maxAge","sameSite"];function Cr(t){if(!t)return"";let e="";for(const n in t){if(!Ar.includes(n))continue;const s=t[n];e+=s instanceof Date?`; ${n}=${s.toUTCString()}`:typeof s=="boolean"?`; ${n}`:`; ${n}=${s}`}return e}function Pr(t,e){var n;return((n=t.match(`(^|;)\\s*${e}\\s*=\\s*([^;]+)`))==null?void 0:n.pop())??null}var sn;try{sn=vr("solid-start/server").useRequest}catch{sn=()=>(console.warn("It seems you attempt to use cookieStorage on the server without having solid-start installed or use vite."),{request:{headers:{get:()=>""}}})}var de=Er({_read:()=>document.cookie,_write:(t,e,n)=>{document.cookie=`${t}=${e}${Cr(n)}`},getItem:(t,e)=>Pr(de._read(e),t),setItem:(t,e,n)=>{de._write(t,e,n);{const r=Object.assign(new Event("storage"),{key:t,oldValue:null,newValue:e,url:globalThis.document.URL,storageArea:de});window.dispatchEvent(r)}},removeItem:(t,e)=>{de._write(t,"deleted",{...e,expires:new Date(0)})},key:(t,e)=>{let n=null,s=0;return de._read(e).replace(/(?:^|;)\s*(.+?)\s*=\s*[^;]+/g,(r,i)=>(!n&&i&&s++===t&&(n=i),"")),n},getLength:t=>{let e=0;return de._read(t).replace(/(?:^|;)\s*.+?\s*=\s*[^;]+/g,n=>(e+=n?1:0,"")),e},get length(){return this.getLength()}});function Ne(t,e={}){const n=e.storage||globalThis.localStorage;if(!n)return t;const s=e.storageOptions,r=e.name||`storage-${ps()}`,i=e.serialize||JSON.stringify.bind(JSON),o=e.deserialize||JSON.parse.bind(JSON),c=n.getItem(r,s),l=typeof t[0]=="function"?a=>t[1](()=>o(a)):a=>t[1](_r(o(a)));let u=!0;return c instanceof Promise?c.then(a=>u&&a&&l(a)):c&&l(c),[t[0],typeof t[0]=="function"?a=>{const h=t[1](a);return a?n.setItem(r,i(h),s):n.removeItem(r,s),u=!1,h}:(...a)=>{t[1](...a);const h=i(B(()=>t[0]));n.setItem(r,h,s),u=!1}]}const Ve=["a","b","c","d","e","f","g","h"],Dn=["1","2","3","4","5","6","7","8"],le=["white","black"],K=["pawn","knight","bishop","rook","queen","king"],xr=["a","h"],$e=t=>"role"in t,b=t=>t!==void 0,j=t=>t==="white"?"black":"white",ae=t=>t>>3,F=t=>t&7,At=(t,e)=>0<=t&&t<8&&0<=e&&e<8?t+8*e:void 0,ce=t=>{switch(t){case"pawn":return"p";case"knight":return"n";case"bishop":return"b";case"rook":return"r";case"queen":return"q";case"king":return"k"}};function be(t){switch(t.toLowerCase()){case"p":return"pawn";case"n":return"knight";case"b":return"bishop";case"r":return"rook";case"q":return"queen";case"k":return"king";default:return}}function ke(t){if(t.length===2)return At(t.charCodeAt(0)-97,t.charCodeAt(1)-49)}const ye=t=>Ve[F(t)]+Dn[ae(t)],Or=t=>{if(t[1]==="@"&&t.length===4){const e=be(t[0]),n=ke(t.slice(2));if(e&&b(n))return{role:e,to:n}}else if(t.length===4||t.length===5){const e=ke(t.slice(0,2)),n=ke(t.slice(2,4));let s;if(t.length===5&&(s=be(t[4]),!s))return;if(b(e)&&b(n))return{from:e,to:n,promotion:s}}},rn=t=>$e(t)?`${ce(t.role).toUpperCase()}@${ye(t.to)}`:ye(t.from)+ye(t.to)+(t.promotion?ce(t.promotion):""),Mt=(t,e)=>t==="white"?e==="a"?2:6:e==="a"?58:62,zt=(t,e)=>t==="white"?e==="a"?3:5:e==="a"?59:61,on=t=>(t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),Math.imul(t+(t>>>4)&252645135,16843009)>>24),Ct=t=>(t=t>>>8&16711935|(t&16711935)<<8,t>>>16&65535|(t&65535)<<16),cn=t=>(t=t>>>1&1431655765|(t&1431655765)<<1,t=t>>>2&858993459|(t&858993459)<<2,t=t>>>4&252645135|(t&252645135)<<4,Ct(t));class f{constructor(e,n){this.lo=e|0,this.hi=n|0}static fromSquare(e){return e>=32?new f(0,1<<e-32):new f(1<<e,0)}static fromRank(e){return new f(255,0).shl64(8*e)}static fromFile(e){return new f(16843009<<e,16843009<<e)}static empty(){return new f(0,0)}static full(){return new f(4294967295,4294967295)}static corners(){return new f(129,2164260864)}static center(){return new f(402653184,24)}static backranks(){return new f(255,4278190080)}static backrank(e){return e==="white"?new f(255,0):new f(0,4278190080)}static lightSquares(){return new f(1437226410,1437226410)}static darkSquares(){return new f(2857740885,2857740885)}complement(){return new f(~this.lo,~this.hi)}xor(e){return new f(this.lo^e.lo,this.hi^e.hi)}union(e){return new f(this.lo|e.lo,this.hi|e.hi)}intersect(e){return new f(this.lo&e.lo,this.hi&e.hi)}diff(e){return new f(this.lo&~e.lo,this.hi&~e.hi)}intersects(e){return this.intersect(e).nonEmpty()}isDisjoint(e){return this.intersect(e).isEmpty()}supersetOf(e){return e.diff(this).isEmpty()}subsetOf(e){return this.diff(e).isEmpty()}shr64(e){return e>=64?f.empty():e>=32?new f(this.hi>>>e-32,0):e>0?new f(this.lo>>>e^this.hi<<32-e,this.hi>>>e):this}shl64(e){return e>=64?f.empty():e>=32?new f(0,this.lo<<e-32):e>0?new f(this.lo<<e,this.hi<<e^this.lo>>>32-e):this}bswap64(){return new f(Ct(this.hi),Ct(this.lo))}rbit64(){return new f(cn(this.hi),cn(this.lo))}minus64(e){const n=this.lo-e.lo,s=(n&e.lo&1)+(e.lo>>>1)+(n>>>1)>>>31;return new f(n,this.hi-(e.hi+s))}equals(e){return this.lo===e.lo&&this.hi===e.hi}size(){return on(this.lo)+on(this.hi)}isEmpty(){return this.lo===0&&this.hi===0}nonEmpty(){return this.lo!==0||this.hi!==0}has(e){return(e>=32?this.hi&1<<e-32:this.lo&1<<e)!==0}set(e,n){return n?this.with(e):this.without(e)}with(e){return e>=32?new f(this.lo,this.hi|1<<e-32):new f(this.lo|1<<e,this.hi)}without(e){return e>=32?new f(this.lo,this.hi&~(1<<e-32)):new f(this.lo&~(1<<e),this.hi)}toggle(e){return e>=32?new f(this.lo,this.hi^1<<e-32):new f(this.lo^1<<e,this.hi)}last(){if(this.hi!==0)return 63-Math.clz32(this.hi);if(this.lo!==0)return 31-Math.clz32(this.lo)}first(){if(this.lo!==0)return 31-Math.clz32(this.lo&-this.lo);if(this.hi!==0)return 63-Math.clz32(this.hi&-this.hi)}withoutFirst(){return this.lo!==0?new f(this.lo&this.lo-1,this.hi):new f(0,this.hi&this.hi-1)}moreThanOne(){return this.hi!==0&&this.lo!==0||(this.lo&this.lo-1)!==0||(this.hi&this.hi-1)!==0}singleSquare(){return this.moreThanOne()?void 0:this.last()}*[Symbol.iterator](){let e=this.lo,n=this.hi;for(;e!==0;){const s=31-Math.clz32(e&-e);e^=1<<s,yield s}for(;n!==0;){const s=31-Math.clz32(n&-n);n^=1<<s,yield 32+s}}*reversed(){let e=this.lo,n=this.hi;for(;n!==0;){const s=31-Math.clz32(n);n^=1<<s,yield 32+s}for(;e!==0;){const s=31-Math.clz32(e);e^=1<<s,yield s}}}const Ge=(t,e)=>{let n=f.empty();for(const s of e){const r=t+s;0<=r&&r<64&&Math.abs(F(t)-F(r))<=2&&(n=n.with(r))}return n},ne=t=>{const e=[];for(let n=0;n<64;n++)e[n]=t(n);return e},Rr=ne(t=>Ge(t,[-9,-8,-7,-1,1,7,8,9])),Sr=ne(t=>Ge(t,[-17,-15,-10,-6,6,10,15,17])),Nr={white:ne(t=>Ge(t,[7,9])),black:ne(t=>Ge(t,[-7,-9]))},nt=t=>Rr[t],st=t=>Sr[t],Ie=(t,e)=>Nr[t][e],Pt=ne(t=>f.fromFile(F(t)).without(t)),xt=ne(t=>f.fromRank(ae(t)).without(t)),Ot=ne(t=>{const e=new f(134480385,2151686160),n=8*(ae(t)-F(t));return(n>=0?e.shl64(n):e.shr64(-n)).without(t)}),Rt=ne(t=>{const e=new f(270549120,16909320),n=8*(ae(t)+F(t)-7);return(n>=0?e.shl64(n):e.shr64(-n)).without(t)}),St=(t,e,n)=>{let s=n.intersect(e),r=s.bswap64();return s=s.minus64(t),r=r.minus64(t.bswap64()),s.xor(r.bswap64()).intersect(e)},$r=(t,e)=>St(f.fromSquare(t),Pt[t],e),Lr=(t,e)=>{const n=xt[t];let s=e.intersect(n),r=s.rbit64();return s=s.minus64(f.fromSquare(t)),r=r.minus64(f.fromSquare(63-t)),s.xor(r.rbit64()).intersect(n)},ve=(t,e)=>{const n=f.fromSquare(t);return St(n,Ot[t],e).xor(St(n,Rt[t],e))},Ee=(t,e)=>$r(t,e).xor(Lr(t,e)),Ft=(t,e)=>ve(t,e).xor(Ee(t,e)),Tr=(t,e,n)=>{switch(t.role){case"pawn":return Ie(t.color,e);case"knight":return st(e);case"bishop":return ve(e,n);case"rook":return Ee(e,n);case"queen":return Ft(e,n);case"king":return nt(e)}},Mn=(t,e)=>{const n=f.fromSquare(e);return xt[t].intersects(n)?xt[t].with(t):Rt[t].intersects(n)?Rt[t].with(t):Ot[t].intersects(n)?Ot[t].with(t):Pt[t].intersects(n)?Pt[t].with(t):f.empty()},Le=(t,e)=>Mn(t,e).intersect(f.full().shl64(t).xor(f.full().shl64(e))).withoutFirst();class _e{constructor(){}static default(){const e=new _e;return e.reset(),e}reset(){this.occupied=new f(65535,4294901760),this.promoted=f.empty(),this.white=new f(65535,0),this.black=new f(0,4294901760),this.pawn=new f(65280,16711680),this.knight=new f(66,1107296256),this.bishop=new f(36,603979776),this.rook=new f(129,2164260864),this.queen=new f(8,134217728),this.king=new f(16,268435456)}static empty(){const e=new _e;return e.clear(),e}clear(){this.occupied=f.empty(),this.promoted=f.empty();for(const e of le)this[e]=f.empty();for(const e of K)this[e]=f.empty()}clone(){const e=new _e;e.occupied=this.occupied,e.promoted=this.promoted;for(const n of le)e[n]=this[n];for(const n of K)e[n]=this[n];return e}getColor(e){if(this.white.has(e))return"white";if(this.black.has(e))return"black"}getRole(e){for(const n of K)if(this[n].has(e))return n}get(e){const n=this.getColor(e);if(!n)return;const s=this.getRole(e),r=this.promoted.has(e);return{color:n,role:s,promoted:r}}take(e){const n=this.get(e);return n&&(this.occupied=this.occupied.without(e),this[n.color]=this[n.color].without(e),this[n.role]=this[n.role].without(e),n.promoted&&(this.promoted=this.promoted.without(e))),n}set(e,n){const s=this.take(e);return this.occupied=this.occupied.with(e),this[n.color]=this[n.color].with(e),this[n.role]=this[n.role].with(e),n.promoted&&(this.promoted=this.promoted.with(e)),s}has(e){return this.occupied.has(e)}*[Symbol.iterator](){for(const e of this.occupied)yield[e,this.get(e)]}pieces(e,n){return this[e].intersect(this[n])}rooksAndQueens(){return this.rook.union(this.queen)}bishopsAndQueens(){return this.bishop.union(this.queen)}kingOf(e){return this.pieces(e,"king").singleSquare()}}class U{constructor(){}static empty(){const e=new U;for(const n of K)e[n]=0;return e}static fromBoard(e,n){const s=new U;for(const r of K)s[r]=e.pieces(n,r).size();return s}clone(){const e=new U;for(const n of K)e[n]=this[n];return e}equals(e){return K.every(n=>this[n]===e[n])}add(e){const n=new U;for(const s of K)n[s]=this[s]+e[s];return n}subtract(e){const n=new U;for(const s of K)n[s]=this[s]-e[s];return n}nonEmpty(){return K.some(e=>this[e]>0)}isEmpty(){return!this.nonEmpty()}hasPawns(){return this.pawn>0}hasNonPawns(){return this.knight>0||this.bishop>0||this.rook>0||this.queen>0||this.king>0}size(){return this.pawn+this.knight+this.bishop+this.rook+this.queen+this.king}}class se{constructor(e,n){this.white=e,this.black=n}static empty(){return new se(U.empty(),U.empty())}static fromBoard(e){return new se(U.fromBoard(e,"white"),U.fromBoard(e,"black"))}clone(){return new se(this.white.clone(),this.black.clone())}equals(e){return this.white.equals(e.white)&&this.black.equals(e.black)}add(e){return new se(this.white.add(e.white),this.black.add(e.black))}subtract(e){return new se(this.white.subtract(e.white),this.black.subtract(e.black))}count(e){return this.white[e]+this.black[e]}size(){return this.white.size()+this.black.size()}isEmpty(){return this.white.isEmpty()&&this.black.isEmpty()}nonEmpty(){return!this.isEmpty()}hasPawns(){return this.white.hasPawns()||this.black.hasPawns()}hasNonPawns(){return this.white.hasNonPawns()||this.black.hasNonPawns()}}class Te{constructor(e,n){this.white=e,this.black=n}static default(){return new Te(3,3)}clone(){return new Te(this.white,this.black)}equals(e){return this.white===e.white&&this.black===e.black}}class zn{unwrap(e,n){const s=this._chain(r=>_.ok(e?e(r):r),r=>n?_.ok(n(r)):_.err(r));if(s.isErr)throw s.error;return s.value}map(e,n){return this._chain(s=>_.ok(e(s)),s=>_.err(n?n(s):s))}chain(e,n){return this._chain(e,n||(s=>_.err(s)))}}class Ir extends zn{constructor(e){super(),this.value=void 0,this.isOk=!0,this.isErr=!1,this.value=e}_chain(e,n){return e(this.value)}}class Br extends zn{constructor(e){super(),this.error=void 0,this.isOk=!1,this.isErr=!0,this.error=e}_chain(e,n){return n(this.error)}}var _;(function(t){t.ok=function(e){return new Ir(e)},t.err=function(e){return new Br(e||new Error)},t.all=function(e){if(Array.isArray(e)){const r=[];for(let i=0;i<e.length;i++){const o=e[i];if(o.isErr)return o;r.push(o.value)}return t.ok(r)}const n={},s=Object.keys(e);for(let r=0;r<s.length;r++){const i=e[s[r]];if(i.isErr)return i;n[s[r]]=i.value}return t.ok(n)}})(_||(_={}));var ee;(function(t){t.Empty="ERR_EMPTY",t.OppositeCheck="ERR_OPPOSITE_CHECK",t.PawnsOnBackrank="ERR_PAWNS_ON_BACKRANK",t.Kings="ERR_KINGS",t.Variant="ERR_VARIANT"})(ee||(ee={}));class me extends Error{}const jr=(t,e,n,s)=>n[e].intersect(Ee(t,s).intersect(n.rooksAndQueens()).union(ve(t,s).intersect(n.bishopsAndQueens())).union(st(t).intersect(n.knight)).union(nt(t).intersect(n.king)).union(Ie(j(e),t).intersect(n.pawn)));class ie{constructor(){}static default(){const e=new ie;return e.castlingRights=f.corners(),e.rook={white:{a:0,h:7},black:{a:56,h:63}},e.path={white:{a:new f(14,0),h:new f(96,0)},black:{a:new f(0,234881024),h:new f(0,1610612736)}},e}static empty(){const e=new ie;return e.castlingRights=f.empty(),e.rook={white:{a:void 0,h:void 0},black:{a:void 0,h:void 0}},e.path={white:{a:f.empty(),h:f.empty()},black:{a:f.empty(),h:f.empty()}},e}clone(){const e=new ie;return e.castlingRights=this.castlingRights,e.rook={white:{a:this.rook.white.a,h:this.rook.white.h},black:{a:this.rook.black.a,h:this.rook.black.h}},e.path={white:{a:this.path.white.a,h:this.path.white.h},black:{a:this.path.black.a,h:this.path.black.h}},e}add(e,n,s,r){const i=Mt(e,n),o=zt(e,n);this.castlingRights=this.castlingRights.with(r),this.rook[e][n]=r,this.path[e][n]=Le(r,o).with(o).union(Le(s,i).with(i)).without(s).without(r)}static fromSetup(e){const n=ie.empty(),s=e.castlingRights.intersect(e.board.rook);for(const r of le){const i=f.backrank(r),o=e.board.kingOf(r);if(!b(o)||!i.has(o))continue;const c=s.intersect(e.board[r]).intersect(i),l=c.first();b(l)&&l<o&&n.add(r,"a",o,l);const u=c.last();b(u)&&o<u&&n.add(r,"h",o,u)}return n}discardRook(e){if(this.castlingRights.has(e)){this.castlingRights=this.castlingRights.without(e);for(const n of le)for(const s of xr)this.rook[n][s]===e&&(this.rook[n][s]=void 0)}}discardColor(e){this.castlingRights=this.castlingRights.diff(f.backrank(e)),this.rook[e].a=void 0,this.rook[e].h=void 0}}class Dr{constructor(e){this.rules=e}reset(){this.board=_e.default(),this.pockets=void 0,this.turn="white",this.castles=ie.default(),this.epSquare=void 0,this.remainingChecks=void 0,this.halfmoves=0,this.fullmoves=1}setupUnchecked(e){this.board=e.board.clone(),this.board.promoted=f.empty(),this.pockets=void 0,this.turn=e.turn,this.castles=ie.fromSetup(e),this.epSquare=Mr(this,e.epSquare),this.remainingChecks=void 0,this.halfmoves=e.halfmoves,this.fullmoves=e.fullmoves}kingAttackers(e,n,s){return jr(e,n,this.board,s)}playCaptureAt(e,n){this.halfmoves=0,n.role==="rook"&&this.castles.discardRook(e),this.pockets&&this.pockets[j(n.color)][n.promoted?"pawn":n.role]++}ctx(){const e=this.isVariantEnd(),n=this.board.kingOf(this.turn);if(!b(n))return{king:n,blockers:f.empty(),checkers:f.empty(),variantEnd:e,mustCapture:!1};const s=Ee(n,f.empty()).intersect(this.board.rooksAndQueens()).union(ve(n,f.empty()).intersect(this.board.bishopsAndQueens())).intersect(this.board[j(this.turn)]);let r=f.empty();for(const o of s){const c=Le(n,o).intersect(this.board.occupied);c.moreThanOne()||(r=r.union(c))}const i=this.kingAttackers(n,j(this.turn),this.board.occupied);return{king:n,blockers:r,checkers:i,variantEnd:e,mustCapture:!1}}clone(){var e,n;const s=new this.constructor;return s.board=this.board.clone(),s.pockets=(e=this.pockets)===null||e===void 0?void 0:e.clone(),s.turn=this.turn,s.castles=this.castles.clone(),s.epSquare=this.epSquare,s.remainingChecks=(n=this.remainingChecks)===null||n===void 0?void 0:n.clone(),s.halfmoves=this.halfmoves,s.fullmoves=this.fullmoves,s}validate(){if(this.board.occupied.isEmpty())return _.err(new me(ee.Empty));if(this.board.king.size()!==2)return _.err(new me(ee.Kings));if(!b(this.board.kingOf(this.turn)))return _.err(new me(ee.Kings));const e=this.board.kingOf(j(this.turn));return b(e)?this.kingAttackers(e,this.turn,this.board.occupied).nonEmpty()?_.err(new me(ee.OppositeCheck)):f.backranks().intersects(this.board.pawn)?_.err(new me(ee.PawnsOnBackrank)):_.ok(void 0):_.err(new me(ee.Kings))}dropDests(e){return f.empty()}dests(e,n){if(n=n||this.ctx(),n.variantEnd)return f.empty();const s=this.board.get(e);if(!s||s.color!==this.turn)return f.empty();let r,i;if(s.role==="pawn"){r=Ie(this.turn,e).intersect(this.board[j(this.turn)]);const o=this.turn==="white"?8:-8,c=e+o;if(0<=c&&c<64&&!this.board.occupied.has(c)){r=r.with(c);const l=this.turn==="white"?e<16:e>=48,u=c+o;l&&!this.board.occupied.has(u)&&(r=r.with(u))}b(this.epSquare)&&Fr(this,e,n)&&(i=f.fromSquare(this.epSquare))}else s.role==="bishop"?r=ve(e,this.board.occupied):s.role==="knight"?r=st(e):s.role==="rook"?r=Ee(e,this.board.occupied):s.role==="queen"?r=Ft(e,this.board.occupied):r=nt(e);if(r=r.diff(this.board[this.turn]),b(n.king)){if(s.role==="king"){const o=this.board.occupied.without(e);for(const c of r)this.kingAttackers(c,j(this.turn),o).nonEmpty()&&(r=r.without(c));return r.union(ln(this,"a",n)).union(ln(this,"h",n))}if(n.checkers.nonEmpty()){const o=n.checkers.singleSquare();if(!b(o))return f.empty();r=r.intersect(Le(o,n.king).with(o))}n.blockers.has(e)&&(r=r.intersect(Mn(e,n.king)))}return i&&(r=r.union(i)),r}isVariantEnd(){return!1}variantOutcome(e){}hasInsufficientMaterial(e){return this.board[e].intersect(this.board.pawn.union(this.board.rooksAndQueens())).nonEmpty()?!1:this.board[e].intersects(this.board.knight)?this.board[e].size()<=2&&this.board[j(e)].diff(this.board.king).diff(this.board.queen).isEmpty():this.board[e].intersects(this.board.bishop)?(!this.board.bishop.intersects(f.darkSquares())||!this.board.bishop.intersects(f.lightSquares()))&&this.board.pawn.isEmpty()&&this.board.knight.isEmpty():!0}toSetup(){var e,n;return{board:this.board.clone(),pockets:(e=this.pockets)===null||e===void 0?void 0:e.clone(),turn:this.turn,castlingRights:this.castles.castlingRights,epSquare:zr(this),remainingChecks:(n=this.remainingChecks)===null||n===void 0?void 0:n.clone(),halfmoves:Math.min(this.halfmoves,150),fullmoves:Math.min(Math.max(this.fullmoves,1),9999)}}isInsufficientMaterial(){return le.every(e=>this.hasInsufficientMaterial(e))}hasDests(e){e=e||this.ctx();for(const n of this.board[this.turn])if(this.dests(n,e).nonEmpty())return!0;return this.dropDests(e).nonEmpty()}isLegal(e,n){if($e(e))return!this.pockets||this.pockets[this.turn][e.role]<=0||e.role==="pawn"&&f.backranks().has(e.to)?!1:this.dropDests(n).has(e.to);{if(e.promotion==="pawn"||e.promotion==="king"&&this.rules!=="antichess"||!!e.promotion!==(this.board.pawn.has(e.from)&&f.backranks().has(e.to)))return!1;const s=this.dests(e.from,n);return s.has(e.to)||s.has(Kr(this,e).to)}}isCheck(){const e=this.board.kingOf(this.turn);return b(e)&&this.kingAttackers(e,j(this.turn),this.board.occupied).nonEmpty()}isEnd(e){return(e?e.variantEnd:this.isVariantEnd())?!0:this.isInsufficientMaterial()||!this.hasDests(e)}isCheckmate(e){return e=e||this.ctx(),!e.variantEnd&&e.checkers.nonEmpty()&&!this.hasDests(e)}isStalemate(e){return e=e||this.ctx(),!e.variantEnd&&e.checkers.isEmpty()&&!this.hasDests(e)}outcome(e){const n=this.variantOutcome(e);return n||(e=e||this.ctx(),this.isCheckmate(e)?{winner:j(this.turn)}:this.isInsufficientMaterial()||this.isStalemate(e)?{winner:void 0}:void 0)}allDests(e){e=e||this.ctx();const n=new Map;if(e.variantEnd)return n;for(const s of this.board[this.turn])n.set(s,this.dests(s,e));return n}play(e){const n=this.turn,s=this.epSquare,r=Kn(this,e);if(this.epSquare=void 0,this.halfmoves+=1,n==="black"&&(this.fullmoves+=1),this.turn=j(n),$e(e))this.board.set(e.to,{role:e.role,color:n}),this.pockets&&this.pockets[n][e.role]--,e.role==="pawn"&&(this.halfmoves=0);else{const i=this.board.take(e.from);if(!i)return;let o;if(i.role==="pawn"){this.halfmoves=0,e.to===s&&(o=this.board.take(e.to+(n==="white"?-8:8)));const c=e.from-e.to;Math.abs(c)===16&&8<=e.from&&e.from<=55&&(this.epSquare=e.from+e.to>>1),e.promotion&&(i.role=e.promotion,i.promoted=!!this.pockets)}else if(i.role==="rook")this.castles.discardRook(e.from);else if(i.role==="king"){if(r){const c=this.castles.rook[n][r];if(b(c)){const l=this.board.take(c);this.board.set(Mt(n,r),i),l&&this.board.set(zt(n,r),l)}}this.castles.discardColor(n)}if(!r){const c=this.board.set(e.to,i)||o;c&&this.playCaptureAt(e.to,c)}}this.remainingChecks&&this.isCheck()&&(this.remainingChecks[n]=Math.max(this.remainingChecks[n]-1,0))}}class Fn extends Dr{constructor(){super("chess")}static default(){const e=new this;return e.reset(),e}static fromSetup(e){const n=new this;return n.setupUnchecked(e),n.validate().map(s=>n)}clone(){return super.clone()}}const Mr=(t,e)=>{if(!b(e))return;const n=t.turn==="white"?5:2,s=t.turn==="white"?8:-8;if(ae(e)!==n||t.board.occupied.has(e+s))return;const r=e-s;if(!(!t.board.pawn.has(r)||!t.board[j(t.turn)].has(r)))return e},zr=t=>{if(!b(t.epSquare))return;const e=t.ctx(),s=t.board.pieces(t.turn,"pawn").intersect(Ie(j(t.turn),t.epSquare));for(const r of s)if(t.dests(r,e).has(t.epSquare))return t.epSquare},Fr=(t,e,n)=>{if(!b(t.epSquare)||!Ie(t.turn,e).has(t.epSquare))return!1;if(!b(n.king))return!0;const s=t.turn==="white"?8:-8,r=t.epSquare-s;return t.kingAttackers(n.king,j(t.turn),t.board.occupied.toggle(e).toggle(r).with(t.epSquare)).without(r).isEmpty()},ln=(t,e,n)=>{if(!b(n.king)||n.checkers.nonEmpty())return f.empty();const s=t.castles.rook[t.turn][e];if(!b(s)||t.castles.path[t.turn][e].intersects(t.board.occupied))return f.empty();const r=Mt(t.turn,e),i=Le(n.king,r),o=t.board.occupied.without(n.king);for(const u of i)if(t.kingAttackers(u,j(t.turn),o).nonEmpty())return f.empty();const c=zt(t.turn,e),l=t.board.occupied.toggle(n.king).toggle(s).toggle(c);return t.kingAttackers(r,j(t.turn),l).nonEmpty()?f.empty():f.fromSquare(s)},Kn=(t,e)=>{if($e(e))return;const n=e.to-e.from;if(!(Math.abs(n)!==2&&!t.board[t.turn].has(e.to))&&t.board.king.has(e.from))return n>0?"h":"a"},Kr=(t,e)=>{const n=Kn(t,e);if(!n)return e;const s=t.castles.rook[t.turn][n];return{from:e.from,to:b(s)?s:e.to}},Ur="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR",Vr=Ur+" w KQkq -",Gr=Vr+" 0 1";var L;(function(t){t.Fen="ERR_FEN",t.Board="ERR_BOARD",t.Pockets="ERR_POCKETS",t.Turn="ERR_TURN",t.Castling="ERR_CASTLING",t.EpSquare="ERR_EP_SQUARE",t.RemainingChecks="ERR_REMAINING_CHECKS",t.Halfmoves="ERR_HALFMOVES",t.Fullmoves="ERR_FULLMOVES"})(L||(L={}));class D extends Error{}const Wr=(t,e,n)=>{let s=t.indexOf(e);for(;n-- >0&&s!==-1;)s=t.indexOf(e,s+e.length);return s},ge=t=>/^\d{1,4}$/.test(t)?parseInt(t,10):void 0,Un=t=>{const e=be(t);return e&&{role:e,color:t.toLowerCase()===t?"black":"white"}},ht=t=>{const e=_e.empty();let n=7,s=0;for(let r=0;r<t.length;r++){const i=t[r];if(i==="/"&&s===8)s=0,n--;else{const o=parseInt(i,10);if(o>0)s+=o;else{if(s>=8||n<0)return _.err(new D(L.Board));const c=s+n*8,l=Un(i);if(!l)return _.err(new D(L.Board));t[r+1]==="~"&&(l.promoted=!0,r++),e.set(c,l),s++}}}return n!==0||s!==8?_.err(new D(L.Board)):_.ok(e)},an=t=>{if(t.length>64)return _.err(new D(L.Pockets));const e=se.empty();for(const n of t){const s=Un(n);if(!s)return _.err(new D(L.Pockets));e[s.color][s.role]++}return _.ok(e)},Hr=(t,e)=>{let n=f.empty();if(e==="-")return _.ok(n);for(const s of e){const r=s.toLowerCase(),i=s===r?"black":"white",o=i==="white"?0:7;if("a"<=r&&r<="h")n=n.with(At(r.charCodeAt(0)-97,o));else if(r==="k"||r==="q"){const c=t[i].intersect(f.backrank(i)).intersect(t.rook.union(t.king)),l=r==="k"?c.last():c.first();n=n.with(b(l)&&t.rook.has(l)?l:At(r==="k"?7:0,o))}else return _.err(new D(L.Castling))}return le.some(s=>f.backrank(s).intersect(n).size()>2)?_.err(new D(L.Castling)):_.ok(n)},un=t=>{const e=t.split("+");if(e.length===3&&e[0]===""){const n=ge(e[1]),s=ge(e[2]);return!b(n)||n>3||!b(s)||s>3?_.err(new D(L.RemainingChecks)):_.ok(new Te(3-n,3-s))}else if(e.length===2){const n=ge(e[0]),s=ge(e[1]);return!b(n)||n>3||!b(s)||s>3?_.err(new D(L.RemainingChecks)):_.ok(new Te(n,s))}else return _.err(new D(L.RemainingChecks))},We=t=>{const e=t.split(/[\s_]+/),n=e.shift();let s,r=_.ok(void 0);if(n.endsWith("]")){const c=n.indexOf("[");if(c===-1)return _.err(new D(L.Fen));s=ht(n.slice(0,c)),r=an(n.slice(c+1,-1))}else{const c=Wr(n,"/",7);c===-1?s=ht(n):(s=ht(n.slice(0,c)),r=an(n.slice(c+1)))}let i;const o=e.shift();if(!b(o)||o==="w")i="white";else if(o==="b")i="black";else return _.err(new D(L.Turn));return s.chain(c=>{const l=e.shift(),u=b(l)?Hr(c,l):_.ok(f.empty()),a=e.shift();let h;if(b(a)&&a!=="-"&&(h=ke(a),!b(h)))return _.err(new D(L.EpSquare));let d=e.shift(),p;b(d)&&d.includes("+")&&(p=un(d),d=e.shift());const m=b(d)?ge(d):0;if(!b(m))return _.err(new D(L.Halfmoves));const g=e.shift(),k=b(g)?ge(g):1;if(!b(k))return _.err(new D(L.Fullmoves));const y=e.shift();let P=_.ok(void 0);if(b(y)){if(b(p))return _.err(new D(L.RemainingChecks));P=un(y)}else b(p)&&(P=p);return e.length>0?_.err(new D(L.Fen)):r.chain(A=>u.chain(O=>P.map(S=>({board:c,pockets:A,turn:i,castlingRights:O,remainingChecks:S,epSquare:h,halfmoves:m,fullmoves:Math.max(1,k)}))))})},qr=t=>{let e=ce(t.role);return t.color==="white"&&(e=e.toUpperCase()),t.promoted&&(e+="~"),e},Qr=t=>{let e="",n=0;for(let s=7;s>=0;s--)for(let r=0;r<8;r++){const i=r+s*8,o=t.get(i);o?(n>0&&(e+=n,n=0),e+=qr(o)):n++,r===7&&(n>0&&(e+=n,n=0),s!==0&&(e+="/"))}return e},hn=t=>K.map(e=>ce(e).repeat(t[e])).join(""),Jr=t=>hn(t.white).toUpperCase()+hn(t.black),Xr=(t,e)=>{let n="";for(const s of le){const r=f.backrank(s);let i=t.kingOf(s);b(i)&&!r.has(i)&&(i=void 0);const o=t.pieces(s,"rook").intersect(r);for(const c of e.intersect(r).reversed())if(c===o.first()&&b(i)&&c<i)n+=s==="white"?"Q":"q";else if(c===o.last()&&b(i)&&i<c)n+=s==="white"?"K":"k";else{const l=Ve[F(c)];n+=s==="white"?l.toUpperCase():l}}return n||"-"},Zr=t=>`${t.white}+${t.black}`,Yr=(t,e)=>[Qr(t.board)+(t.pockets?`[${Jr(t.pockets)}]`:""),t.turn[0],Xr(t.board,t.castlingRights),b(t.epSquare)?ye(t.epSquare):"-",...t.remainingChecks?[Zr(t.remainingChecks)]:[],Math.max(0,Math.min(t.halfmoves,9999)),Math.max(1,Math.min(t.fullmoves,9999))].join(" "),ei=(t,e)=>{let n="";if($e(e))e.role!=="pawn"&&(n=ce(e.role).toUpperCase()),n+="@"+ye(e.to);else{const s=t.board.getRole(e.from);if(!s)return"--";if(s==="king"&&(t.board[t.turn].has(e.to)||Math.abs(e.to-e.from)===2))n=e.to>e.from?"O-O":"O-O-O";else{const r=t.board.occupied.has(e.to)||s==="pawn"&&F(e.from)!==F(e.to);if(s!=="pawn"){n=ce(s).toUpperCase();let i;if(s==="king"?i=nt(e.to).intersect(t.board.king):s==="queen"?i=Ft(e.to,t.board.occupied).intersect(t.board.queen):s==="rook"?i=Ee(e.to,t.board.occupied).intersect(t.board.rook):s==="bishop"?i=ve(e.to,t.board.occupied).intersect(t.board.bishop):i=st(e.to).intersect(t.board.knight),i=i.intersect(t.board[t.turn]).without(e.from),i.nonEmpty()){const o=t.ctx();for(const c of i)t.dests(c,o).has(e.to)||(i=i.without(c));if(i.nonEmpty()){let c=!1,l=i.intersects(f.fromRank(ae(e.from)));i.intersects(f.fromFile(F(e.from)))?c=!0:l=!0,l&&(n+=Ve[F(e.from)]),c&&(n+=Dn[ae(e.from)])}}}else r&&(n=Ve[F(e.from)]);r&&(n+="x"),n+=ye(e.to),e.promotion&&(n+="="+ce(e.promotion).toUpperCase())}}return n},ti=(t,e)=>{var n;const s=ei(t,e);return t.play(e),!((n=t.outcome())===null||n===void 0)&&n.winner?s+"#":t.isCheck()?s+"+":s},ni=(t,e)=>ti(t.clone(),e),fn=(t,e)=>{const n=t.ctx(),s=e.match(/^([NBRQK])?([a-h])?([1-8])?[-x]?([a-h][1-8])(?:=?([nbrqkNBRQK]))?[+#]?$/);if(!s){let a;if(e==="O-O"||e==="O-O+"||e==="O-O#"?a="h":(e==="O-O-O"||e==="O-O-O+"||e==="O-O-O#")&&(a="a"),a){const p=t.castles.rook[t.turn][a];return!b(n.king)||!b(p)||!t.dests(n.king,n).has(p)?void 0:{from:n.king,to:p}}const h=e.match(/^([pnbrqkPNBRQK])?@([a-h][1-8])[+#]?$/);if(!h)return;const d={role:h[1]?be(h[1]):"pawn",to:ke(h[2])};return t.isLegal(d,n)?d:void 0}const r=s[1]?be(s[1]):"pawn",i=ke(s[4]),o=s[5]?be(s[5]):void 0;if(!!o!==(r==="pawn"&&f.backranks().has(i))||o==="king"&&t.rules!=="antichess")return;let c=t.board.pieces(t.turn,r);r==="pawn"&&!s[2]?c=c.intersect(f.fromFile(F(i))):s[2]&&(c=c.intersect(f.fromFile(s[2].charCodeAt(0)-97))),s[3]&&(c=c.intersect(f.fromRank(s[3].charCodeAt(0)-49)));const l=r==="pawn"?f.fromFile(F(i)):f.empty();c=c.intersect(l.union(Tr({color:j(t.turn),role:r},i,t.board.occupied)));let u;for(const a of c)if(t.dests(a,n).has(i)){if(b(u))return;u=a}if(b(u))return{from:u,to:i,promotion:o}},si=(t=Kt)=>({headers:t(),moves:new Vn});let Vn=class{constructor(){this.children=[]}*mainlineNodes(){let e=this;for(;e.children.length;){const n=e.children[0];yield n,e=n}}*mainline(){for(const e of this.mainlineNodes())yield e.data}end(){let e=this;for(;e.children.length;)e=e.children[0];return e}};class ri extends Vn{constructor(e){super(),this.data=e}}const Kt=()=>new Map([["Event","?"],["Site","?"],["Date","????.??.??"],["Round","?"],["White","?"],["Black","?"],["Result","*"]]),dn="\uFEFF",ft=t=>/^\s*$/.test(t),dt=t=>t.startsWith("%");class ii extends Error{}class oi{constructor(e,n=Kt,s=1e6){this.emitGame=e,this.initHeaders=n,this.maxBudget=s,this.lineBuf=[],this.resetGame(),this.state=0}resetGame(){this.budget=this.maxBudget,this.found=!1,this.state=1,this.game=si(this.initHeaders),this.stack=[{parent:this.game.moves,root:!0}],this.commentBuf=[]}consumeBudget(e){if(this.budget-=e,this.budget<0)throw new ii("ERR_PGN_BUDGET")}parse(e,n){if(!(this.budget<0))try{let s=0;for(;;){const r=e.indexOf(`
`,s);if(r===-1)break;const i=r>s&&e[r-1]==="\r"?r-1:r;this.consumeBudget(r-s),this.lineBuf.push(e.slice(s,i)),s=r+1,this.handleLine()}this.consumeBudget(e.length-s),this.lineBuf.push(e.slice(s)),n!=null&&n.stream||(this.handleLine(),this.emit(void 0))}catch(s){this.emit(s)}}handleLine(){let e=!0,n=this.lineBuf.join("");this.lineBuf=[];e:for(;;)switch(this.state){case 0:n.startsWith(dn)&&(n=n.slice(dn.length)),this.state=1;case 1:if(ft(n)||dt(n))return;this.found=!0,this.state=2;case 2:{if(dt(n))return;let s=!0;for(;s;)s=!1,n=n.replace(/^\s*\[([A-Za-z0-9][A-Za-z0-9_+#=:-]*)\s+"((?:[^"\\]|\\"|\\\\)*)"\]/,(r,i,o)=>(this.consumeBudget(200),this.game.headers.set(i,o.replace(/\\"/g,'"').replace(/\\\\/g,"\\")),s=!0,e=!1,""));if(ft(n))return;this.state=3}case 3:{if(e){if(dt(n))return;if(ft(n))return this.emit(void 0)}const s=/(?:[NBKRQ]?[a-h]?[1-8]?[-x]?[a-h][1-8](?:=?[nbrqkNBRQK])?|[pnbrqkPNBRQK]?@[a-h][1-8]|O-O-O|0-0-0|O-O|0-0)[+#]?|--|Z0|0000|@@@@|{|;|\$\d{1,4}|[?!]{1,2}|\(|\)|\*|1-0|0-1|1\/2-1\/2/g;let r;for(;r=s.exec(n);){const i=this.stack[this.stack.length-1];let o=r[0];if(o===";")return;if(o.startsWith("$"))this.handleNag(parseInt(o.slice(1),10));else if(o==="!")this.handleNag(1);else if(o==="?")this.handleNag(2);else if(o==="!!")this.handleNag(3);else if(o==="??")this.handleNag(4);else if(o==="!?")this.handleNag(5);else if(o==="?!")this.handleNag(6);else if(o==="1-0"||o==="0-1"||o==="1/2-1/2"||o==="*")this.stack.length===1&&o!=="*"&&this.game.headers.set("Result",o);else if(o==="(")this.consumeBudget(100),this.stack.push({parent:i.parent,root:!1});else if(o===")")this.stack.length>1&&this.stack.pop();else if(o==="{"){const c=s.lastIndex,l=n[c]===" "?c+1:c;n=n.slice(l),this.state=4;continue e}else this.consumeBudget(100),o==="Z0"||o==="0000"||o==="@@@@"?o="--":o.startsWith("0")&&(o=o.replace(/0/g,"O")),i.node&&(i.parent=i.node),i.node=new ri({san:o,startingComments:i.startingComments}),i.startingComments=void 0,i.root=!1,i.parent.children.push(i.node)}return}case 4:{const s=n.indexOf("}");if(s===-1){this.commentBuf.push(n);return}else{const r=s>0&&n[s-1]===" "?s-1:s;this.commentBuf.push(n.slice(0,r)),this.handleComment(),n=n.slice(s),this.state=3,e=!1}}}}handleNag(e){var n;this.consumeBudget(50);const s=this.stack[this.stack.length-1];s.node&&((n=s.node.data).nags||(n.nags=[]),s.node.data.nags.push(e))}handleComment(){var e,n;this.consumeBudget(100);const s=this.stack[this.stack.length-1],r=this.commentBuf.join(`
`);this.commentBuf=[],s.node?((e=s.node.data).comments||(e.comments=[]),s.node.data.comments.push(r)):s.root?((n=this.game).comments||(n.comments=[]),this.game.comments.push(r)):(s.startingComments||(s.startingComments=[]),s.startingComments.push(r))}emit(e){if(this.state===4&&this.handleComment(),e)return this.emitGame(this.game,e);this.found&&this.emitGame(this.game,void 0),this.resetGame()}}const ci=(t,e=Kt)=>{const n=[];return new oi(s=>n.push(s),e,NaN).parse(t),n},He=class He{constructor(e,n){this.headers=e,this.tree=n}get event(){return this.headers.event}get site(){return this.headers.site}get white(){return this.headers.white}get black(){return this.headers.black}get puzzle(){return this.headers.puzzle}get fen(){return this.headers.fen}get plain(){let e=[];return this.fen&&this.fen!=="?"&&e.push(`[FEN "${this.fen}"]`),this.event&&this.event!=="?"&&e.push(`[Event "${this.event}"]`),this.site&&this.site!=="?"&&e.push(`[Site "${this.site}"]`),this.white&&this.white!=="?"&&e.push(`[White "${this.white}"]`),this.black&&this.black!=="?"&&e.push(`[Black "${this.black}"]`),this.puzzle&&this.puzzle!=="?"&&e.push(`[Puzzle "${this.puzzle}"]`),e.join(`
`)+`

`+this.tree.text}};N(He,"make_many",e=>ci(e).map(n=>{let s=n.headers.get("Event"),r=n.headers.get("Site"),i=n.headers.get("White"),o=n.headers.get("Black"),c=n.headers.get("Puzzle"),l=n.headers.get("FEN"),u=n.moves.children[0],a=l??Gr,h=u.data.san,d=Fn.fromSetup(We(a).unwrap()).unwrap(),p=fn(d,h),m=rn(p),g=$t.make(a,[m]);n.comments&&g.set_root_comments(n.comments.join(`
`)),k(g,u,d,[]);function k(P,A,O,S){let Q=fn(O,A.data.san),J=O.clone();J.play(Q);let G=rn(Q);P.append_uci(G,S),A.data.comments&&P.set_comments([...S,G],A.data.comments.join(`
`)),A.children.forEach(R=>{k(P,R,J,[...S,G])})}return new He({fen:l,event:s,site:r,white:i,black:o,puzzle:c},g)}));let Nt=He;const we=class we{constructor(e){N(this,"_children");this.data=e,this._children=I([])}static before_color_of(e){return We(e.data.before_fen).unwrap().turn}get clone(){let e=new we({...this.data});return e.children=this.children.map(n=>n.clone),e}get mainline_only(){let e=new we({...this.data});return e.children=this.children.slice(0,1).map(n=>n.mainline_only),e}get length(){if(this.children.length>1)return 1;if(this.children.length===0)return 0;let e=1,n=this.children[0];for(;(n==null?void 0:n.children.length)===1;)e++,n=n.children[0];return e}get nb_first_variations(){var e;return((e=this.children_first_variations)==null?void 0:e.length)??0}get children_first_variations(){let e=this.children;for(;(e==null?void 0:e.length)===1;)e=e[0].children;if(e.length>1)return e}get children(){return this._children[0]()}set children(e){this._children[1](e)}};N(we,"make",e=>new we(e));let xe=we;const te=class te{constructor(e,n,s){N(this,"_root");this.before_fen=e,this.comments=s,this._root=I(n,{equals:!1})}get text(){function e(s,r=!1){let i=s.ply,o=i%2===1||r?Math.ceil(i/2)+(i%2===1?".":"..."):"",c=i%2===1?"":" ";return`${o} ${s.san}${s.comments?" { "+s.comments+" }":""}${c}`}function n(s,r=!1){let i="";return s.length===0||(s.length===1?(i+=e(s[0].data,r),i+=n(s[0].children,!1)):(i+=e(s[0].data,!1).trimEnd(),i+=" "+s.slice(1).map(o=>`(${n([o],!0).trimEnd()})`).join(" "),i+=" "+n(s[0].children,!0))),i}return(this.comments?`{ ${this.comments} } `:"")+n(this.root,!0)}get initial_color(){return xe.before_color_of(this.root[0])}get clone(){return new te(this.before_fen,this.root.map(e=>e.clone),this.comments)}get mainline_only(){return new te(this.before_fen,this.root.slice(0,1).map(e=>e.mainline_only))}get root(){return this._root[0]()}set root(e){this._root[1](e)}static make_data(e,n,s,r){let i=We(e).unwrap(),o=Fn.fromSetup(i).unwrap(),c=Or(n),l=ni(o,c);return o.play(c),{path:[...r,n],ply:s,before_fen:e,san:l,after_fen:Yr(o.toSetup()),uci:n}}_traverse_path(e){let n,s=this.root;for(let r of e)n=s.find(i=>i.data.uci===r),s=(n==null?void 0:n.children)||this.root;return n}_find_path(e){let n=[],s=[],r,i=this.root,o=!1;for(let c of e)if(o)s.push(c);else{let l=i.find(u=>u.data.uci===c);l?(n.push(c),r=l,i=r.children):(o=!0,s.push(c))}return[n,r,s]}get_children(e){let n=this._traverse_path(e);return n==null?void 0:n.children.map(s=>s.data)}get_at(e){let n=this._traverse_path(e);return n==null?void 0:n.data}append_uci(e,n=[]){this.append_ucis([...n,e])}append_ucis(e){let[n,s,r]=this._find_path(e);if(!s){let i=We(this.before_fen).unwrap().turn==="black"?2:1,o=r[0],c=xe.make(te.make_data(this.before_fen,o,i,n));this.root.push(c),this.root=this.root,r=r.slice(1)}for(let i of r){let o=xe.make(te.make_data(s.data.after_fen,i,s.data.ply+1,n)),c=s.children;s.children=[...c,o],s=o,n=[...n,i]}}set_root_comments(e){this.comments=e}set_comments(e,n){let[s,r,i]=this._find_path(e);r&&(r.data.comments=n)}};N(te,"make",(e,n)=>{let s=new te(e,[]);return s.append_ucis(n),s});let $t=te;const li=(t,e)=>{let n=Nt.make_many(t).map(s=>({site:s.puzzle&&`https://lichess.org/training/${s.puzzle}`,pgn:s}));return{name:e,chapters:n}},mn=()=>fetch("pgns/config.txt").then(t=>t.text()).then(t=>ui(t)),ai=(t,e)=>fetch(`pgns/${t}.pgn`).then(n=>n.text()).then(n=>li(n,e)),ui=t=>t.split(`
`).map(e=>{let n=e.match(/([^\s]*)\s*"([^"]*)"\s*(.*)$/),[s,r,i,o]=n,c=o.trim().split(" "),l=c.includes("hide_first_move"),u=c.includes("random_line");return{id:r,name:i,hide_first:l,random_line:u}});class hi{constructor(){N(this,"config");N(this,"cache",new Map)}async get_list_of_studies(){return this.config||(this.config=await mn()),this.config}async get_study_by_id(e){if(this.config||(this.config=await mn()),!this.cache.get(e)){let{name:n,hide_first:s,random_line:r}=this.config.find(o=>o.id===e),i=await ai(e,n);i.hide_first=s,i.random_line=r,this.cache.set(e,i)}return this.cache.get(e)}}const je=new hi,fi=()=>`run-${Math.random().toString(16).slice(2)}`,di=[];class mi{constructor(){N(this,"anonymous_user","Anonymous");N(this,"_active_user",Ne(I(),{name:".wpc.profile.active_user"}));N(this,"_user_list",Ne(I(di,{equals:!1}),{name:".wpc.profile.user_list"}))}get active_user(){return this._active_user[0]()}set active_user(e){this._active_user[1](e)}get user_list(){return this._user_list[0]()}set user_list(e){this._user_list[1](e)}save_new_profile(e){let n=this.user_list;n=n.filter(s=>s!==e),n.push(e),Gt(()=>{this.user_list=n,this.active_user=e})}delete_active_profile(){let e=this.active_user,n=this.user_list;n=n.filter(s=>s!==e),Gt(()=>{this.active_user=void 0,this.user_list=n})}change_profile(e){this.active_user=e}}const pi=new mi;function Mi(t){return t.solved.length+t.failed.length+t.skipped.length}const gi=[],wi=[];class bi{constructor(){N(this,"_user_active_config_list",Ne(I(wi,{equals:!1}),{name:".wpc.profile.user_active_config_list"}));N(this,"_user_run_list",Ne(I(gi,{equals:!1}),{name:".wpc.profile.user_run_list"}))}get user_active_config_list(){return this._user_active_config_list[0]()}set user_active_config_list(e){this._user_active_config_list[1](e)}get user_run_list(){return this._user_run_list[0]()}set user_run_list(e){this._user_run_list[1](e)}get_runs_for_user(e,n){return this.user_run_list.filter(s=>s.username===e&&s.set_id===n)}async get_failed_puzzles_for_selected_study_in_pgn_for_user(e,n){let s=this.get_runs_for_user(e,n).pop();if(!s)return;let r=await je.get_study_by_id(s.set_id);return s.failed.map(o=>r.chapters[o].pgn.plain).join(`

`)}async get_failed_puzzles_for_active_run_in_pgn_for_user(e){let n=await this.get_active_run_for_user(e),s=await je.get_study_by_id(n.set_id);return console.log(n.failed),n.failed.map(i=>s.chapters[i].pgn.plain).join(`

`)}async get_active_run_for_user(e){let n=await this.get_or_create_active_config_for_user(e),s=this.user_run_list.filter(r=>r.username===e&&(!n||r.set_id===n.active_set));return s[s.length-1]}get_active_config_for_user(e){return this.user_active_config_list.find(s=>s.username===e)}set_active_config_for_user(e,n){let s=this.user_active_config_list,r=s.find(i=>i.username===e);if(r)return r.active_set=n,this.user_active_config_list=s,r;{let i={username:e,active_set:n};return s.push(i),this.user_active_config_list=s,i}}async get_or_create_active_config_for_user(e){let n=this.get_active_config_for_user(e);if(n)return n;{let s=(await je.get_list_of_studies())[0].id;return this.set_active_config_for_user(e,s)}}async get_or_create_active_run_for_user(e){let n=await this.get_active_run_for_user(e);return n||(n=await this.start_new_run(e)),n}clear_all_runs(e){let n=this.user_run_list;n=n.filter(s=>s.username!==e),this.user_run_list=n}clear_runs(e,n){let s=this.user_run_list;s=s.filter(r=>!(r.username===e&&r.set_id==n)),this.user_run_list=s}async start_new_run(e){let s=(await this.get_or_create_active_config_for_user(e)).active_set,i=(await je.get_study_by_id(s)).chapters.length,o=this.get_runs_for_user(e,s),c={id:fi(),no:o.length+1,set_id:s,username:e,solved:[],failed:[],skipped:[],elapsed_ms:0,total:i};return this._save_run(c),c}_save_run(e){let n=this.user_run_list;n=n.filter(s=>s.id!==e.id),n.push(e),this.user_run_list=n}delete_runs_for_user(e){let n=this.user_run_list;n=n.filter(r=>r.username!==e),this.user_run_list=n;let s=this.user_active_config_list;s=s.filter(r=>r.username!==e),this.user_active_config_list=s}delete_runs_for_set(e,n){let s=this.user_run_list;s=s.filter(r=>!(r.username===e&&r.set_id===n)),this.user_run_list=s}}const zi=new bi;function ki(t){let e,n;return function(...s){const r=this,i=()=>{n=void 0,e=t.apply(r,s).finally(()=>{e=void 0,n&&n()})};e?n=i:i()}}function yi(t,e){return ki(function(...n){return e.apply(this,n),new Promise(s=>setTimeout(s,t))})}const _i=(t,e,n)=>Ne(I(t),{name:`.wpc.v1.${e}`});class Gn{constructor(){N(this,"ctx",Ei());N(this,"sounds",new Map);N(this,"paths",new Map);N(this,"theme","standard");N(this,"volumeStorage",_i("1",".sound.volume"));N(this,"enabled",()=>this.theme!=="silent");N(this,"getVolume",()=>{const e=parseFloat(this.volumeStorage[0]());return e>=0?e:.7});N(this,"throttled",yi(200,e=>this.play(e)));N(this,"setVolume",e=>this.volumeStorage[1](e.toString()))}resolvePath(e){return this.enabled()?`sound/${this.theme}/${e[0].toUpperCase()+e.slice(1)}`:void 0}async play(e,n=1){if(!this.enabled())return;const s=await this.load(e);s&&await s.play(this.getVolume()*n)}async load(e,n){if(!this.ctx||(n?this.paths.set(e,n):n=this.paths.get(e)??this.resolvePath(e),!n))return;if(this.sounds.has(n))return this.sounds.get(n);console.log(n);const s=await fetch(`${n}.mp3`);if(!s.ok)throw new Error(`${n}.mp3 failed ${s.status}`);const r=await s.arrayBuffer(),i=await new Promise((c,l)=>{var u,a,h;((u=this.ctx)==null?void 0:u.decodeAudioData.length)===1?(a=this.ctx)==null||a.decodeAudioData(r).then(c).catch(l):(h=this.ctx)==null||h.decodeAudioData(r,c,l)}),o=new vi(this.ctx,i);return this.sounds.set(n,o),o}preloadBoardSounds(){for(const e of["move","capture","check","genericNotify"])this.load(e)}async move(e){var n,s,r;e!=null&&e.name?this.throttled(e.name):((n=e==null?void 0:e.san)!=null&&n.includes("x")?this.throttled("capture"):this.throttled("move"),((s=e==null?void 0:e.san)!=null&&s.includes("#")||(r=e==null?void 0:e.san)!=null&&r.includes("+"))&&this.throttled("check"))}}class vi{constructor(e,n){N(this,"node");N(this,"ctx");this.buffer=n,this.rewire(e)}play(e=1){this.node.gain.setValueAtTime(e,this.ctx.currentTime);const n=this.ctx.createBufferSource();return n.buffer=this.buffer,n.connect(this.node),new Promise(s=>{n.onended=()=>{n.disconnect(),s()},n.start(0)})}rewire(e){var n;(n=this.node)==null||n.disconnect(),this.ctx=e,this.node=this.ctx.createGain(),this.node.connect(this.ctx.destination)}}function Ei(){return new AudioContext}const Wn=Qe(new Gn);function Ai(t){return T(Wn.Provider,{value:new Gn,get children(){return t.children}})}function Fi(){return Je(Wn)}var Ci=Cn("<div class=root><header><div class=title-nav><h1></h1></div><nav id=topnav></nav></header><div><div class=main>");const Pi=It(()=>jt(()=>import("./Home-BoF7qL7j.js"),__vite__mapDeps([0,1,2]),import.meta.url)),xi=It(()=>jt(()=>import("./Dashboard-D0oJbDWT.js"),__vite__mapDeps([3,1,4]),import.meta.url)),Oi=It(()=>jt(()=>import("./Profile-Btu9yJiJ.js"),__vite__mapDeps([5,6]),import.meta.url));function Ri(){return T(Ai,{get children(){return T(zs,{get children(){return T(pr,{root:Si,get children(){return[T(ut,{path:"/",component:Pi}),T(ut,{path:"/dashboard",component:xi}),T(ut,{path:"/profile",component:Oi})]}})}})}})}function Si(t){let e=Tn(),n=$(()=>e.pathname.split("/")[1]);const s=()=>`on-${n()||"home"}`;return(()=>{var r=Ci(),i=r.firstChild,o=i.firstChild,c=o.firstChild,l=o.nextSibling,u=i.nextSibling,a=u.firstChild;return De(c,T(tn,{href:"/",children:"Woodpecker Chess Tactics"})),De(l,T(tn,{href:"/dashboard",get children(){return T(Bt,{get when(){return pi.active_user},fallback:"Dashboard",children:h=>h()})}})),De(a,()=>t.children),H(()=>xn(u,"main-wrap "+s())),r})()}const Ni=document.getElementById("root");Cs(()=>T(Ri,{}),Ni);export{wn as A,Lt as B,Fn as C,j as D,Mi as E,Ti as F,bt as G,je as H,Gr as I,ji as J,tn as K,yi as L,Bi as M,pi as P,Bt as S,zi as U,T as a,H as b,es as c,Pn as d,Rs as e,xn as f,_i as g,$ as h,De as i,wt as j,Ii as k,I as l,ye as m,Gt as n,Li as o,$t as p,B as q,We as r,F as s,Cn as t,Ss as u,Yr as v,ke as w,Or as x,ns as y,Fi as z};
