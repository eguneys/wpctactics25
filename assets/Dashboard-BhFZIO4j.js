import{P as u,x as Q,b as d,g as T,S,k as z,y as Se,H as be,c as me,z as xe,i as t,h as D,j as Ce,F as ke,J as W,K as F,D as C,d as we,t as a,U as f,L as ye,G as Pe}from"./index-DvA_AtqM.js";import{S as X,f as Re}from"./session_store-CgU1Qj2R.js";var ze=a("<span>Loading.."),De=a('<div class=dashboard><div class=puzzle-list><h2>Puzzle Sets</h2><ul></ul></div><div class=settings><h2>Settings</h2><div class=links><span class=link></span><div class=volume><label>Volume</label><input min=0 max=1 step=0.1 type=range></div><span class="link red">Clear Statistics</span><span class="link red">Delete Profile</span></div></div><div class=stats><div class=header><span> Statistics</span></div><div class=body>'),Fe=a("<span> active "),Te=a("<li><span></span>"),Ve=a("<span class=link> <!> "),Ae=a("<span>"),Ee=a("<span> There are no runs on this set. "),Le=a("<div class=buttons><button>Start a New Run"),Ne=a("<button>Set Active"),Ue=a("<div class=buttons><button>Start Solving"),je=a("<div class=title><span> Total Runs: <!> </span><div class=runs><span> Run #<!> "),Ge=a("<div class=progress><div class=progress-bar><span class=solved> </span><span class=failed> </span><span class=skipped> "),He=a("<div class=info><span>Attempted: <!>/</span><div class=out><span class=solved>Solved: <!>/</span><span class=failed>Failed: <!>/</span><span class=skipped>Skipped: <!>/<!> </span></div><span>Time Spent: <!> "),Je=a('<div class=buttons><span class="link red">Clear Statistics');const Ie=()=>{let b=u.active_user??u.anonymous_user,[r]=Q(()=>Pe.get_list_of_studies());const[c]=Q(()=>f.get_or_create_active_config_for_user(b));return d(S,{get when(){return T(()=>!!(!(r.loading||c.loading)&&r()))()&&!!c()},get fallback(){return ze()},get children(){return d(Ke,{get config(){return c()},get studies(){return r()}})}})},Ke=b=>{const r=()=>u.active_user??u.anonymous_user,[c,V]=z(b.config.active_set),A=()=>b.studies,[v,Y]=z(c()),E=T(()=>A().find(n=>n.id===v())),L=()=>f.get_runs_for_user(r(),v()),[N,Me]=z(0),Z=T(()=>{let n=L();return n[n.length-1-N()]}),k=Se(),m=be();me(xe(c,n=>{f.set_active_config_for_user(r(),n)}));const ee=()=>{m("/profile")},le=()=>{f.clear_all_runs(r())},te=()=>{window.confirm("Do you want to delete your profile?")&&(u.delete_active_profile(),m("/profile"))},ie=ye(150,n=>{k.setVolume(n),k.play("move")}),U=()=>{V(v())},se=()=>{V(v()),f.get_or_create_active_run_for_user(r())},ne=()=>{f.clear_runs(r(),v())};X.navigate_filter=void 0;const w=n=>{X.navigate_filter=n,m("/")};return(()=>{var n=De(),j=n.firstChild,ae=j.firstChild,re=ae.nextSibling,G=j.nextSibling,_e=G.firstChild,de=_e.nextSibling,y=de.firstChild,H=y.nextSibling,ce=H.firstChild,J=ce.nextSibling,K=H.nextSibling,oe=K.nextSibling,$e=G.nextSibling,P=$e.firstChild,R=P.firstChild,ge=R.firstChild,ve=P.nextSibling;return t(re,d(ke,{get each(){return A()},children:e=>(()=>{var l=Te(),i=l.firstChild;return l.$$click=()=>Y(e.id),t(i,()=>e.name),t(l,d(S,{get when(){return e.id===c()},get children(){return Fe()}}),null),D(()=>Ce(l,v()===e.id?"active":"")),l})()})),y.$$click=()=>ee(),t(y,d(W,{href:"/profile",children:"Change Profile"})),J.$$input=e=>ie(parseFloat(e.currentTarget.value)),K.$$click=()=>le(),oe.$$click=()=>te(),t(P,d(S,{get when(){return u.active_user},get fallback(){return(()=>{var e=Ve(),l=e.firstChild,i=l.nextSibling;return i.nextSibling,t(e,d(W,{href:"/profile",children:"Save Profile"}),i),e})()},children:e=>(()=>{var l=Ae();return t(l,e),l})()}),R),t(R,()=>E().name,ge),t(ve,d(S,{get when(){return Z()},keyed:!0,get fallback(){return[Ee(),(()=>{var e=Le(),l=e.firstChild;return l.$$click=()=>se(),e})()]},children:e=>[(()=>{var l=Ue(),i=l.firstChild;return t(l,d(S,{get when(){return E().id!==c()},get children(){var _=Ne();return _.$$click=()=>U(),_}}),i),i.$$click=()=>{U(),m("/")},l})(),(()=>{var l=je(),i=l.firstChild,_=i.firstChild,o=_.nextSibling;o.nextSibling;var p=i.nextSibling,s=p.firstChild,h=s.firstChild,$=h.nextSibling;return $.nextSibling,t(i,()=>L().length,o),t(s,()=>N()+1,$),l})(),(()=>{var l=Ge(),i=l.firstChild,_=i.firstChild,o=_.nextSibling,p=o.nextSibling;return D(s=>{var h=`width: ${e.solved.length/e.total*100}%;`,$=`width: ${e.failed.length/e.total*100}%;`,g=`width: ${e.skipped.length/e.total*100}%;`;return s.e=F(_,h,s.e),s.t=F(o,$,s.t),s.a=F(p,g,s.a),s},{e:void 0,t:void 0,a:void 0}),l})(),(()=>{var l=He(),i=l.firstChild,_=i.firstChild,o=_.nextSibling;o.nextSibling;var p=i.nextSibling,s=p.firstChild,h=s.firstChild,$=h.nextSibling;$.nextSibling;var g=s.nextSibling,pe=g.firstChild,M=pe.nextSibling;M.nextSibling;var x=g.nextSibling,fe=x.firstChild,q=fe.nextSibling,ue=q.nextSibling,B=ue.nextSibling;B.nextSibling;var I=p.nextSibling,he=I.firstChild,O=he.nextSibling;return O.nextSibling,t(i,()=>C(e),o),t(i,()=>e.total,null),s.$$click=()=>w("solved"),t(s,()=>e.solved.length,$),t(s,()=>C(e),null),g.$$click=()=>w("failed"),t(g,()=>e.failed.length,M),t(g,()=>C(e),null),x.$$click=()=>w("skipped"),t(x,()=>e.skipped.length,q),t(x,()=>C(e),B),t(I,()=>Re(e.elapsed_ms),O),l})(),(()=>{var l=Je(),i=l.firstChild;return i.$$click=()=>ne(),l})()]})),D(()=>J.value=k.getVolume()),n})()};we(["click","input"]);export{Ie as default};
