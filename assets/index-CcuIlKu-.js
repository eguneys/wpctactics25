function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./Home-BtjOHcat.js","./session_store-CgU1Qj2R.js","./Home-Drb7bRJZ.css","./Dashboard-DoRW-uxG.js","./Dashboard-4QHUAL7h.css","./Profile-C7V2iOtj.js","./Profile-DecqPPXv.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
var qn=Object.defineProperty;var Qn=(t,e,n)=>e in t?qn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var $=(t,e,n)=>(Qn(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();const A={context:void 0,registry:void 0};function Ce(t){A.context=t}const Jn=(t,e)=>t===e,Re=Symbol("solid-proxy"),Xn=Symbol("solid-track"),De={equals:Jn};let mn=_n;const H=1,Fe=2,gn={owned:null,cleanups:null,context:null,owner:null},rt={};var E=null;let it=null,Zn=null,x=null,D=null,G=null,We=0;function Pe(t,e){const n=x,s=E,r=t.length===0,i=e===void 0?s:e,o=r?gn:{owned:null,cleanups:null,context:i?i.context:null,owner:i},c=r?t:()=>t(()=>L(()=>Xe(o)));E=o,x=null;try{return V(c,!0)}finally{x=n,E=s}}function B(t,e){e=e?Object.assign({},De,e):De;const n={value:t,observers:null,observerSlots:null,comparator:e.equals||void 0},s=r=>(typeof r=="function"&&(r=r(n.value)),yn(n,r));return[bn.bind(n),s]}function Ut(t,e,n){const s=Je(t,e,!0,H);Ae(s)}function W(t,e,n){const s=Je(t,e,!1,H);Ae(s)}function Yn(t,e,n){mn=os;const s=Je(t,e,!1,H);(!n||!n.render)&&(s.user=!0),G?G.push(s):Ae(s)}function N(t,e,n){n=n?Object.assign({},De,n):De;const s=Je(t,e,!0,0);return s.observers=null,s.observerSlots=null,s.comparator=n.equals||void 0,Ae(s),bn.bind(s)}function es(t){return t&&typeof t=="object"&&"then"in t}function ts(t,e,n){let s,r,i;arguments.length===2&&typeof e=="object"||arguments.length===1?(s=!0,r=t,i=e||{}):(s=t,r=e,i=n||{});let o=null,c=rt,a=null,u=!1,l="initialValue"in i,h=typeof s=="function"&&N(s);const d=new Set,[g,m]=(i.storage||B)(i.initialValue),[p,b]=B(void 0),[y,P]=B(void 0,{equals:!1}),[C,O]=B(l?"ready":"unresolved");if(A.context){a=`${A.context.id}${A.context.count++}`;let R;i.ssrLoadFrom==="initial"?c=i.initialValue:A.load&&(R=A.load(a))&&(c=R)}function S(R,w,v,F){return o===R&&(o=null,F!==void 0&&(l=!0),(R===c||w===c)&&i.onHydrated&&queueMicrotask(()=>i.onHydrated(F,{value:w})),c=rt,q(w,v)),w}function q(R,w){V(()=>{w===void 0&&m(()=>R),O(w!==void 0?"errored":l?"ready":"unresolved"),b(w);for(const v of d.keys())v.decrement();d.clear()},!1)}function Q(){const R=ss,w=g(),v=p();if(v!==void 0&&!o)throw v;return x&&!x.user&&R&&Ut(()=>{y(),o&&(R.resolved||d.has(R)||(R.increment(),d.add(R)))}),w}function J(R=!0){if(R!==!1&&u)return;u=!1;const w=h?h():s;if(w==null||w===!1){S(o,L(g));return}const v=c!==rt?c:L(()=>r(w,{value:g(),refetching:R}));return es(v)?(o=v,"value"in v?(v.status==="success"?S(o,v.value,void 0,w):S(o,void 0,void 0,w),v):(u=!0,queueMicrotask(()=>u=!1),V(()=>{O(l?"refreshing":"pending"),P()},!1),v.then(F=>S(v,F,void 0,w),F=>S(v,void 0,An(F),w)))):(S(o,v,void 0,w),v)}return Object.defineProperties(Q,{state:{get:()=>C()},error:{get:()=>p()},loading:{get(){const R=C();return R==="pending"||R==="refreshing"}},latest:{get(){if(!l)return Q();const R=p();if(R&&!o)throw R;return g()}}}),h?Ut(()=>J(!1)):J(!1),[Q,{refetch:J,mutate:m}]}function zt(t){return V(t,!1)}function L(t){if(x===null)return t();const e=x;x=null;try{return t()}finally{x=e}}function pn(t,e,n){const s=Array.isArray(t);let r,i=n&&n.defer;return o=>{let c;if(s){c=Array(t.length);for(let u=0;u<t.length;u++)c[u]=t[u]()}else c=t();if(i){i=!1;return}const a=L(()=>e(c,r,o));return r=c,a}}function Si(t){Yn(()=>L(t))}function St(t){return E===null||(E.cleanups===null?E.cleanups=[t]:E.cleanups.push(t)),t}function wn(){return E}function kn(t,e){const n=E,s=x;E=t,x=null;try{return V(e,!0)}catch(r){Nt(r)}finally{E=n,x=s}}function ns(t){const e=x,n=E;return Promise.resolve().then(()=>{x=e,E=n;let s;return V(t,!1),x=E=null,s?s.done:void 0})}function He(t,e){const n=Symbol("context");return{id:n,Provider:cs(n),defaultValue:t}}function qe(t){return E&&E.context&&E.context[t.id]!==void 0?E.context[t.id]:t.defaultValue}function Qe(t){const e=N(t),n=N(()=>ft(e()));return n.toArray=()=>{const s=n();return Array.isArray(s)?s:s!=null?[s]:[]},n}let ss;function bn(){if(this.sources&&this.state)if(this.state===H)Ae(this);else{const t=D;D=null,V(()=>Ue(this),!1),D=t}if(x){const t=this.observers?this.observers.length:0;x.sources?(x.sources.push(this),x.sourceSlots.push(t)):(x.sources=[this],x.sourceSlots=[t]),this.observers?(this.observers.push(x),this.observerSlots.push(x.sources.length-1)):(this.observers=[x],this.observerSlots=[x.sources.length-1])}return this.value}function yn(t,e,n){let s=t.value;return(!t.comparator||!t.comparator(s,e))&&(t.value=e,t.observers&&t.observers.length&&V(()=>{for(let r=0;r<t.observers.length;r+=1){const i=t.observers[r],o=it&&it.running;o&&it.disposed.has(i),(o?!i.tState:!i.state)&&(i.pure?D.push(i):G.push(i),i.observers&&vn(i)),o||(i.state=H)}if(D.length>1e6)throw D=[],new Error},!1)),e}function Ae(t){if(!t.fn)return;Xe(t);const e=We;rs(t,t.value,e)}function rs(t,e,n){let s;const r=E,i=x;x=E=t;try{s=t.fn(e)}catch(o){return t.pure&&(t.state=H,t.owned&&t.owned.forEach(Xe),t.owned=null),t.updatedAt=n+1,Nt(o)}finally{x=i,E=r}(!t.updatedAt||t.updatedAt<=n)&&(t.updatedAt!=null&&"observers"in t?yn(t,s):t.value=s,t.updatedAt=n)}function Je(t,e,n,s=H,r){const i={fn:t,state:s,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:E,context:E?E.context:null,pure:n};return E===null||E!==gn&&(E.owned?E.owned.push(i):E.owned=[i]),i}function Ke(t){if(t.state===0)return;if(t.state===Fe)return Ue(t);if(t.suspense&&L(t.suspense.inFallback))return t.suspense.effects.push(t);const e=[t];for(;(t=t.owner)&&(!t.updatedAt||t.updatedAt<We);)t.state&&e.push(t);for(let n=e.length-1;n>=0;n--)if(t=e[n],t.state===H)Ae(t);else if(t.state===Fe){const s=D;D=null,V(()=>Ue(t,e[0]),!1),D=s}}function V(t,e){if(D)return t();let n=!1;e||(D=[]),G?n=!0:G=[],We++;try{const s=t();return is(n),s}catch(s){n||(G=null),D=null,Nt(s)}}function is(t){if(D&&(_n(D),D=null),t)return;const e=G;G=null,e.length&&V(()=>mn(e),!1)}function _n(t){for(let e=0;e<t.length;e++)Ke(t[e])}function os(t){let e,n=0;for(e=0;e<t.length;e++){const s=t[e];s.user?t[n++]=s:Ke(s)}if(A.context){if(A.count){A.effects||(A.effects=[]),A.effects.push(...t.slice(0,n));return}else A.effects&&(t=[...A.effects,...t],n+=A.effects.length,delete A.effects);Ce()}for(e=0;e<n;e++)Ke(t[e])}function Ue(t,e){t.state=0;for(let n=0;n<t.sources.length;n+=1){const s=t.sources[n];if(s.sources){const r=s.state;r===H?s!==e&&(!s.updatedAt||s.updatedAt<We)&&Ke(s):r===Fe&&Ue(s,e)}}}function vn(t){for(let e=0;e<t.observers.length;e+=1){const n=t.observers[e];n.state||(n.state=Fe,n.pure?D.push(n):G.push(n),n.observers&&vn(n))}}function Xe(t){let e;if(t.sources)for(;t.sources.length;){const n=t.sources.pop(),s=t.sourceSlots.pop(),r=n.observers;if(r&&r.length){const i=r.pop(),o=n.observerSlots.pop();s<r.length&&(i.sourceSlots[o]=s,r[s]=i,n.observerSlots[s]=o)}}if(t.owned){for(e=t.owned.length-1;e>=0;e--)Xe(t.owned[e]);t.owned=null}if(t.cleanups){for(e=t.cleanups.length-1;e>=0;e--)t.cleanups[e]();t.cleanups=null}t.state=0}function An(t){return t instanceof Error?t:new Error(typeof t=="string"?t:"Unknown error",{cause:t})}function Nt(t,e=E){throw An(t)}function ft(t){if(typeof t=="function"&&!t.length)return ft(t());if(Array.isArray(t)){const e=[];for(let n=0;n<t.length;n++){const s=ft(t[n]);Array.isArray(s)?e.push.apply(e,s):e.push(s)}return e}return t}function cs(t,e){return function(s){let r;return W(()=>r=L(()=>(E.context={...E.context,[t]:s.value},Qe(()=>s.children))),void 0),r}}const ls=Symbol("fallback");function Vt(t){for(let e=0;e<t.length;e++)t[e]()}function as(t,e,n={}){let s=[],r=[],i=[],o=0,c=e.length>1?[]:null;return St(()=>Vt(i)),()=>{let a=t()||[],u,l;return a[Xn],L(()=>{let d=a.length,g,m,p,b,y,P,C,O,S;if(d===0)o!==0&&(Vt(i),i=[],s=[],r=[],o=0,c&&(c=[])),n.fallback&&(s=[ls],r[0]=Pe(q=>(i[0]=q,n.fallback())),o=1);else if(o===0){for(r=new Array(d),l=0;l<d;l++)s[l]=a[l],r[l]=Pe(h);o=d}else{for(p=new Array(d),b=new Array(d),c&&(y=new Array(d)),P=0,C=Math.min(o,d);P<C&&s[P]===a[P];P++);for(C=o-1,O=d-1;C>=P&&O>=P&&s[C]===a[O];C--,O--)p[O]=r[C],b[O]=i[C],c&&(y[O]=c[C]);for(g=new Map,m=new Array(O+1),l=O;l>=P;l--)S=a[l],u=g.get(S),m[l]=u===void 0?-1:u,g.set(S,l);for(u=P;u<=C;u++)S=s[u],l=g.get(S),l!==void 0&&l!==-1?(p[l]=r[u],b[l]=i[u],c&&(y[l]=c[u]),l=m[l],g.set(S,l)):i[u]();for(l=P;l<d;l++)l in p?(r[l]=p[l],i[l]=b[l],c&&(c[l]=y[l],c[l](l))):r[l]=Pe(h);r=r.slice(0,o=d),s=a.slice(0)}return r});function h(d){if(i[l]=d,c){const[g,m]=B(l);return c[l]=m,e(a[l],g)}return e(a[l])}}}function I(t,e){return L(()=>t(e||{}))}function Be(){return!0}const dt={get(t,e,n){return e===Re?n:t.get(e)},has(t,e){return e===Re?!0:t.has(e)},set:Be,deleteProperty:Be,getOwnPropertyDescriptor(t,e){return{configurable:!0,enumerable:!0,get(){return t.get(e)},set:Be,deleteProperty:Be}},ownKeys(t){return t.keys()}};function ot(t){return(t=typeof t=="function"?t():t)?t:{}}function us(){for(let t=0,e=this.length;t<e;++t){const n=this[t]();if(n!==void 0)return n}}function mt(...t){let e=!1;for(let o=0;o<t.length;o++){const c=t[o];e=e||!!c&&Re in c,t[o]=typeof c=="function"?(e=!0,N(c)):c}if(e)return new Proxy({get(o){for(let c=t.length-1;c>=0;c--){const a=ot(t[c])[o];if(a!==void 0)return a}},has(o){for(let c=t.length-1;c>=0;c--)if(o in ot(t[c]))return!0;return!1},keys(){const o=[];for(let c=0;c<t.length;c++)o.push(...Object.keys(ot(t[c])));return[...new Set(o)]}},dt);const n={},s=Object.create(null);for(let o=t.length-1;o>=0;o--){const c=t[o];if(!c)continue;const a=Object.getOwnPropertyNames(c);for(let u=a.length-1;u>=0;u--){const l=a[u];if(l==="__proto__"||l==="constructor")continue;const h=Object.getOwnPropertyDescriptor(c,l);if(!s[l])s[l]=h.get?{enumerable:!0,configurable:!0,get:us.bind(n[l]=[h.get.bind(c)])}:h.value!==void 0?h:void 0;else{const d=n[l];d&&(h.get?d.push(h.get.bind(c)):h.value!==void 0&&d.push(()=>h.value))}}}const r={},i=Object.keys(s);for(let o=i.length-1;o>=0;o--){const c=i[o],a=s[c];a&&a.get?Object.defineProperty(r,c,a):r[c]=a?a.value:void 0}return r}function hs(t,...e){if(Re in t){const r=new Set(e.length>1?e.flat():e[0]),i=e.map(o=>new Proxy({get(c){return o.includes(c)?t[c]:void 0},has(c){return o.includes(c)&&c in t},keys(){return o.filter(c=>c in t)}},dt));return i.push(new Proxy({get(o){return r.has(o)?void 0:t[o]},has(o){return r.has(o)?!1:o in t},keys(){return Object.keys(t).filter(o=>!r.has(o))}},dt)),i}const n={},s=e.map(()=>({}));for(const r of Object.getOwnPropertyNames(t)){const i=Object.getOwnPropertyDescriptor(t,r),o=!i.get&&!i.set&&i.enumerable&&i.writable&&i.configurable;let c=!1,a=0;for(const u of e)u.includes(r)&&(c=!0,o?s[a][r]=i.value:Object.defineProperty(s[a],r,i)),++a;c||(o?n[r]=i.value:Object.defineProperty(n,r,i))}return[...s,n]}function $t(t){let e,n;const s=r=>{const i=A.context;if(i){const[c,a]=B();A.count||(A.count=0),A.count++,(n||(n=t())).then(u=>{Ce(i),A.count--,a(()=>u.default),Ce()}),e=c}else if(!e){const[c]=ts(()=>(n||(n=t())).then(a=>a.default));e=c}let o;return N(()=>(o=e())&&L(()=>{if(!i)return o(r);const c=A.context;Ce(i);const a=o(r);return Ce(c),a}))};return s.preload=()=>n||((n=t()).then(r=>e=()=>r.default),n),s}let fs=0;function ds(){const t=A.context;return t?`${t.id}${t.count++}`:`cl-${fs++}`}const En=t=>`Stale read from <${t}>.`;function Ni(t){const e="fallback"in t&&{fallback:()=>t.fallback};return N(as(()=>t.each,t.children,e||void 0))}function Lt(t){const e=t.keyed,n=N(()=>t.when,void 0,{equals:(s,r)=>e?s===r:!s==!r});return N(()=>{const s=n();if(s){const r=t.children;return typeof r=="function"&&r.length>0?L(()=>r(e?s:()=>{if(!L(n))throw En("Show");return t.when})):r}return t.fallback},void 0,void 0)}function $i(t){let e=!1;const n=(i,o)=>(e?i[1]===o[1]:!i[1]==!o[1])&&i[2]===o[2],s=Qe(()=>t.children),r=N(()=>{let i=s();Array.isArray(i)||(i=[i]);for(let o=0;o<i.length;o++){const c=i[o].when;if(c)return e=!!i[o].keyed,[o,c,i[o]]}return[-1]},void 0,{equals:n});return N(()=>{const[i,o,c]=r();if(i<0)return t.fallback;const a=c.children;return typeof a=="function"&&a.length>0?L(()=>a(e?o:()=>{if(L(r)[0]!==i)throw En("Match");return c.when})):a},void 0,void 0)}function Li(t){return t}const ms=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],gs=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline",...ms]),ps=new Set(["innerHTML","textContent","innerText","children"]),ws=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),ks=Object.assign(Object.create(null),{class:"className",formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1}});function bs(t,e){const n=ks[t];return typeof n=="object"?n[e]?n.$:void 0:n}const ys=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),_s={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"};function vs(t,e,n){let s=n.length,r=e.length,i=s,o=0,c=0,a=e[r-1].nextSibling,u=null;for(;o<r||c<i;){if(e[o]===n[c]){o++,c++;continue}for(;e[r-1]===n[i-1];)r--,i--;if(r===o){const l=i<s?c?n[c-1].nextSibling:n[i-c]:a;for(;c<i;)t.insertBefore(n[c++],l)}else if(i===c)for(;o<r;)(!u||!u.has(e[o]))&&e[o].remove(),o++;else if(e[o]===n[i-1]&&n[c]===e[r-1]){const l=e[--r].nextSibling;t.insertBefore(n[c++],e[o++].nextSibling),t.insertBefore(n[--i],l),e[r]=n[i]}else{if(!u){u=new Map;let h=c;for(;h<i;)u.set(n[h],h++)}const l=u.get(e[o]);if(l!=null)if(c<l&&l<i){let h=o,d=1,g;for(;++h<r&&h<i&&!((g=u.get(e[h]))==null||g!==l+d);)d++;if(d>l-c){const m=e[o];for(;c<l;)t.insertBefore(n[c++],m)}else t.replaceChild(n[c++],e[o++])}else o++;else e[o++].remove()}}}const Gt="_$DX_DELEGATE";function As(t,e,n,s={}){let r;return Pe(i=>{r=i,e===document?t():Me(e,t(),e.firstChild?null:void 0,n)},s.owner),()=>{r(),e.textContent=""}}function Cn(t,e,n){let s;const r=()=>{const o=document.createElement("template");return o.innerHTML=t,n?o.content.firstChild.firstChild:o.content.firstChild},i=e?()=>L(()=>document.importNode(s||(s=r()),!0)):()=>(s||(s=r())).cloneNode(!0);return i.cloneNode=i,i}function Pn(t,e=window.document){const n=e[Gt]||(e[Gt]=new Set);for(let s=0,r=t.length;s<r;s++){const i=t[s];n.has(i)||(n.add(i),e.addEventListener(i,Ss))}}function gt(t,e,n){A.context||(n==null?t.removeAttribute(e):t.setAttribute(e,n))}function Es(t,e,n,s){A.context||(s==null?t.removeAttributeNS(e,n):t.setAttributeNS(e,n,s))}function xn(t,e){A.context||(e==null?t.removeAttribute("class"):t.className=e)}function Cs(t,e,n,s){if(s)Array.isArray(n)?(t[`$$${e}`]=n[0],t[`$$${e}Data`]=n[1]):t[`$$${e}`]=n;else if(Array.isArray(n)){const r=n[0];t.addEventListener(e,n[0]=i=>r.call(t,n[1],i))}else t.addEventListener(e,n)}function Ps(t,e,n={}){const s=Object.keys(e||{}),r=Object.keys(n);let i,o;for(i=0,o=r.length;i<o;i++){const c=r[i];!c||c==="undefined"||e[c]||(Wt(t,c,!1),delete n[c])}for(i=0,o=s.length;i<o;i++){const c=s[i],a=!!e[c];!c||c==="undefined"||n[c]===a||!a||(Wt(t,c,!0),n[c]=a)}return n}function xs(t,e,n){if(!e)return n?gt(t,"style"):e;const s=t.style;if(typeof e=="string")return s.cssText=e;typeof n=="string"&&(s.cssText=n=void 0),n||(n={}),e||(e={});let r,i;for(i in n)e[i]==null&&s.removeProperty(i),delete n[i];for(i in e)r=e[i],r!==n[i]&&(s.setProperty(i,r),n[i]=r);return n}function pt(t,e={},n,s){const r={};return s||W(()=>r.children=ye(t,e.children,r.children)),W(()=>e.ref&&e.ref(t)),W(()=>Os(t,e,n,!0,r,!0)),r}function Ti(t,e,n){return L(()=>t(e,n))}function Me(t,e,n,s){if(n!==void 0&&!s&&(s=[]),typeof e!="function")return ye(t,e,s,n);W(r=>ye(t,e(),r,n),s)}function Os(t,e,n,s,r={},i=!1){e||(e={});for(const o in r)if(!(o in e)){if(o==="children")continue;r[o]=Ht(t,o,null,r[o],n,i)}for(const o in e){if(o==="children"){s||ye(t,e.children);continue}const c=e[o];r[o]=Ht(t,o,c,r[o],n,i)}}function Rs(t){return t.toLowerCase().replace(/-([a-z])/g,(e,n)=>n.toUpperCase())}function Wt(t,e,n){const s=e.trim().split(/\s+/);for(let r=0,i=s.length;r<i;r++)t.classList.toggle(s[r],n)}function Ht(t,e,n,s,r,i){let o,c,a,u,l;if(e==="style")return xs(t,n,s);if(e==="classList")return Ps(t,n,s);if(n===s)return s;if(e==="ref")i||n(t);else if(e.slice(0,3)==="on:"){const h=e.slice(3);s&&t.removeEventListener(h,s),n&&t.addEventListener(h,n)}else if(e.slice(0,10)==="oncapture:"){const h=e.slice(10);s&&t.removeEventListener(h,s,!0),n&&t.addEventListener(h,n,!0)}else if(e.slice(0,2)==="on"){const h=e.slice(2).toLowerCase(),d=ys.has(h);if(!d&&s){const g=Array.isArray(s)?s[0]:s;t.removeEventListener(h,g)}(d||n)&&(Cs(t,h,n,d),d&&Pn([h]))}else if(e.slice(0,5)==="attr:")gt(t,e.slice(5),n);else if((l=e.slice(0,5)==="prop:")||(a=ps.has(e))||!r&&((u=bs(e,t.tagName))||(c=gs.has(e)))||(o=t.nodeName.includes("-"))){if(l)e=e.slice(5),c=!0;else if(A.context)return n;e==="class"||e==="className"?xn(t,n):o&&!c&&!a?t[Rs(e)]=n:t[u||e]=n}else{const h=r&&e.indexOf(":")>-1&&_s[e.split(":")[0]];h?Es(t,h,e,n):gt(t,ws[e]||e,n)}return n}function Ss(t){const e=`$$${t.type}`;let n=t.composedPath&&t.composedPath()[0]||t.target;for(t.target!==n&&Object.defineProperty(t,"target",{configurable:!0,value:n}),Object.defineProperty(t,"currentTarget",{configurable:!0,get(){return n||document}}),A.registry&&!A.done&&(A.done=_$HY.done=!0);n;){const s=n[e];if(s&&!n.disabled){const r=n[`${e}Data`];if(r!==void 0?s.call(n,r,t):s.call(n,t),t.cancelBubble)return}n=n._$host||n.parentNode||n.host}}function ye(t,e,n,s,r){if(A.context){!n&&(n=[...t.childNodes]);let c=[];for(let a=0;a<n.length;a++){const u=n[a];u.nodeType===8&&u.data.slice(0,2)==="!$"?u.remove():c.push(u)}n=c}for(;typeof n=="function";)n=n();if(e===n)return n;const i=typeof e,o=s!==void 0;if(t=o&&n[0]&&n[0].parentNode||t,i==="string"||i==="number"){if(A.context)return n;if(i==="number"&&(e=e.toString()),o){let c=n[0];c&&c.nodeType===3?c.data!==e&&(c.data=e):c=document.createTextNode(e),n=ue(t,n,s,c)}else n!==""&&typeof n=="string"?n=t.firstChild.data=e:n=t.textContent=e}else if(e==null||i==="boolean"){if(A.context)return n;n=ue(t,n,s)}else{if(i==="function")return W(()=>{let c=e();for(;typeof c=="function";)c=c();n=ye(t,c,n,s)}),()=>n;if(Array.isArray(e)){const c=[],a=n&&Array.isArray(n);if(wt(c,e,n,r))return W(()=>n=ye(t,c,n,s,!0)),()=>n;if(A.context){if(!c.length)return n;if(s===void 0)return[...t.childNodes];let u=c[0],l=[u];for(;(u=u.nextSibling)!==s;)l.push(u);return n=l}if(c.length===0){if(n=ue(t,n,s),o)return n}else a?n.length===0?qt(t,c,s):vs(t,n,c):(n&&ue(t),qt(t,c));n=c}else if(e.nodeType){if(A.context&&e.parentNode)return n=o?[e]:e;if(Array.isArray(n)){if(o)return n=ue(t,n,s,e);ue(t,n,null,e)}else n==null||n===""||!t.firstChild?t.appendChild(e):t.replaceChild(e,t.firstChild);n=e}}return n}function wt(t,e,n,s){let r=!1;for(let i=0,o=e.length;i<o;i++){let c=e[i],a=n&&n[t.length],u;if(!(c==null||c===!0||c===!1))if((u=typeof c)=="object"&&c.nodeType)t.push(c);else if(Array.isArray(c))r=wt(t,c,a)||r;else if(u==="function")if(s){for(;typeof c=="function";)c=c();r=wt(t,Array.isArray(c)?c:[c],Array.isArray(a)?a:[a])||r}else t.push(c),r=!0;else{const l=String(c);a&&a.nodeType===3&&a.data===l?t.push(a):t.push(document.createTextNode(l))}}return r}function qt(t,e,n=null){for(let s=0,r=e.length;s<r;s++)t.insertBefore(e[s],n)}function ue(t,e,n,s){if(n===void 0)return t.textContent="";const r=s||document.createTextNode("");if(e.length){let i=!1;for(let o=e.length-1;o>=0;o--){const c=e[o];if(r!==c){const a=c.parentNode===t;!i&&!o?a?t.replaceChild(r,c):t.insertBefore(r,n):a&&c.remove()}else i=!0}}else t.insertBefore(r,n);return[r]}const Ns=!1,$s="modulepreload",Ls=function(t,e){return new URL(t,e).href},Qt={},Tt=function(e,n,s){let r=Promise.resolve();if(n&&n.length>0){const i=document.getElementsByTagName("link");r=Promise.all(n.map(o=>{if(o=Ls(o,s),o in Qt)return;Qt[o]=!0;const c=o.endsWith(".css"),a=c?'[rel="stylesheet"]':"";if(!!s)for(let h=i.length-1;h>=0;h--){const d=i[h];if(d.href===o&&(!c||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${a}`))return;const l=document.createElement("link");if(l.rel=c?"stylesheet":$s,c||(l.as="script",l.crossOrigin=""),l.href=o,document.head.appendChild(l),c)return new Promise((h,d)=>{l.addEventListener("load",h),l.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${o}`)))})}))}return r.then(()=>e()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},Ts=He(),Is=["title","meta"],Jt=[],Xt=["name","http-equiv","content","charset","media"].concat(["property"]),Zt=(t,e)=>{const n=Object.fromEntries(Object.entries(t.props).filter(([s])=>e.includes(s)).sort());return(Object.hasOwn(n,"name")||Object.hasOwn(n,"property"))&&(n.name=n.name||n.property,delete n.property),t.tag+JSON.stringify(n)};function Bs(){if(!A.context){const n=document.head.querySelectorAll("[data-sm]");Array.prototype.forEach.call(n,s=>s.parentNode.removeChild(s))}const t=new Map;function e(n){if(n.ref)return n.ref;let s=document.querySelector(`[data-sm="${n.id}"]`);return s?(s.tagName.toLowerCase()!==n.tag&&(s.parentNode&&s.parentNode.removeChild(s),s=document.createElement(n.tag)),s.removeAttribute("data-sm")):s=document.createElement(n.tag),s}return{addTag(n){if(Is.indexOf(n.tag)!==-1){const i=n.tag==="title"?Jt:Xt,o=Zt(n,i);t.has(o)||t.set(o,[]);let c=t.get(o),a=c.length;c=[...c,n],t.set(o,c);let u=e(n);n.ref=u,pt(u,n.props);let l=null;for(var s=a-1;s>=0;s--)if(c[s]!=null){l=c[s];break}return u.parentNode!=document.head&&document.head.appendChild(u),l&&l.ref&&document.head.removeChild(l.ref),a}let r=e(n);return n.ref=r,pt(r,n.props),r.parentNode!=document.head&&document.head.appendChild(r),-1},removeTag(n,s){const r=n.tag==="title"?Jt:Xt,i=Zt(n,r);if(n.ref){const o=t.get(i);if(o){if(n.ref.parentNode){n.ref.parentNode.removeChild(n.ref);for(let c=s-1;c>=0;c--)o[c]!=null&&document.head.appendChild(o[c].ref)}o[s]=null,t.set(i,o)}else n.ref.parentNode&&n.ref.parentNode.removeChild(n.ref)}}}}const Ms=t=>{const e=Bs();return I(Ts.Provider,{value:e,get children(){return t.children}})};function On(){let t=new Set;function e(r){return t.add(r),()=>t.delete(r)}let n=!1;function s(r,i){if(n)return!(n=!1);const o={to:r,options:i,defaultPrevented:!1,preventDefault:()=>o.defaultPrevented=!0};for(const c of t)c.listener({...o,from:c.location,retry:a=>{a&&(n=!0),c.navigate(r,{...i,resolve:!1})}});return!o.defaultPrevented}return{subscribe:e,confirm:s}}let kt;function It(){(!window.history.state||window.history.state._depth==null)&&window.history.replaceState({...window.history.state,_depth:window.history.length-1},""),kt=window.history.state._depth}It();function js(t){return{...t,_depth:window.history.state&&window.history.state._depth}}function Ds(t,e){let n=!1;return()=>{const s=kt;It();const r=s==null?null:kt-s;if(n){n=!1;return}r&&e(r)?(n=!0,window.history.go(-r)):t()}}const Fs=/^(?:[a-z0-9]+:)?\/\//i,Ks=/^\/+|(\/)\/+$/g,Rn="http://sr";function ie(t,e=!1){const n=t.replace(Ks,"$1");return n?e||/^[?#]/.test(n)?n:"/"+n:""}function je(t,e,n){if(Fs.test(e))return;const s=ie(t),r=n&&ie(n);let i="";return!r||e.startsWith("/")?i=s:r.toLowerCase().indexOf(s.toLowerCase())!==0?i=s+r:i=r,(i||"/")+ie(e,!i)}function Us(t,e){if(t==null)throw new Error(e);return t}function zs(t,e){return ie(t).replace(/\/*(\*.*)?$/g,"")+ie(e)}function Sn(t){const e={};return t.searchParams.forEach((n,s)=>{e[s]=n}),e}function Vs(t,e,n){const[s,r]=t.split("/*",2),i=s.split("/").filter(Boolean),o=i.length;return c=>{const a=c.split("/").filter(Boolean),u=a.length-o;if(u<0||u>0&&r===void 0&&!e)return null;const l={path:o?"":"/",params:{}},h=d=>n===void 0?void 0:n[d];for(let d=0;d<o;d++){const g=i[d],m=a[d],p=g[0]===":",b=p?g.slice(1):g;if(p&&ct(m,h(b)))l.params[b]=m;else if(p||!ct(m,g))return null;l.path+=`/${m}`}if(r){const d=u?a.slice(-u).join("/"):"";if(ct(d,h(r)))l.params[r]=d;else return null}return l}}function ct(t,e){const n=s=>s.localeCompare(t,void 0,{sensitivity:"base"})===0;return e===void 0?!0:typeof e=="string"?n(e):typeof e=="function"?e(t):Array.isArray(e)?e.some(n):e instanceof RegExp?e.test(t):!1}function Gs(t){const[e,n]=t.pattern.split("/*",2),s=e.split("/").filter(Boolean);return s.reduce((r,i)=>r+(i.startsWith(":")?2:3),s.length-(n===void 0?0:1))}function Nn(t){const e=new Map,n=wn();return new Proxy({},{get(s,r){return e.has(r)||kn(n,()=>e.set(r,N(()=>t()[r]))),e.get(r)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(t())}})}function $n(t){let e=/(\/?\:[^\/]+)\?/.exec(t);if(!e)return[t];let n=t.slice(0,e.index),s=t.slice(e.index+e[0].length);const r=[n,n+=e[1]];for(;e=/^(\/\:[^\/]+)\?/.exec(s);)r.push(n+=e[1]),s=s.slice(e[0].length);return $n(s).reduce((i,o)=>[...i,...r.map(c=>c+o)],[])}const Ws=100,Ln=He(),Ze=He(),Ye=()=>Us(qe(Ln),"<A> and 'use' router primitives can be only used inside a Route."),Hs=()=>qe(Ze)||Ye().base,qs=t=>{const e=Hs();return N(()=>e.resolvePath(t()))},Qs=t=>{const e=Ye();return N(()=>{const n=t();return n!==void 0?e.renderPath(n):n})},Ii=()=>Ye().navigatorFactory(),Tn=()=>Ye().location;function Js(t,e=""){const{component:n,load:s,children:r,info:i}=t,o=!r||Array.isArray(r)&&!r.length,c={key:t,component:n,load:s,info:i};return In(t.path).reduce((a,u)=>{for(const l of $n(u)){const h=zs(e,l);let d=o?h:h.split("/*",1)[0];d=d.split("/").map(g=>g.startsWith(":")||g.startsWith("*")?g:encodeURIComponent(g)).join("/"),a.push({...c,originalPath:l,pattern:d,matcher:Vs(d,!o,t.matchFilters)})}return a},[])}function Xs(t,e=0){return{routes:t,score:Gs(t[t.length-1])*1e4-e,matcher(n){const s=[];for(let r=t.length-1;r>=0;r--){const i=t[r],o=i.matcher(n);if(!o)return null;s.unshift({...o,route:i})}return s}}}function In(t){return Array.isArray(t)?t:[t]}function Bn(t,e="",n=[],s=[]){const r=In(t);for(let i=0,o=r.length;i<o;i++){const c=r[i];if(c&&typeof c=="object"){c.hasOwnProperty("path")||(c.path="");const a=Js(c,e);for(const u of a){n.push(u);const l=Array.isArray(c.children)&&c.children.length===0;if(c.children&&!l)Bn(c.children,u.pattern,n,s);else{const h=Xs([...n],s.length);s.push(h)}n.pop()}}}return n.length?s:s.sort((i,o)=>o.score-i.score)}function Mn(t,e){for(let n=0,s=t.length;n<s;n++){const r=t[n].matcher(e);if(r)return r}return[]}function Zs(t,e){const n=new URL(Rn),s=N(a=>{const u=t();try{return new URL(u,n)}catch{return console.error(`Invalid path ${u}`),a}},n,{equals:(a,u)=>a.href===u.href}),r=N(()=>s().pathname),i=N(()=>s().search,!0),o=N(()=>s().hash),c=()=>"";return{get pathname(){return r()},get search(){return i()},get hash(){return o()},get state(){return e()},get key(){return c()},query:Nn(pn(i,()=>Sn(s())))}}let Y;function Ys(t,e,n,s={}){const{signal:[r,i],utils:o={}}=t,c=o.parsePath||(w=>w),a=o.renderPath||(w=>w),u=o.beforeLeave||On(),l=je("",s.base||"");if(l===void 0)throw new Error(`${l} is not a valid base path`);l&&!r().value&&i({value:l,replace:!0,scroll:!1});const[h,d]=B(!1),g=async w=>{d(!0);try{await ns(w)}finally{d(!1)}},[m,p]=B(r().value),[b,y]=B(r().state),P=Zs(m,b),C=[],O=B([]),S={pattern:l,params:{},path:()=>l,outlet:()=>null,resolvePath(w){return je(l,w)}};return W(()=>{const{value:w,state:v}=r();L(()=>{w!==m()&&g(()=>{Y="native",p(w),y(v),O[1]([])}).then(()=>{Y=void 0})})}),{base:S,location:P,isRouting:h,renderPath:a,parsePath:c,navigatorFactory:Q,beforeLeave:u,preloadRoute:R,singleFlight:s.singleFlight===void 0?!0:s.singleFlight,submissions:O};function q(w,v,F){L(()=>{if(typeof v=="number"){v&&(o.go?o.go(v):console.warn("Router integration does not support relative routing"));return}const{replace:nt,resolve:st,scroll:ae,state:Ee}={replace:!1,resolve:!0,scroll:!0,...F},X=st?w.resolvePath(v):je("",v);if(X===void 0)throw new Error(`Path '${v}' is not a routable path`);if(C.length>=Ws)throw new Error("Too many redirects");const Kt=m();if((X!==Kt||Ee!==b())&&!Ns){if(u.confirm(X,F)){const Hn=C.push({value:Kt,replace:nt,scroll:ae,state:b()});g(()=>{Y="navigate",p(X),y(Ee),O[1]([])}).then(()=>{C.length===Hn&&(Y=void 0,J({value:X,state:Ee}))})}}})}function Q(w){return w=w||qe(Ze)||S,(v,F)=>q(w,v,F)}function J(w){const v=C[0];v&&((w.value!==v.value||w.state!==v.state)&&i({...w,replace:v.replace,scroll:v.scroll}),C.length=0)}function R(w,v){const F=Mn(n(),w.pathname),nt=Y;Y="preload";for(let st in F){const{route:ae,params:Ee}=F[st];ae.component&&ae.component.preload&&ae.component.preload();const{load:X}=ae;v&&X&&kn(e(),()=>X({params:Ee,location:{pathname:w.pathname,search:w.search,hash:w.hash,query:Sn(w),state:null,key:""},intent:"preload"}))}Y=nt}}function er(t,e,n,s,r){const{base:i,location:o}=t,{pattern:c,component:a,load:u}=s().route,l=N(()=>s().path);a&&a.preload&&a.preload();const h=u?u({params:r,location:o,intent:Y||"initial"}):void 0;return{parent:e,pattern:c,path:l,params:r,outlet:()=>a?I(a,{params:r,location:o,data:h,get children(){return n()}}):n(),resolvePath(g){return je(i.path(),g,l())}}}const tr=t=>e=>{const{base:n}=e,s=Qe(()=>e.children),r=N(()=>Bn(e.root?{component:e.root,load:e.rootLoad,children:s()}:s(),e.base||""));let i;const o=Ys(t,()=>i,r,{base:n,singleFlight:e.singleFlight});return t.create&&t.create(o),I(Ln.Provider,{value:o,get children(){return[N(()=>(i=wn())&&null),I(nr,{routerState:o,get branches(){return r()}})]}})};function nr(t){const e=N(()=>Mn(t.branches,t.routerState.location.pathname)),n=Nn(()=>{const o=e(),c={};for(let a=0;a<o.length;a++)Object.assign(c,o[a].params);return c}),s=[];let r;const i=N(pn(e,(o,c,a)=>{let u=c&&o.length===c.length;const l=[];for(let h=0,d=o.length;h<d;h++){const g=c&&c[h],m=o[h];a&&g&&m.route.key===g.route.key?l[h]=a[h]:(u=!1,s[h]&&s[h](),Pe(p=>{s[h]=p,l[h]=er(t.routerState,l[h-1]||t.routerState.base,sr(()=>i()[h+1]),()=>e()[h],n)}))}return s.splice(o.length).forEach(h=>h()),a&&u?a:(r=l[0],l)}));return I(Lt,{get when(){return i()&&r},keyed:!0,children:o=>I(Ze.Provider,{value:o,get children(){return o.outlet()}})})}const sr=t=>()=>I(Lt,{get when(){return t()},keyed:!0,children:e=>I(Ze.Provider,{value:e,get children(){return e.outlet()}})}),lt=t=>{const e=Qe(()=>t.children);return mt(t,{get children(){return e()}})};function rr([t,e],n,s){return[n?()=>n(t()):t,s?r=>e(s(r)):e]}function ir(t){if(t==="#")return null;try{return document.querySelector(t)}catch{return null}}function or(t){let e=!1;const n=r=>typeof r=="string"?{value:r}:r,s=rr(B(n(t.get()),{equals:(r,i)=>r.value===i.value}),void 0,r=>(!e&&t.set(r),r));return t.init&&St(t.init((r=t.get())=>{e=!0,s[1](n(r)),e=!1})),tr({signal:s,create:t.create,utils:t.utils})}function cr(t,e,n){return t.addEventListener(e,n),()=>t.removeEventListener(e,n)}function lr(t,e){const n=ir(`#${t}`);n?n.scrollIntoView():e&&window.scrollTo(0,0)}const ar=new Map;function ur(t=!0,e=!1,n="/_server"){return s=>{const r=s.base.path(),i=s.navigatorFactory(s.base);let o={};function c(m){return m.namespaceURI==="http://www.w3.org/2000/svg"}function a(m){if(m.defaultPrevented||m.button!==0||m.metaKey||m.altKey||m.ctrlKey||m.shiftKey)return;const p=m.composedPath().find(S=>S instanceof Node&&S.nodeName.toUpperCase()==="A");if(!p||e&&!p.hasAttribute("link"))return;const b=c(p),y=b?p.href.baseVal:p.href;if((b?p.target.baseVal:p.target)||!y&&!p.hasAttribute("state"))return;const C=(p.getAttribute("rel")||"").split(/\s+/);if(p.hasAttribute("download")||C&&C.includes("external"))return;const O=b?new URL(y,document.baseURI):new URL(y);if(!(O.origin!==window.location.origin||r&&O.pathname&&!O.pathname.toLowerCase().startsWith(r.toLowerCase())))return[p,O]}function u(m){const p=a(m);if(!p)return;const[b,y]=p,P=s.parsePath(y.pathname+y.search+y.hash),C=b.getAttribute("state");m.preventDefault(),i(P,{resolve:!1,replace:b.hasAttribute("replace"),scroll:!b.hasAttribute("noscroll"),state:C&&JSON.parse(C)})}function l(m){const p=a(m);if(!p)return;const[b,y]=p;o[y.pathname]||s.preloadRoute(y,b.getAttribute("preload")!=="false")}function h(m){const p=a(m);if(!p)return;const[b,y]=p;o[y.pathname]||(o[y.pathname]=setTimeout(()=>{s.preloadRoute(y,b.getAttribute("preload")!=="false"),delete o[y.pathname]},200))}function d(m){const p=a(m);if(!p)return;const[,b]=p;o[b.pathname]&&(clearTimeout(o[b.pathname]),delete o[b.pathname])}function g(m){let p=m.submitter&&m.submitter.hasAttribute("formaction")?m.submitter.getAttribute("formaction"):m.target.getAttribute("action");if(!p)return;if(!p.startsWith("https://action/")){const y=new URL(p,Rn);if(p=s.parsePath(y.pathname+y.search),!p.startsWith(n))return}if(m.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const b=ar.get(p);if(b){m.preventDefault();const y=new FormData(m.target);m.submitter&&m.submitter.name&&y.append(m.submitter.name,m.submitter.value),b.call(s,y)}}Pn(["click","submit"]),document.addEventListener("click",u),t&&(document.addEventListener("mouseover",h),document.addEventListener("mouseout",d),document.addEventListener("focusin",l),document.addEventListener("touchstart",l)),document.addEventListener("submit",g),St(()=>{document.removeEventListener("click",u),t&&(document.removeEventListener("mouseover",h),document.removeEventListener("mouseout",d),document.removeEventListener("focusin",l),document.removeEventListener("touchstart",l)),document.removeEventListener("submit",g)})}}function hr(t){const e=t.replace(/^.*?#/,"");if(!e.startsWith("/")){const[,n="/"]=window.location.hash.split("#",2);return`${n}#${e}`}return e}function fr(t){const e=()=>window.location.hash.slice(1),n=On();return or({get:e,set({value:s,replace:r,scroll:i,state:o}){r?window.history.replaceState(js(o),"","#"+s):window.location.hash=s;const c=s.indexOf("#"),a=c>=0?s.slice(c+1):"";lr(a,i),It()},init:s=>cr(window,"hashchange",Ds(s,r=>!n.confirm(r&&r<0?r:e()))),create:ur(t.preload,t.explicitLinks,t.actionBase),utils:{go:s=>window.history.go(s),renderPath:s=>`#${s}`,parsePath:hr,beforeLeave:n}})(t)}var dr=Cn("<a>");function Yt(t){t=mt({inactiveClass:"inactive",activeClass:"active"},t);const[,e]=hs(t,["href","state","class","activeClass","inactiveClass","end"]),n=qs(()=>t.href),s=Qs(n),r=Tn(),i=N(()=>{const o=n();if(o===void 0)return[!1,!1];const c=ie(o.split(/[?#]/,1)[0]).toLowerCase(),a=ie(r.pathname).toLowerCase();return[t.end?c===a:a.startsWith(c),c===a]});return(()=>{var o=dr();return pt(o,mt(e,{get href(){return s()||t.href},get state(){return JSON.stringify(t.state)},get classList(){return{...t.class&&{[t.class]:!0},[t.inactiveClass]:!i()[0],[t.activeClass]:i()[0],...e.classList}},link:"",get"aria-current"(){return i()[1]?"page":void 0}}),!1,!1),o})()}const mr=Symbol("store-raw"),gr=Symbol("store-node"),he=Symbol("store-has"),pr=Symbol("store-self");function Se(t){let e;return t!=null&&typeof t=="object"&&(t[Re]||!(e=Object.getPrototypeOf(t))||e===Object.prototype||Array.isArray(t))}function bt(t,e=new Set){let n,s,r,i;if(n=t!=null&&t[mr])return n;if(!Se(t)||e.has(t))return t;if(Array.isArray(t)){Object.isFrozen(t)?t=t.slice(0):e.add(t);for(let o=0,c=t.length;o<c;o++)r=t[o],(s=bt(r,e))!==r&&(t[o]=s)}else{Object.isFrozen(t)?t=Object.assign({},t):e.add(t);const o=Object.keys(t),c=Object.getOwnPropertyDescriptors(t);for(let a=0,u=o.length;a<u;a++)i=o[a],!c[i].get&&(r=t[i],(s=bt(r,e))!==r&&(t[i]=s))}return t}function wr(t,e){let n=t[e];return n||Object.defineProperty(t,e,{value:n=Object.create(null)}),n}function en(t,e,n){if(t[e])return t[e];const[s,r]=B(n,{equals:!1,internal:!0});return s.$=r,t[e]=s}function Z(t,e,n,s=!1){if(!s&&t[e]===n)return;const r=t[e],i=t.length;n===void 0?(delete t[e],t[he]&&t[he][e]&&r!==void 0&&t[he][e].$()):(t[e]=n,t[he]&&t[he][e]&&r===void 0&&t[he][e].$());let o=wr(t,gr),c;if((c=en(o,e,r))&&c.$(()=>n),Array.isArray(t)&&t.length!==i){for(let a=t.length;a<i;a++)(c=o[a])&&c.$();(c=en(o,"length",i))&&c.$(t.length)}(c=o[pr])&&c.$()}const yt=Symbol("store-root");function me(t,e,n,s,r){const i=e[n];if(t===i)return;const o=Array.isArray(t);if(n!==yt&&(!Se(t)||!Se(i)||o!==Array.isArray(i)||r&&t[r]!==i[r])){Z(e,n,t);return}if(o){if(t.length&&i.length&&(!s||r&&t[0]&&t[0][r]!=null)){let u,l,h,d,g,m,p,b;for(h=0,d=Math.min(i.length,t.length);h<d&&(i[h]===t[h]||r&&i[h]&&t[h]&&i[h][r]===t[h][r]);h++)me(t[h],i,h,s,r);const y=new Array(t.length),P=new Map;for(d=i.length-1,g=t.length-1;d>=h&&g>=h&&(i[d]===t[g]||r&&i[h]&&t[h]&&i[d][r]===t[g][r]);d--,g--)y[g]=i[d];if(h>g||h>d){for(l=h;l<=g;l++)Z(i,l,t[l]);for(;l<t.length;l++)Z(i,l,y[l]),me(t[l],i,l,s,r);i.length>t.length&&Z(i,"length",t.length);return}for(p=new Array(g+1),l=g;l>=h;l--)m=t[l],b=r&&m?m[r]:m,u=P.get(b),p[l]=u===void 0?-1:u,P.set(b,l);for(u=h;u<=d;u++)m=i[u],b=r&&m?m[r]:m,l=P.get(b),l!==void 0&&l!==-1&&(y[l]=i[u],l=p[l],P.set(b,l));for(l=h;l<t.length;l++)l in y?(Z(i,l,y[l]),me(t[l],i,l,s,r)):Z(i,l,t[l])}else for(let u=0,l=t.length;u<l;u++)me(t[u],i,u,s,r);i.length>t.length&&Z(i,"length",t.length);return}const c=Object.keys(t);for(let u=0,l=c.length;u<l;u++)me(t[c[u]],i,c[u],s,r);const a=Object.keys(i);for(let u=0,l=a.length;u<l;u++)t[a[u]]===void 0&&Z(i,a[u],void 0)}function kr(t,e={}){const{merge:n,key:s="id"}=e,r=bt(t);return i=>{if(!Se(i)||!Se(r))return r;const o=me(r,{[yt]:i},yt,n,s);return o===void 0?i:o}}var br=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,n)=>(typeof require<"u"?require:e)[n]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')}),yr=t=>(typeof t.clear=="function"||(t.clear=()=>{let e;for(;e=t.key(0);)t.removeItem(e)}),t),_r=["domain","expires","path","secure","httpOnly","maxAge","sameSite"];function vr(t){if(!t)return"";let e="";for(const n in t){if(!_r.includes(n))continue;const s=t[n];e+=s instanceof Date?`; ${n}=${s.toUTCString()}`:typeof s=="boolean"?`; ${n}`:`; ${n}=${s}`}return e}function Ar(t,e){var n;return((n=t.match(`(^|;)\\s*${e}\\s*=\\s*([^;]+)`))==null?void 0:n.pop())??null}var tn;try{tn=br("solid-start/server").useRequest}catch{tn=()=>(console.warn("It seems you attempt to use cookieStorage on the server without having solid-start installed or use vite."),{request:{headers:{get:()=>""}}})}var fe=yr({_read:()=>document.cookie,_write:(t,e,n)=>{document.cookie=`${t}=${e}${vr(n)}`},getItem:(t,e)=>Ar(fe._read(e),t),setItem:(t,e,n)=>{fe._write(t,e,n);{const r=Object.assign(new Event("storage"),{key:t,oldValue:null,newValue:e,url:globalThis.document.URL,storageArea:fe});window.dispatchEvent(r)}},removeItem:(t,e)=>{fe._write(t,"deleted",{...e,expires:new Date(0)})},key:(t,e)=>{let n=null,s=0;return fe._read(e).replace(/(?:^|;)\s*(.+?)\s*=\s*[^;]+/g,(r,i)=>(!n&&i&&s++===t&&(n=i),"")),n},getLength:t=>{let e=0;return fe._read(t).replace(/(?:^|;)\s*.+?\s*=\s*[^;]+/g,n=>(e+=n?1:0,"")),e},get length(){return this.getLength()}});function Ne(t,e={}){const n=e.storage||globalThis.localStorage;if(!n)return t;const s=e.storageOptions,r=e.name||`storage-${ds()}`,i=e.serialize||JSON.stringify.bind(JSON),o=e.deserialize||JSON.parse.bind(JSON),c=n.getItem(r,s),a=typeof t[0]=="function"?l=>t[1](()=>o(l)):l=>t[1](kr(o(l)));let u=!0;return c instanceof Promise?c.then(l=>u&&l&&a(l)):c&&a(c),[t[0],typeof t[0]=="function"?l=>{const h=t[1](l);return l?n.setItem(r,i(h),s):n.removeItem(r,s),u=!1,h}:(...l)=>{t[1](...l);const h=i(L(()=>t[0]));n.setItem(r,h,s),u=!1}]}const ze=["a","b","c","d","e","f","g","h"],jn=["1","2","3","4","5","6","7","8"],ce=["white","black"],U=["pawn","knight","bishop","rook","queen","king"],Er=["a","h"],$e=t=>"role"in t,k=t=>t!==void 0,M=t=>t==="white"?"black":"white",le=t=>t>>3,K=t=>t&7,_t=(t,e)=>0<=t&&t<8&&0<=e&&e<8?t+8*e:void 0,oe=t=>{switch(t){case"pawn":return"p";case"knight":return"n";case"bishop":return"b";case"rook":return"r";case"queen":return"q";case"king":return"k"}};function pe(t){switch(t.toLowerCase()){case"p":return"pawn";case"n":return"knight";case"b":return"bishop";case"r":return"rook";case"q":return"queen";case"k":return"king";default:return}}function we(t){if(t.length===2)return _t(t.charCodeAt(0)-97,t.charCodeAt(1)-49)}const ke=t=>ze[K(t)]+jn[le(t)],Cr=t=>{if(t[1]==="@"&&t.length===4){const e=pe(t[0]),n=we(t.slice(2));if(e&&k(n))return{role:e,to:n}}else if(t.length===4||t.length===5){const e=we(t.slice(0,2)),n=we(t.slice(2,4));let s;if(t.length===5&&(s=pe(t[4]),!s))return;if(k(e)&&k(n))return{from:e,to:n,promotion:s}}},nn=t=>$e(t)?`${oe(t.role).toUpperCase()}@${ke(t.to)}`:ke(t.from)+ke(t.to)+(t.promotion?oe(t.promotion):""),Bt=(t,e)=>t==="white"?e==="a"?2:6:e==="a"?58:62,Mt=(t,e)=>t==="white"?e==="a"?3:5:e==="a"?59:61,sn=t=>(t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),Math.imul(t+(t>>>4)&252645135,16843009)>>24),vt=t=>(t=t>>>8&16711935|(t&16711935)<<8,t>>>16&65535|(t&65535)<<16),rn=t=>(t=t>>>1&1431655765|(t&1431655765)<<1,t=t>>>2&858993459|(t&858993459)<<2,t=t>>>4&252645135|(t&252645135)<<4,vt(t));class f{constructor(e,n){this.lo=e|0,this.hi=n|0}static fromSquare(e){return e>=32?new f(0,1<<e-32):new f(1<<e,0)}static fromRank(e){return new f(255,0).shl64(8*e)}static fromFile(e){return new f(16843009<<e,16843009<<e)}static empty(){return new f(0,0)}static full(){return new f(4294967295,4294967295)}static corners(){return new f(129,2164260864)}static center(){return new f(402653184,24)}static backranks(){return new f(255,4278190080)}static backrank(e){return e==="white"?new f(255,0):new f(0,4278190080)}static lightSquares(){return new f(1437226410,1437226410)}static darkSquares(){return new f(2857740885,2857740885)}complement(){return new f(~this.lo,~this.hi)}xor(e){return new f(this.lo^e.lo,this.hi^e.hi)}union(e){return new f(this.lo|e.lo,this.hi|e.hi)}intersect(e){return new f(this.lo&e.lo,this.hi&e.hi)}diff(e){return new f(this.lo&~e.lo,this.hi&~e.hi)}intersects(e){return this.intersect(e).nonEmpty()}isDisjoint(e){return this.intersect(e).isEmpty()}supersetOf(e){return e.diff(this).isEmpty()}subsetOf(e){return this.diff(e).isEmpty()}shr64(e){return e>=64?f.empty():e>=32?new f(this.hi>>>e-32,0):e>0?new f(this.lo>>>e^this.hi<<32-e,this.hi>>>e):this}shl64(e){return e>=64?f.empty():e>=32?new f(0,this.lo<<e-32):e>0?new f(this.lo<<e,this.hi<<e^this.lo>>>32-e):this}bswap64(){return new f(vt(this.hi),vt(this.lo))}rbit64(){return new f(rn(this.hi),rn(this.lo))}minus64(e){const n=this.lo-e.lo,s=(n&e.lo&1)+(e.lo>>>1)+(n>>>1)>>>31;return new f(n,this.hi-(e.hi+s))}equals(e){return this.lo===e.lo&&this.hi===e.hi}size(){return sn(this.lo)+sn(this.hi)}isEmpty(){return this.lo===0&&this.hi===0}nonEmpty(){return this.lo!==0||this.hi!==0}has(e){return(e>=32?this.hi&1<<e-32:this.lo&1<<e)!==0}set(e,n){return n?this.with(e):this.without(e)}with(e){return e>=32?new f(this.lo,this.hi|1<<e-32):new f(this.lo|1<<e,this.hi)}without(e){return e>=32?new f(this.lo,this.hi&~(1<<e-32)):new f(this.lo&~(1<<e),this.hi)}toggle(e){return e>=32?new f(this.lo,this.hi^1<<e-32):new f(this.lo^1<<e,this.hi)}last(){if(this.hi!==0)return 63-Math.clz32(this.hi);if(this.lo!==0)return 31-Math.clz32(this.lo)}first(){if(this.lo!==0)return 31-Math.clz32(this.lo&-this.lo);if(this.hi!==0)return 63-Math.clz32(this.hi&-this.hi)}withoutFirst(){return this.lo!==0?new f(this.lo&this.lo-1,this.hi):new f(0,this.hi&this.hi-1)}moreThanOne(){return this.hi!==0&&this.lo!==0||(this.lo&this.lo-1)!==0||(this.hi&this.hi-1)!==0}singleSquare(){return this.moreThanOne()?void 0:this.last()}*[Symbol.iterator](){let e=this.lo,n=this.hi;for(;e!==0;){const s=31-Math.clz32(e&-e);e^=1<<s,yield s}for(;n!==0;){const s=31-Math.clz32(n&-n);n^=1<<s,yield 32+s}}*reversed(){let e=this.lo,n=this.hi;for(;n!==0;){const s=31-Math.clz32(n);n^=1<<s,yield 32+s}for(;e!==0;){const s=31-Math.clz32(e);e^=1<<s,yield s}}}const Ve=(t,e)=>{let n=f.empty();for(const s of e){const r=t+s;0<=r&&r<64&&Math.abs(K(t)-K(r))<=2&&(n=n.with(r))}return n},te=t=>{const e=[];for(let n=0;n<64;n++)e[n]=t(n);return e},Pr=te(t=>Ve(t,[-9,-8,-7,-1,1,7,8,9])),xr=te(t=>Ve(t,[-17,-15,-10,-6,6,10,15,17])),Or={white:te(t=>Ve(t,[7,9])),black:te(t=>Ve(t,[-7,-9]))},et=t=>Pr[t],tt=t=>xr[t],Ie=(t,e)=>Or[t][e],At=te(t=>f.fromFile(K(t)).without(t)),Et=te(t=>f.fromRank(le(t)).without(t)),Ct=te(t=>{const e=new f(134480385,2151686160),n=8*(le(t)-K(t));return(n>=0?e.shl64(n):e.shr64(-n)).without(t)}),Pt=te(t=>{const e=new f(270549120,16909320),n=8*(le(t)+K(t)-7);return(n>=0?e.shl64(n):e.shr64(-n)).without(t)}),xt=(t,e,n)=>{let s=n.intersect(e),r=s.bswap64();return s=s.minus64(t),r=r.minus64(t.bswap64()),s.xor(r.bswap64()).intersect(e)},Rr=(t,e)=>xt(f.fromSquare(t),At[t],e),Sr=(t,e)=>{const n=Et[t];let s=e.intersect(n),r=s.rbit64();return s=s.minus64(f.fromSquare(t)),r=r.minus64(f.fromSquare(63-t)),s.xor(r.rbit64()).intersect(n)},_e=(t,e)=>{const n=f.fromSquare(t);return xt(n,Ct[t],e).xor(xt(n,Pt[t],e))},ve=(t,e)=>Rr(t,e).xor(Sr(t,e)),jt=(t,e)=>_e(t,e).xor(ve(t,e)),Nr=(t,e,n)=>{switch(t.role){case"pawn":return Ie(t.color,e);case"knight":return tt(e);case"bishop":return _e(e,n);case"rook":return ve(e,n);case"queen":return jt(e,n);case"king":return et(e)}},Dn=(t,e)=>{const n=f.fromSquare(e);return Et[t].intersects(n)?Et[t].with(t):Pt[t].intersects(n)?Pt[t].with(t):Ct[t].intersects(n)?Ct[t].with(t):At[t].intersects(n)?At[t].with(t):f.empty()},Le=(t,e)=>Dn(t,e).intersect(f.full().shl64(t).xor(f.full().shl64(e))).withoutFirst();class be{constructor(){}static default(){const e=new be;return e.reset(),e}reset(){this.occupied=new f(65535,4294901760),this.promoted=f.empty(),this.white=new f(65535,0),this.black=new f(0,4294901760),this.pawn=new f(65280,16711680),this.knight=new f(66,1107296256),this.bishop=new f(36,603979776),this.rook=new f(129,2164260864),this.queen=new f(8,134217728),this.king=new f(16,268435456)}static empty(){const e=new be;return e.clear(),e}clear(){this.occupied=f.empty(),this.promoted=f.empty();for(const e of ce)this[e]=f.empty();for(const e of U)this[e]=f.empty()}clone(){const e=new be;e.occupied=this.occupied,e.promoted=this.promoted;for(const n of ce)e[n]=this[n];for(const n of U)e[n]=this[n];return e}getColor(e){if(this.white.has(e))return"white";if(this.black.has(e))return"black"}getRole(e){for(const n of U)if(this[n].has(e))return n}get(e){const n=this.getColor(e);if(!n)return;const s=this.getRole(e),r=this.promoted.has(e);return{color:n,role:s,promoted:r}}take(e){const n=this.get(e);return n&&(this.occupied=this.occupied.without(e),this[n.color]=this[n.color].without(e),this[n.role]=this[n.role].without(e),n.promoted&&(this.promoted=this.promoted.without(e))),n}set(e,n){const s=this.take(e);return this.occupied=this.occupied.with(e),this[n.color]=this[n.color].with(e),this[n.role]=this[n.role].with(e),n.promoted&&(this.promoted=this.promoted.with(e)),s}has(e){return this.occupied.has(e)}*[Symbol.iterator](){for(const e of this.occupied)yield[e,this.get(e)]}pieces(e,n){return this[e].intersect(this[n])}rooksAndQueens(){return this.rook.union(this.queen)}bishopsAndQueens(){return this.bishop.union(this.queen)}kingOf(e){return this.pieces(e,"king").singleSquare()}}class z{constructor(){}static empty(){const e=new z;for(const n of U)e[n]=0;return e}static fromBoard(e,n){const s=new z;for(const r of U)s[r]=e.pieces(n,r).size();return s}clone(){const e=new z;for(const n of U)e[n]=this[n];return e}equals(e){return U.every(n=>this[n]===e[n])}add(e){const n=new z;for(const s of U)n[s]=this[s]+e[s];return n}subtract(e){const n=new z;for(const s of U)n[s]=this[s]-e[s];return n}nonEmpty(){return U.some(e=>this[e]>0)}isEmpty(){return!this.nonEmpty()}hasPawns(){return this.pawn>0}hasNonPawns(){return this.knight>0||this.bishop>0||this.rook>0||this.queen>0||this.king>0}size(){return this.pawn+this.knight+this.bishop+this.rook+this.queen+this.king}}class ne{constructor(e,n){this.white=e,this.black=n}static empty(){return new ne(z.empty(),z.empty())}static fromBoard(e){return new ne(z.fromBoard(e,"white"),z.fromBoard(e,"black"))}clone(){return new ne(this.white.clone(),this.black.clone())}equals(e){return this.white.equals(e.white)&&this.black.equals(e.black)}add(e){return new ne(this.white.add(e.white),this.black.add(e.black))}subtract(e){return new ne(this.white.subtract(e.white),this.black.subtract(e.black))}count(e){return this.white[e]+this.black[e]}size(){return this.white.size()+this.black.size()}isEmpty(){return this.white.isEmpty()&&this.black.isEmpty()}nonEmpty(){return!this.isEmpty()}hasPawns(){return this.white.hasPawns()||this.black.hasPawns()}hasNonPawns(){return this.white.hasNonPawns()||this.black.hasNonPawns()}}class Te{constructor(e,n){this.white=e,this.black=n}static default(){return new Te(3,3)}clone(){return new Te(this.white,this.black)}equals(e){return this.white===e.white&&this.black===e.black}}class Fn{unwrap(e,n){const s=this._chain(r=>_.ok(e?e(r):r),r=>n?_.ok(n(r)):_.err(r));if(s.isErr)throw s.error;return s.value}map(e,n){return this._chain(s=>_.ok(e(s)),s=>_.err(n?n(s):s))}chain(e,n){return this._chain(e,n||(s=>_.err(s)))}}class $r extends Fn{constructor(e){super(),this.value=void 0,this.isOk=!0,this.isErr=!1,this.value=e}_chain(e,n){return e(this.value)}}class Lr extends Fn{constructor(e){super(),this.error=void 0,this.isOk=!1,this.isErr=!0,this.error=e}_chain(e,n){return n(this.error)}}var _;(function(t){t.ok=function(e){return new $r(e)},t.err=function(e){return new Lr(e||new Error)},t.all=function(e){if(Array.isArray(e)){const r=[];for(let i=0;i<e.length;i++){const o=e[i];if(o.isErr)return o;r.push(o.value)}return t.ok(r)}const n={},s=Object.keys(e);for(let r=0;r<s.length;r++){const i=e[s[r]];if(i.isErr)return i;n[s[r]]=i.value}return t.ok(n)}})(_||(_={}));var ee;(function(t){t.Empty="ERR_EMPTY",t.OppositeCheck="ERR_OPPOSITE_CHECK",t.PawnsOnBackrank="ERR_PAWNS_ON_BACKRANK",t.Kings="ERR_KINGS",t.Variant="ERR_VARIANT"})(ee||(ee={}));class de extends Error{}const Tr=(t,e,n,s)=>n[e].intersect(ve(t,s).intersect(n.rooksAndQueens()).union(_e(t,s).intersect(n.bishopsAndQueens())).union(tt(t).intersect(n.knight)).union(et(t).intersect(n.king)).union(Ie(M(e),t).intersect(n.pawn)));class re{constructor(){}static default(){const e=new re;return e.castlingRights=f.corners(),e.rook={white:{a:0,h:7},black:{a:56,h:63}},e.path={white:{a:new f(14,0),h:new f(96,0)},black:{a:new f(0,234881024),h:new f(0,1610612736)}},e}static empty(){const e=new re;return e.castlingRights=f.empty(),e.rook={white:{a:void 0,h:void 0},black:{a:void 0,h:void 0}},e.path={white:{a:f.empty(),h:f.empty()},black:{a:f.empty(),h:f.empty()}},e}clone(){const e=new re;return e.castlingRights=this.castlingRights,e.rook={white:{a:this.rook.white.a,h:this.rook.white.h},black:{a:this.rook.black.a,h:this.rook.black.h}},e.path={white:{a:this.path.white.a,h:this.path.white.h},black:{a:this.path.black.a,h:this.path.black.h}},e}add(e,n,s,r){const i=Bt(e,n),o=Mt(e,n);this.castlingRights=this.castlingRights.with(r),this.rook[e][n]=r,this.path[e][n]=Le(r,o).with(o).union(Le(s,i).with(i)).without(s).without(r)}static fromSetup(e){const n=re.empty(),s=e.castlingRights.intersect(e.board.rook);for(const r of ce){const i=f.backrank(r),o=e.board.kingOf(r);if(!k(o)||!i.has(o))continue;const c=s.intersect(e.board[r]).intersect(i),a=c.first();k(a)&&a<o&&n.add(r,"a",o,a);const u=c.last();k(u)&&o<u&&n.add(r,"h",o,u)}return n}discardRook(e){if(this.castlingRights.has(e)){this.castlingRights=this.castlingRights.without(e);for(const n of ce)for(const s of Er)this.rook[n][s]===e&&(this.rook[n][s]=void 0)}}discardColor(e){this.castlingRights=this.castlingRights.diff(f.backrank(e)),this.rook[e].a=void 0,this.rook[e].h=void 0}}class Ir{constructor(e){this.rules=e}reset(){this.board=be.default(),this.pockets=void 0,this.turn="white",this.castles=re.default(),this.epSquare=void 0,this.remainingChecks=void 0,this.halfmoves=0,this.fullmoves=1}setupUnchecked(e){this.board=e.board.clone(),this.board.promoted=f.empty(),this.pockets=void 0,this.turn=e.turn,this.castles=re.fromSetup(e),this.epSquare=Br(this,e.epSquare),this.remainingChecks=void 0,this.halfmoves=e.halfmoves,this.fullmoves=e.fullmoves}kingAttackers(e,n,s){return Tr(e,n,this.board,s)}playCaptureAt(e,n){this.halfmoves=0,n.role==="rook"&&this.castles.discardRook(e),this.pockets&&this.pockets[M(n.color)][n.promoted?"pawn":n.role]++}ctx(){const e=this.isVariantEnd(),n=this.board.kingOf(this.turn);if(!k(n))return{king:n,blockers:f.empty(),checkers:f.empty(),variantEnd:e,mustCapture:!1};const s=ve(n,f.empty()).intersect(this.board.rooksAndQueens()).union(_e(n,f.empty()).intersect(this.board.bishopsAndQueens())).intersect(this.board[M(this.turn)]);let r=f.empty();for(const o of s){const c=Le(n,o).intersect(this.board.occupied);c.moreThanOne()||(r=r.union(c))}const i=this.kingAttackers(n,M(this.turn),this.board.occupied);return{king:n,blockers:r,checkers:i,variantEnd:e,mustCapture:!1}}clone(){var e,n;const s=new this.constructor;return s.board=this.board.clone(),s.pockets=(e=this.pockets)===null||e===void 0?void 0:e.clone(),s.turn=this.turn,s.castles=this.castles.clone(),s.epSquare=this.epSquare,s.remainingChecks=(n=this.remainingChecks)===null||n===void 0?void 0:n.clone(),s.halfmoves=this.halfmoves,s.fullmoves=this.fullmoves,s}validate(){if(this.board.occupied.isEmpty())return _.err(new de(ee.Empty));if(this.board.king.size()!==2)return _.err(new de(ee.Kings));if(!k(this.board.kingOf(this.turn)))return _.err(new de(ee.Kings));const e=this.board.kingOf(M(this.turn));return k(e)?this.kingAttackers(e,this.turn,this.board.occupied).nonEmpty()?_.err(new de(ee.OppositeCheck)):f.backranks().intersects(this.board.pawn)?_.err(new de(ee.PawnsOnBackrank)):_.ok(void 0):_.err(new de(ee.Kings))}dropDests(e){return f.empty()}dests(e,n){if(n=n||this.ctx(),n.variantEnd)return f.empty();const s=this.board.get(e);if(!s||s.color!==this.turn)return f.empty();let r,i;if(s.role==="pawn"){r=Ie(this.turn,e).intersect(this.board[M(this.turn)]);const o=this.turn==="white"?8:-8,c=e+o;if(0<=c&&c<64&&!this.board.occupied.has(c)){r=r.with(c);const a=this.turn==="white"?e<16:e>=48,u=c+o;a&&!this.board.occupied.has(u)&&(r=r.with(u))}k(this.epSquare)&&jr(this,e,n)&&(i=f.fromSquare(this.epSquare))}else s.role==="bishop"?r=_e(e,this.board.occupied):s.role==="knight"?r=tt(e):s.role==="rook"?r=ve(e,this.board.occupied):s.role==="queen"?r=jt(e,this.board.occupied):r=et(e);if(r=r.diff(this.board[this.turn]),k(n.king)){if(s.role==="king"){const o=this.board.occupied.without(e);for(const c of r)this.kingAttackers(c,M(this.turn),o).nonEmpty()&&(r=r.without(c));return r.union(on(this,"a",n)).union(on(this,"h",n))}if(n.checkers.nonEmpty()){const o=n.checkers.singleSquare();if(!k(o))return f.empty();r=r.intersect(Le(o,n.king).with(o))}n.blockers.has(e)&&(r=r.intersect(Dn(e,n.king)))}return i&&(r=r.union(i)),r}isVariantEnd(){return!1}variantOutcome(e){}hasInsufficientMaterial(e){return this.board[e].intersect(this.board.pawn.union(this.board.rooksAndQueens())).nonEmpty()?!1:this.board[e].intersects(this.board.knight)?this.board[e].size()<=2&&this.board[M(e)].diff(this.board.king).diff(this.board.queen).isEmpty():this.board[e].intersects(this.board.bishop)?(!this.board.bishop.intersects(f.darkSquares())||!this.board.bishop.intersects(f.lightSquares()))&&this.board.pawn.isEmpty()&&this.board.knight.isEmpty():!0}toSetup(){var e,n;return{board:this.board.clone(),pockets:(e=this.pockets)===null||e===void 0?void 0:e.clone(),turn:this.turn,castlingRights:this.castles.castlingRights,epSquare:Mr(this),remainingChecks:(n=this.remainingChecks)===null||n===void 0?void 0:n.clone(),halfmoves:Math.min(this.halfmoves,150),fullmoves:Math.min(Math.max(this.fullmoves,1),9999)}}isInsufficientMaterial(){return ce.every(e=>this.hasInsufficientMaterial(e))}hasDests(e){e=e||this.ctx();for(const n of this.board[this.turn])if(this.dests(n,e).nonEmpty())return!0;return this.dropDests(e).nonEmpty()}isLegal(e,n){if($e(e))return!this.pockets||this.pockets[this.turn][e.role]<=0||e.role==="pawn"&&f.backranks().has(e.to)?!1:this.dropDests(n).has(e.to);{if(e.promotion==="pawn"||e.promotion==="king"&&this.rules!=="antichess"||!!e.promotion!==(this.board.pawn.has(e.from)&&f.backranks().has(e.to)))return!1;const s=this.dests(e.from,n);return s.has(e.to)||s.has(Dr(this,e).to)}}isCheck(){const e=this.board.kingOf(this.turn);return k(e)&&this.kingAttackers(e,M(this.turn),this.board.occupied).nonEmpty()}isEnd(e){return(e?e.variantEnd:this.isVariantEnd())?!0:this.isInsufficientMaterial()||!this.hasDests(e)}isCheckmate(e){return e=e||this.ctx(),!e.variantEnd&&e.checkers.nonEmpty()&&!this.hasDests(e)}isStalemate(e){return e=e||this.ctx(),!e.variantEnd&&e.checkers.isEmpty()&&!this.hasDests(e)}outcome(e){const n=this.variantOutcome(e);return n||(e=e||this.ctx(),this.isCheckmate(e)?{winner:M(this.turn)}:this.isInsufficientMaterial()||this.isStalemate(e)?{winner:void 0}:void 0)}allDests(e){e=e||this.ctx();const n=new Map;if(e.variantEnd)return n;for(const s of this.board[this.turn])n.set(s,this.dests(s,e));return n}play(e){const n=this.turn,s=this.epSquare,r=Un(this,e);if(this.epSquare=void 0,this.halfmoves+=1,n==="black"&&(this.fullmoves+=1),this.turn=M(n),$e(e))this.board.set(e.to,{role:e.role,color:n}),this.pockets&&this.pockets[n][e.role]--,e.role==="pawn"&&(this.halfmoves=0);else{const i=this.board.take(e.from);if(!i)return;let o;if(i.role==="pawn"){this.halfmoves=0,e.to===s&&(o=this.board.take(e.to+(n==="white"?-8:8)));const c=e.from-e.to;Math.abs(c)===16&&8<=e.from&&e.from<=55&&(this.epSquare=e.from+e.to>>1),e.promotion&&(i.role=e.promotion,i.promoted=!!this.pockets)}else if(i.role==="rook")this.castles.discardRook(e.from);else if(i.role==="king"){if(r){const c=this.castles.rook[n][r];if(k(c)){const a=this.board.take(c);this.board.set(Bt(n,r),i),a&&this.board.set(Mt(n,r),a)}}this.castles.discardColor(n)}if(!r){const c=this.board.set(e.to,i)||o;c&&this.playCaptureAt(e.to,c)}}this.remainingChecks&&this.isCheck()&&(this.remainingChecks[n]=Math.max(this.remainingChecks[n]-1,0))}}class Kn extends Ir{constructor(){super("chess")}static default(){const e=new this;return e.reset(),e}static fromSetup(e){const n=new this;return n.setupUnchecked(e),n.validate().map(s=>n)}clone(){return super.clone()}}const Br=(t,e)=>{if(!k(e))return;const n=t.turn==="white"?5:2,s=t.turn==="white"?8:-8;if(le(e)!==n||t.board.occupied.has(e+s))return;const r=e-s;if(!(!t.board.pawn.has(r)||!t.board[M(t.turn)].has(r)))return e},Mr=t=>{if(!k(t.epSquare))return;const e=t.ctx(),s=t.board.pieces(t.turn,"pawn").intersect(Ie(M(t.turn),t.epSquare));for(const r of s)if(t.dests(r,e).has(t.epSquare))return t.epSquare},jr=(t,e,n)=>{if(!k(t.epSquare)||!Ie(t.turn,e).has(t.epSquare))return!1;if(!k(n.king))return!0;const s=t.turn==="white"?8:-8,r=t.epSquare-s;return t.kingAttackers(n.king,M(t.turn),t.board.occupied.toggle(e).toggle(r).with(t.epSquare)).without(r).isEmpty()},on=(t,e,n)=>{if(!k(n.king)||n.checkers.nonEmpty())return f.empty();const s=t.castles.rook[t.turn][e];if(!k(s)||t.castles.path[t.turn][e].intersects(t.board.occupied))return f.empty();const r=Bt(t.turn,e),i=Le(n.king,r),o=t.board.occupied.without(n.king);for(const u of i)if(t.kingAttackers(u,M(t.turn),o).nonEmpty())return f.empty();const c=Mt(t.turn,e),a=t.board.occupied.toggle(n.king).toggle(s).toggle(c);return t.kingAttackers(r,M(t.turn),a).nonEmpty()?f.empty():f.fromSquare(s)},Un=(t,e)=>{if($e(e))return;const n=e.to-e.from;if(!(Math.abs(n)!==2&&!t.board[t.turn].has(e.to))&&t.board.king.has(e.from))return n>0?"h":"a"},Dr=(t,e)=>{const n=Un(t,e);if(!n)return e;const s=t.castles.rook[t.turn][n];return{from:e.from,to:k(s)?s:e.to}},Fr="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR",Kr=Fr+" w KQkq -",Ur=Kr+" 0 1";var T;(function(t){t.Fen="ERR_FEN",t.Board="ERR_BOARD",t.Pockets="ERR_POCKETS",t.Turn="ERR_TURN",t.Castling="ERR_CASTLING",t.EpSquare="ERR_EP_SQUARE",t.RemainingChecks="ERR_REMAINING_CHECKS",t.Halfmoves="ERR_HALFMOVES",t.Fullmoves="ERR_FULLMOVES"})(T||(T={}));class j extends Error{}const zr=(t,e,n)=>{let s=t.indexOf(e);for(;n-- >0&&s!==-1;)s=t.indexOf(e,s+e.length);return s},ge=t=>/^\d{1,4}$/.test(t)?parseInt(t,10):void 0,zn=t=>{const e=pe(t);return e&&{role:e,color:t.toLowerCase()===t?"black":"white"}},at=t=>{const e=be.empty();let n=7,s=0;for(let r=0;r<t.length;r++){const i=t[r];if(i==="/"&&s===8)s=0,n--;else{const o=parseInt(i,10);if(o>0)s+=o;else{if(s>=8||n<0)return _.err(new j(T.Board));const c=s+n*8,a=zn(i);if(!a)return _.err(new j(T.Board));t[r+1]==="~"&&(a.promoted=!0,r++),e.set(c,a),s++}}}return n!==0||s!==8?_.err(new j(T.Board)):_.ok(e)},cn=t=>{if(t.length>64)return _.err(new j(T.Pockets));const e=ne.empty();for(const n of t){const s=zn(n);if(!s)return _.err(new j(T.Pockets));e[s.color][s.role]++}return _.ok(e)},Vr=(t,e)=>{let n=f.empty();if(e==="-")return _.ok(n);for(const s of e){const r=s.toLowerCase(),i=s===r?"black":"white",o=i==="white"?0:7;if("a"<=r&&r<="h")n=n.with(_t(r.charCodeAt(0)-97,o));else if(r==="k"||r==="q"){const c=t[i].intersect(f.backrank(i)).intersect(t.rook.union(t.king)),a=r==="k"?c.last():c.first();n=n.with(k(a)&&t.rook.has(a)?a:_t(r==="k"?7:0,o))}else return _.err(new j(T.Castling))}return ce.some(s=>f.backrank(s).intersect(n).size()>2)?_.err(new j(T.Castling)):_.ok(n)},ln=t=>{const e=t.split("+");if(e.length===3&&e[0]===""){const n=ge(e[1]),s=ge(e[2]);return!k(n)||n>3||!k(s)||s>3?_.err(new j(T.RemainingChecks)):_.ok(new Te(3-n,3-s))}else if(e.length===2){const n=ge(e[0]),s=ge(e[1]);return!k(n)||n>3||!k(s)||s>3?_.err(new j(T.RemainingChecks)):_.ok(new Te(n,s))}else return _.err(new j(T.RemainingChecks))},Dt=t=>{const e=t.split(/[\s_]+/),n=e.shift();let s,r=_.ok(void 0);if(n.endsWith("]")){const c=n.indexOf("[");if(c===-1)return _.err(new j(T.Fen));s=at(n.slice(0,c)),r=cn(n.slice(c+1,-1))}else{const c=zr(n,"/",7);c===-1?s=at(n):(s=at(n.slice(0,c)),r=cn(n.slice(c+1)))}let i;const o=e.shift();if(!k(o)||o==="w")i="white";else if(o==="b")i="black";else return _.err(new j(T.Turn));return s.chain(c=>{const a=e.shift(),u=k(a)?Vr(c,a):_.ok(f.empty()),l=e.shift();let h;if(k(l)&&l!=="-"&&(h=we(l),!k(h)))return _.err(new j(T.EpSquare));let d=e.shift(),g;k(d)&&d.includes("+")&&(g=ln(d),d=e.shift());const m=k(d)?ge(d):0;if(!k(m))return _.err(new j(T.Halfmoves));const p=e.shift(),b=k(p)?ge(p):1;if(!k(b))return _.err(new j(T.Fullmoves));const y=e.shift();let P=_.ok(void 0);if(k(y)){if(k(g))return _.err(new j(T.RemainingChecks));P=ln(y)}else k(g)&&(P=g);return e.length>0?_.err(new j(T.Fen)):r.chain(C=>u.chain(O=>P.map(S=>({board:c,pockets:C,turn:i,castlingRights:O,remainingChecks:S,epSquare:h,halfmoves:m,fullmoves:Math.max(1,b)}))))})},Gr=t=>{let e=oe(t.role);return t.color==="white"&&(e=e.toUpperCase()),t.promoted&&(e+="~"),e},Wr=t=>{let e="",n=0;for(let s=7;s>=0;s--)for(let r=0;r<8;r++){const i=r+s*8,o=t.get(i);o?(n>0&&(e+=n,n=0),e+=Gr(o)):n++,r===7&&(n>0&&(e+=n,n=0),s!==0&&(e+="/"))}return e},an=t=>U.map(e=>oe(e).repeat(t[e])).join(""),Hr=t=>an(t.white).toUpperCase()+an(t.black),qr=(t,e)=>{let n="";for(const s of ce){const r=f.backrank(s);let i=t.kingOf(s);k(i)&&!r.has(i)&&(i=void 0);const o=t.pieces(s,"rook").intersect(r);for(const c of e.intersect(r).reversed())if(c===o.first()&&k(i)&&c<i)n+=s==="white"?"Q":"q";else if(c===o.last()&&k(i)&&i<c)n+=s==="white"?"K":"k";else{const a=ze[K(c)];n+=s==="white"?a.toUpperCase():a}}return n||"-"},Qr=t=>`${t.white}+${t.black}`,Jr=(t,e)=>[Wr(t.board)+(t.pockets?`[${Hr(t.pockets)}]`:""),t.turn[0],qr(t.board,t.castlingRights),k(t.epSquare)?ke(t.epSquare):"-",...t.remainingChecks?[Qr(t.remainingChecks)]:[],...e!=null&&e.epd?[]:[Math.max(0,Math.min(t.halfmoves,9999)),Math.max(1,Math.min(t.fullmoves,9999))]].join(" "),Xr=(t,e)=>{let n="";if($e(e))e.role!=="pawn"&&(n=oe(e.role).toUpperCase()),n+="@"+ke(e.to);else{const s=t.board.getRole(e.from);if(!s)return"--";if(s==="king"&&(t.board[t.turn].has(e.to)||Math.abs(e.to-e.from)===2))n=e.to>e.from?"O-O":"O-O-O";else{const r=t.board.occupied.has(e.to)||s==="pawn"&&K(e.from)!==K(e.to);if(s!=="pawn"){n=oe(s).toUpperCase();let i;if(s==="king"?i=et(e.to).intersect(t.board.king):s==="queen"?i=jt(e.to,t.board.occupied).intersect(t.board.queen):s==="rook"?i=ve(e.to,t.board.occupied).intersect(t.board.rook):s==="bishop"?i=_e(e.to,t.board.occupied).intersect(t.board.bishop):i=tt(e.to).intersect(t.board.knight),i=i.intersect(t.board[t.turn]).without(e.from),i.nonEmpty()){const o=t.ctx();for(const c of i)t.dests(c,o).has(e.to)||(i=i.without(c));if(i.nonEmpty()){let c=!1,a=i.intersects(f.fromRank(le(e.from)));i.intersects(f.fromFile(K(e.from)))?c=!0:a=!0,a&&(n+=ze[K(e.from)]),c&&(n+=jn[le(e.from)])}}}else r&&(n=ze[K(e.from)]);r&&(n+="x"),n+=ke(e.to),e.promotion&&(n+="="+oe(e.promotion).toUpperCase())}}return n},Zr=(t,e)=>{var n;const s=Xr(t,e);return t.play(e),!((n=t.outcome())===null||n===void 0)&&n.winner?s+"#":t.isCheck()?s+"+":s},Yr=(t,e)=>Zr(t.clone(),e),un=(t,e)=>{const n=t.ctx(),s=e.match(/^([NBRQK])?([a-h])?([1-8])?[-x]?([a-h][1-8])(?:=?([nbrqkNBRQK]))?[+#]?$/);if(!s){let l;if(e==="O-O"||e==="O-O+"||e==="O-O#"?l="h":(e==="O-O-O"||e==="O-O-O+"||e==="O-O-O#")&&(l="a"),l){const g=t.castles.rook[t.turn][l];return!k(n.king)||!k(g)||!t.dests(n.king,n).has(g)?void 0:{from:n.king,to:g}}const h=e.match(/^([pnbrqkPNBRQK])?@([a-h][1-8])[+#]?$/);if(!h)return;const d={role:h[1]?pe(h[1]):"pawn",to:we(h[2])};return t.isLegal(d,n)?d:void 0}const r=s[1]?pe(s[1]):"pawn",i=we(s[4]),o=s[5]?pe(s[5]):void 0;if(!!o!==(r==="pawn"&&f.backranks().has(i))||o==="king"&&t.rules!=="antichess")return;let c=t.board.pieces(t.turn,r);r==="pawn"&&!s[2]?c=c.intersect(f.fromFile(K(i))):s[2]&&(c=c.intersect(f.fromFile(s[2].charCodeAt(0)-97))),s[3]&&(c=c.intersect(f.fromRank(s[3].charCodeAt(0)-49)));const a=r==="pawn"?f.fromFile(K(i)):f.empty();c=c.intersect(a.union(Nr({color:M(t.turn),role:r},i,t.board.occupied)));let u;for(const l of c)if(t.dests(l,n).has(i)){if(k(u))return;u=l}if(k(u))return{from:u,to:i,promotion:o}},ei=(t=Ft)=>({headers:t(),moves:new Vn});let Vn=class{constructor(){this.children=[]}*mainlineNodes(){let e=this;for(;e.children.length;){const n=e.children[0];yield n,e=n}}*mainline(){for(const e of this.mainlineNodes())yield e.data}end(){let e=this;for(;e.children.length;)e=e.children[0];return e}};class ti extends Vn{constructor(e){super(),this.data=e}}const Ft=()=>new Map([["Event","?"],["Site","?"],["Date","????.??.??"],["Round","?"],["White","?"],["Black","?"],["Result","*"]]),hn="\uFEFF",ut=t=>/^\s*$/.test(t),ht=t=>t.startsWith("%");class ni extends Error{}class si{constructor(e,n=Ft,s=1e6){this.emitGame=e,this.initHeaders=n,this.maxBudget=s,this.lineBuf=[],this.resetGame(),this.state=0}resetGame(){this.budget=this.maxBudget,this.found=!1,this.state=1,this.game=ei(this.initHeaders),this.stack=[{parent:this.game.moves,root:!0}],this.commentBuf=[]}consumeBudget(e){if(this.budget-=e,this.budget<0)throw new ni("ERR_PGN_BUDGET")}parse(e,n){if(!(this.budget<0))try{let s=0;for(;;){const r=e.indexOf(`
`,s);if(r===-1)break;const i=r>s&&e[r-1]==="\r"?r-1:r;this.consumeBudget(r-s),this.lineBuf.push(e.slice(s,i)),s=r+1,this.handleLine()}this.consumeBudget(e.length-s),this.lineBuf.push(e.slice(s)),n!=null&&n.stream||(this.handleLine(),this.emit(void 0))}catch(s){this.emit(s)}}handleLine(){let e=!0,n=this.lineBuf.join("");this.lineBuf=[];e:for(;;)switch(this.state){case 0:n.startsWith(hn)&&(n=n.slice(hn.length)),this.state=1;case 1:if(ut(n)||ht(n))return;this.found=!0,this.state=2;case 2:{if(ht(n))return;let s=!0;for(;s;)s=!1,n=n.replace(/^\s*\[([A-Za-z0-9][A-Za-z0-9_+#=:-]*)\s+"((?:[^"\\]|\\"|\\\\)*)"\]/,(r,i,o)=>(this.consumeBudget(200),this.game.headers.set(i,o.replace(/\\"/g,'"').replace(/\\\\/g,"\\")),s=!0,e=!1,""));if(ut(n))return;this.state=3}case 3:{if(e){if(ht(n))return;if(ut(n))return this.emit(void 0)}const s=/(?:[NBKRQ]?[a-h]?[1-8]?[-x]?[a-h][1-8](?:=?[nbrqkNBRQK])?|[pnbrqkPNBRQK]?@[a-h][1-8]|O-O-O|0-0-0|O-O|0-0)[+#]?|--|Z0|0000|@@@@|{|;|\$\d{1,4}|[?!]{1,2}|\(|\)|\*|1-0|0-1|1\/2-1\/2/g;let r;for(;r=s.exec(n);){const i=this.stack[this.stack.length-1];let o=r[0];if(o===";")return;if(o.startsWith("$"))this.handleNag(parseInt(o.slice(1),10));else if(o==="!")this.handleNag(1);else if(o==="?")this.handleNag(2);else if(o==="!!")this.handleNag(3);else if(o==="??")this.handleNag(4);else if(o==="!?")this.handleNag(5);else if(o==="?!")this.handleNag(6);else if(o==="1-0"||o==="0-1"||o==="1/2-1/2"||o==="*")this.stack.length===1&&o!=="*"&&this.game.headers.set("Result",o);else if(o==="(")this.consumeBudget(100),this.stack.push({parent:i.parent,root:!1});else if(o===")")this.stack.length>1&&this.stack.pop();else if(o==="{"){const c=s.lastIndex,a=n[c]===" "?c+1:c;n=n.slice(a),this.state=4;continue e}else this.consumeBudget(100),o==="Z0"||o==="0000"||o==="@@@@"?o="--":o.startsWith("0")&&(o=o.replace(/0/g,"O")),i.node&&(i.parent=i.node),i.node=new ti({san:o,startingComments:i.startingComments}),i.startingComments=void 0,i.root=!1,i.parent.children.push(i.node)}return}case 4:{const s=n.indexOf("}");if(s===-1){this.commentBuf.push(n);return}else{const r=s>0&&n[s-1]===" "?s-1:s;this.commentBuf.push(n.slice(0,r)),this.handleComment(),n=n.slice(s),this.state=3,e=!1}}}}handleNag(e){var n;this.consumeBudget(50);const s=this.stack[this.stack.length-1];s.node&&((n=s.node.data).nags||(n.nags=[]),s.node.data.nags.push(e))}handleComment(){var e,n;this.consumeBudget(100);const s=this.stack[this.stack.length-1],r=this.commentBuf.join(`
`);this.commentBuf=[],s.node?((e=s.node.data).comments||(e.comments=[]),s.node.data.comments.push(r)):s.root?((n=this.game).comments||(n.comments=[]),this.game.comments.push(r)):(s.startingComments||(s.startingComments=[]),s.startingComments.push(r))}emit(e){if(this.state===4&&this.handleComment(),e)return this.emitGame(this.game,e);this.found&&this.emitGame(this.game,void 0),this.resetGame()}}const ri=(t,e=Ft)=>{const n=[];return new si(s=>n.push(s),e,NaN).parse(t),n},Ge=class Ge{constructor(e,n){this.headers=e,this.tree=n}get event(){return this.headers.event}get site(){return this.headers.site}get white(){return this.headers.white}get black(){return this.headers.black}get puzzle(){return this.headers.puzzle}};$(Ge,"make_many",e=>ri(e).map(n=>{let s=n.headers.get("Event"),r=n.headers.get("Site"),i=n.headers.get("White"),o=n.headers.get("Black"),c=n.headers.get("Puzzle"),a=n.headers.get("FEN"),u=n.moves.children[0],l=a??Ur,h=u.data.san,d=Kn.fromSetup(Dt(l).unwrap()).unwrap(),g=un(d,h),m=nn(g),p=Rt.make(l,[m]);b(p,u,d,[]);function b(P,C,O,S){let q=un(O,C.data.san),Q=O.clone();Q.play(q);let J=nn(q);P.append_uci(J,S),C.children.forEach(R=>{b(P,R,Q,[...S,J])})}return new Ge({event:s,site:r,white:i,black:o,puzzle:c},p)}));let Ot=Ge;const Oe=class Oe{constructor(e){$(this,"_children");this.data=e,this._children=B([])}static color_of(e){return Dt(e.data.before_fen).unwrap().turn}get clone(){let e=new Oe({...this.data});return e.children=this.children.map(n=>n.clone),e}get length(){if(this.children.length>1)return 1;if(this.children.length===0)return 0;let e=1,n=this.children[0];for(;(n==null?void 0:n.children.length)===1;)e++,n=n.children[0];return e}get nb_first_variations(){var e;return((e=this.children_first_variations)==null?void 0:e.length)??0}get children_first_variations(){let e=this.children;for(;(e==null?void 0:e.length)===1;)e=e[0].children;if(e.length>1)return e}get children(){return this._children[0]()}set children(e){this._children[1](e)}};$(Oe,"make",e=>new Oe(e));let xe=Oe;const se=class se{constructor(e){this.root=e}get initial_color(){return xe.color_of(this.root)}get clone(){return new se(this.root.clone)}static make_data(e,n,s,r){let i=Dt(e).unwrap(),o=Kn.fromSetup(i).unwrap(),c=Cr(n),a=Yr(o,c);return o.play(c),{path:[...r,n],ply:s,before_fen:e,san:a,after_fen:Jr(o.toSetup()),uci:n}}_traverse_path(e){let n,s=[this.root];for(let r of e)n=s.find(i=>i.data.uci===r),s=(n==null?void 0:n.children)||this.root;return n}_find_path(e){let n=[],s=[],r=this.root,i=[r],o=!1;for(let c of e)if(o)s.push(c);else{let a=i.find(u=>u.data.uci===c);a?(n.push(c),r=a,i=L(()=>r.children)):(o=!0,s.push(c))}return[n,r,s]}get_children(e){let n=this._traverse_path(e);return n==null?void 0:n.children.map(s=>s.data)}get_at(e){let n=this._traverse_path(e);return n==null?void 0:n.data}append_uci(e,n=[]){this.append_ucis([...n,e])}append_ucis(e){let[n,s,r]=this._find_path(e);for(let i of r){let o=xe.make(se.make_data(s.data.after_fen,i,s.data.ply+1,n)),c=L(()=>s.children);s.children=[...c,o],s=o,n=[...n,i]}}};$(se,"make",(e,n)=>{let s=n[0],r=n.slice(1),i=new se(xe.make(se.make_data(e,s,1,[])));return i.append_ucis(r),i});let Rt=se;const ii=(t,e)=>{let n=Ot.make_many(t).map(s=>({site:s.puzzle&&`https://lichess.org/tactics/${s.puzzle}`,pgn:s}));return{name:e,chapters:n}},fn=()=>fetch("pgns/config.txt").then(t=>t.text()).then(t=>ci(t)),oi=(t,e)=>fetch(`pgns/${t}.pgn`).then(n=>n.text()).then(n=>ii(n,e)),ci=t=>t.split(`
`).map(e=>{let n=e.match(/(\w*)\s*"([^"]*)"/),[s,r,i]=n;return console.log("id",r,"name",i),{id:r,name:i}});class li{constructor(){$(this,"config");$(this,"cache",new Map)}async get_list_of_studies(){return this.config||(this.config=await fn()),this.config}async get_study_by_id(e){if(this.config||(this.config=await fn()),!this.cache.get(e)){let{name:n}=this.config.find(r=>r.id===e),s=await oi(e,n);this.cache.set(e,s)}return this.cache.get(e)}}const dn=new li,ai=()=>`run-${Math.random().toString(16).slice(2)}`,ui=[];class hi{constructor(){$(this,"anonymous_user","Anonymous");$(this,"_active_user",Ne(B(),{name:".wpc.profile.active_user"}));$(this,"_user_list",Ne(B(ui,{equals:!1}),{name:".wpc.profile.user_list"}))}get active_user(){return this._active_user[0]()}set active_user(e){this._active_user[1](e)}get user_list(){return this._user_list[0]()}set user_list(e){this._user_list[1](e)}save_new_profile(e){let n=this.user_list;n=n.filter(s=>s!==e),n.push(e),zt(()=>{this.user_list=n,this.active_user=e})}delete_active_profile(){let e=this.active_user,n=this.user_list;n=n.filter(s=>s!==e),zt(()=>{this.active_user=void 0,this.user_list=n})}change_profile(e){this.active_user=e}}const fi=new hi;function Mi(t){return t.solved.length+t.failed.length+t.skipped.length}const di=[],mi=[];class gi{constructor(){$(this,"_user_active_config_list",Ne(B(mi,{equals:!1}),{name:".wpc.profile.user_active_config_list"}));$(this,"_user_run_list",Ne(B(di,{equals:!1}),{name:".wpc.profile.user_run_list"}))}get user_active_config_list(){return this._user_active_config_list[0]()}set user_active_config_list(e){this._user_active_config_list[1](e)}get user_run_list(){return this._user_run_list[0]()}set user_run_list(e){this._user_run_list[1](e)}get_runs_for_user(e,n){return this.user_run_list.filter(s=>s.username===e&&s.set_id===n)}get_active_run_for_user(e){let n=this.user_active_config_list.find(r=>r.username===e),s=this.user_run_list.filter(r=>r.username===e&&(!n||r.set_id===n.active_set));return s[s.length-1]}get_active_config_for_user(e){return this.user_active_config_list.find(s=>s.username===e)}set_active_config_for_user(e,n){let s=this.user_active_config_list,r=s.find(i=>i.username);if(r)return r.active_set=n,this.user_active_config_list=s,r;{let i={username:e,active_set:n};return s.push(i),this.user_active_config_list=s,i}}async get_or_create_active_config_for_user(e){let n=this.get_active_config_for_user(e);if(n)return n;{let s=(await dn.get_list_of_studies())[0].id;return this.set_active_config_for_user(e,s)}}async get_or_create_active_run_for_user(e){let n=this.get_active_run_for_user(e);return n||(n=await this.start_new_run(e)),n}clear_all_runs(e){let n=this.user_run_list;n=n.filter(s=>s.username!==e),this.user_run_list=n}clear_runs(e,n){let s=this.user_run_list;s=s.filter(r=>!(r.username===e&&r.set_id==n)),this.user_run_list=s}async start_new_run(e){let s=(await this.get_or_create_active_config_for_user(e)).active_set,i=(await dn.get_study_by_id(s)).chapters.length,o=this.get_runs_for_user(e,s),c={id:ai(),no:o.length+1,set_id:s,username:e,solved:[],failed:[],skipped:[],elapsed_ms:0,total:i};return this._save_run(c),c}_save_run(e){let n=this.user_run_list;n=n.filter(s=>s.id!==e.id),n.push(e),this.user_run_list=n}delete_runs_for_user(e){let n=this.user_run_list;n=n.filter(r=>r.username!==e),this.user_run_list=n;let s=this.user_active_config_list;s=s.filter(r=>r.username!==e),this.user_active_config_list=s}delete_runs_for_set(e,n){let s=this.user_run_list;s=s.filter(r=>!(r.username===e&&r.set_id===n)),this.user_run_list=s}}const ji=new gi;function pi(t){let e,n;return function(...s){const r=this,i=()=>{n=void 0,e=t.apply(r,s).finally(()=>{e=void 0,n&&n()})};e?n=i:i()}}function wi(t,e){return pi(function(...n){return e.apply(this,n),new Promise(s=>setTimeout(s,t))})}const ki=(t,e,n)=>Ne(B(t),{name:`.wpc.v${n??1}.${e}`});class Gn{constructor(){$(this,"ctx",yi());$(this,"sounds",new Map);$(this,"paths",new Map);$(this,"theme","standard");$(this,"volumeStorage",ki("1",".sound.volume"));$(this,"enabled",()=>this.theme!=="silent");$(this,"getVolume",()=>{const e=parseFloat(this.volumeStorage[0]());return e>=0?e:.7});$(this,"throttled",wi(200,e=>this.play(e)));$(this,"setVolume",e=>this.volumeStorage[1](e.toString()))}resolvePath(e){return this.enabled()?`sound/${this.theme}/${e[0].toUpperCase()+e.slice(1)}`:void 0}async play(e,n=1){if(!this.enabled())return;const s=await this.load(e);s&&await s.play(this.getVolume()*n)}async load(e,n){if(!this.ctx||(n?this.paths.set(e,n):n=this.paths.get(e)??this.resolvePath(e),!n))return;if(this.sounds.has(n))return this.sounds.get(n);console.log(n);const s=await fetch(`${n}.mp3`);if(!s.ok)throw new Error(`${n}.mp3 failed ${s.status}`);const r=await s.arrayBuffer(),i=await new Promise((c,a)=>{var u,l,h;((u=this.ctx)==null?void 0:u.decodeAudioData.length)===1?(l=this.ctx)==null||l.decodeAudioData(r).then(c).catch(a):(h=this.ctx)==null||h.decodeAudioData(r,c,a)}),o=new bi(this.ctx,i);return this.sounds.set(n,o),o}preloadBoardSounds(){for(const e of["move","capture","check","genericNotify"])this.load(e)}async move(e){var n,s,r;e!=null&&e.name?this.throttled(e.name):((n=e==null?void 0:e.san)!=null&&n.includes("x")?this.throttled("capture"):this.throttled("move"),((s=e==null?void 0:e.san)!=null&&s.includes("#")||(r=e==null?void 0:e.san)!=null&&r.includes("+"))&&this.throttled("check"))}}class bi{constructor(e,n){$(this,"node");$(this,"ctx");this.buffer=n,this.rewire(e)}play(e=1){this.node.gain.setValueAtTime(e,this.ctx.currentTime);const n=this.ctx.createBufferSource();return n.buffer=this.buffer,n.connect(this.node),new Promise(s=>{n.onended=()=>{n.disconnect(),s()},n.start(0)})}rewire(e){var n;(n=this.node)==null||n.disconnect(),this.ctx=e,this.node=this.ctx.createGain(),this.node.connect(this.ctx.destination)}}function yi(){return new AudioContext}const Wn=He(new Gn);function _i(t){return I(Wn.Provider,{value:new Gn,get children(){return t.children}})}function Di(){return qe(Wn)}var vi=Cn("<div class=root><header><div class=title-nav><h1></h1></div><nav id=topnav></nav></header><div><div class=main>");const Ai=$t(()=>Tt(()=>import("./Home-BtjOHcat.js"),__vite__mapDeps([0,1,2]),import.meta.url)),Ei=$t(()=>Tt(()=>import("./Dashboard-DoRW-uxG.js"),__vite__mapDeps([3,1,4]),import.meta.url)),Ci=$t(()=>Tt(()=>import("./Profile-C7V2iOtj.js"),__vite__mapDeps([5,6]),import.meta.url));function Pi(){return I(_i,{get children(){return I(Ms,{get children(){return I(fr,{root:xi,get children(){return[I(lt,{path:"/",component:Ai}),I(lt,{path:"/dashboard",component:Ei}),I(lt,{path:"/profile",component:Ci})]}})}})}})}function xi(t){let e=Tn(),n=N(()=>e.pathname.split("/")[1]);const s=()=>`on-${n()||"home"}`;return(()=>{var r=vi(),i=r.firstChild,o=i.firstChild,c=o.firstChild,a=o.nextSibling,u=i.nextSibling,l=u.firstChild;return Me(c,I(Yt,{href:"/",children:"Woodpecker Chess Tactics"})),Me(a,I(Yt,{href:"/dashboard",get children(){return I(Lt,{get when(){return fi.active_user},fallback:"Dashboard",children:h=>h()})}})),Me(l,()=>t.children),W(()=>xn(u,"main-wrap "+s())),r})()}const Oi=document.getElementById("root");As(()=>I(Pi,{}),Oi);export{M as A,Mi as B,Kn as C,dn as D,Ii as E,Ni as F,Yt as G,xs as H,Ur as I,wi as J,Li as M,fi as P,Lt as S,ji as U,I as a,mt as b,Yn as c,Pn as d,$i as e,N as f,W as g,xn as h,Me as i,B as j,zt as k,Rt as l,ke as m,L as n,Si as o,Dt as p,Jr as q,we as r,K as s,Cn as t,Ti as u,Cr as v,ts as w,Di as x,pn as y,St as z};
